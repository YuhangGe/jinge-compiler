{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:////Users/geyuhang/jinge/jinge-framework/src/util/type.js","webpack:////Users/geyuhang/jinge/jinge-framework/src/util/array.js","webpack:////Users/geyuhang/jinge/jinge-framework/src/util/index.js","webpack:////Users/geyuhang/jinge/jinge-framework/src/viewmodel/notify.js","webpack:////Users/geyuhang/jinge/jinge-framework/src/viewmodel/common.js","webpack:////Users/geyuhang/jinge/jinge-framework/src/viewmodel/proxy.js","webpack:////Users/geyuhang/jinge/jinge-framework/src/core/messenger.js","webpack:////Users/geyuhang/jinge/jinge-framework/src/dom/index.js","webpack:////Users/geyuhang/jinge/jinge-framework/src/core/component.js","webpack:////Users/geyuhang/jinge/jinge-framework/src/components/for.js","webpack:////Users/geyuhang/jinge/jinge-framework/src/components/if.js","webpack:///./boy.html","webpack:///./boy.js","webpack:///./app.html","webpack:////Users/geyuhang/jinge/jinge-framework/src/core/bootstrap.js","webpack:///./index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","typeOf","v","isObject","isString","isArray","Array","isFunction","instanceOf","Clazz","arrayIndexOf","array","item","indexOf","description","window","assert_fail","msg","console","error","Error","startsWith","str","search","position","STR_DEFAULT","STR_EMPTY","VM_NOTIFY","VM_ON","VM_OFF","VM_CLEAR","VM_LISTENERS","VM_LISTENERS_TM","VM_LISTENERS_HANDLERS","VM_LISTENERS_CHILDREN","walkGetNode","vm","props","level","end","length","propN","node","assign","[object Object]","vmAddListener","prop","handler","split","push","vmRemoveListener","idx","splice","arrayRemove","vmClearListener","leaf","clearImm","loopClear","setImm","setImmediate","setTimeout","clearImmediate","clearTimeout","vmNotifyChanged","loopNotify","forEach","children","k","VM_PARENTS","VM_EMPTY_PARENTS","isViewModel","obj","addVMParent","parent","ps","removeVMParent","notifyPropChanged","pInfo","pVM","pName","objectPropSetHandler","target","newValType","newValIsVM","oldVal","ObjectProxyHandler","set","ArrayFns","pop","shift","unshift","reverse","sort","fill","slice","concat","map","ArrayProxyHandler","tag","fn","args","rtn","wrapViewModel","Number","isNaN","isFinite","oldLen","arrayLengthSetHandler","wrapProp","Boolean","RegExp","wrapProxy","isArr","addMessengerInterface","vmAddMessengerInterface","Proxy","plainObjectOrArray","wrapComponent","component","LISTENERS","Messenger","this","eventName","listenersMap","notifyKey","notifyArgs","listeners","notifyHelper","eventListener","me","Map","listener","onHelper","ls","clear","offHelper","delete","getParent","$ele","parentNode","setText","$element","text","textContent","createElement","attrs","$e","document","an","attrName","attrValue","setAttribute","child","appendChild","createElementWithoutAttrs","createFragment","$f","createDocumentFragment","createTextNode","createComment","data","prepareNewNode","newNode","insertBefore","$parent","referenceNode","removeChild","$child","ch","cc","addEvent","capture","addEventListener","RENDER","RENDER_TO_DOM","ARG_COMPONENTS","CLONE","DESTROY","CONTEXT","CONTEXT_STATE","ROOT_NODES","NON_ROOT_COMPONENT_NODES","REF_NODES","SET_REF_NODE","RELATED_VM_REFS","RELATED_VM_LISTENERS","RELATED_VM_ADD","GET_STATE_NAME","UPDATE","UPDATE_IF_NEED","STATE","STATE_INITIALIZE","STATE_RENDERED","STATE_WILLDESTROY","STATE_DESTROIED","STATE_NAMES","onAfterRender","isComponent","afterRender","getOrCreateMap","comp","component_Component","template","super","componentCtx","rvl","hook","renderFn","constructor","$targetDOM","oldNode","Node","replaceChild","removeDOM","beforeDestroy","_destroy","cb","arr","ctx","ref","destroyRelatedVM","removeRootNodes","id","forceOverride","context","el","relatedComponent","rns","has","rvrs","rs","assertRenderResults","renderResults","getFirstHtmlDOM","getRenderFn","acs","renderSwitch","roots","updateSwitch","fd","pa","$cmt","isC","ne","if_IfComponent","vm_addc9e13d4","fn_addc9e13d4_1","expect","_e","boy","vm_0","boy_Boy","keys","filter","test","alert","notify","log","getChild","app","fn_0","on","onBoyApiCalled","showBoy","inc","callApi","Component","dom","body","bootComponent","bootstrap","$evt","someApi","getElementById"],"mappings":"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","file":"bundle.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export function typeOf(v) {\n  return typeof v;\n}\n\nexport function isObject(v) {\n  return typeOf(v) === 'object';\n}\nexport function isString(v) {\n  return typeOf(v) === 'string';\n}\nexport function isNumber(v) {\n  return typeOf(v) === 'number' && !Number.isNaN(v) && Number.isFinite(v);\n}\n\nexport function isUndefined(v) {\n  return typeOf(v) === 'undefined';\n}\n\nexport function isArray(v) {\n  return Array.isArray(v);\n}\n\nexport function isFunction(v) {\n  return typeOf(v) === 'function';\n}\n\nexport function instanceOf(v, Clazz) {\n  return v instanceof Clazz;\n}\n\nexport function isDOMNode(ele) {\n  return instanceOf(ele, Node);\n}\n\nexport function isPropertyEnumerable(obj, key) {\n  return obj.propertyIsEnumerable(key);\n}\nexport function getOwnPropertySymbols(obj) {\n  return Object.getOwnPropertySymbols(obj);\n}","\nexport function arrayIndexOf(array, item) {\n  return array.indexOf(item);\n}\n\nexport function arrayRemove(array, item) {\n  const idx = arrayIndexOf(array, item);\n  if (idx < 0) return false;\n  array.splice(idx, 1);\n  return true;\n}\n\nexport function arrayPushIfNotExist(array, item) {\n  const idx = arrayIndexOf(array, item);\n  if (idx >= 0) return;\n  array.push(item);\n}\n","\nexport * from './type';\nexport * from './array';\nexport * from './diff';\n\nexport function Symbol(description) {\n  return window.Symbol(description);\n}\n\nexport function assert_fail(msg) {\n  msg && console.error(msg);\n  throw new Error('assert failed!');\n}\n\nexport function startsWith(str, search, position = 0) {\n  return str.startsWith( search, position);\n}\n\nexport function defineProperty(...args) {\n  return Object.defineProperty(...args);\n}\n\nexport function defineProperties(...args) {\n  return Object.defineProperties(...args);\n}\n\nexport function simpleUUID() {\n  return Date.now().toString(32) + Math.floor(Math.random() * 0xffff).toString(32);\n}\n\nexport const STR_DEFAULT = 'default';\nexport const STR_JINGE = 'jinge';\nexport const STR_EMPTY = 'empty';\n\nexport function mapObject(obj, fn) {\n  const newObj = {};\n  for(const k in obj) {\n    newObj[k] = fn(obj[k], k);\n  }\n  return newObj;\n}","import {\n  isArray,\n  arrayRemove,\n  arrayPushIfNotExist,\n  Symbol,\n  startsWith\n} from '../util';\n\nexport const VM_NOTIFY = Symbol();\nexport const VM_ON = Symbol();\nexport const VM_OFF = Symbol();\nexport const VM_CLEAR = Symbol();\nexport const VM_LISTENERS = Symbol();\nexport const VM_LISTENERS_TM = Symbol();\nexport const VM_LISTENERS_HANDLERS = Symbol();\nexport const VM_LISTENERS_CHILDREN = Symbol();\n\n\nfunction walkGetNode(vm, props, level = 0, create = false) {\n  const end = props.length - 1;\n  if (end < 0) return null;\n  const propN = '' + props[level]; // force to string\n  if (startsWith(propN, '_')) {\n    console.error('WARN: property name startsWith char \"_\" is private/once-used property, ignored get/set listener.');\n    return null;\n  }\n  let node = vm[propN];\n  if (!node) {\n    if (create) {\n      // node can't have any prototype function.\n      node = vm[propN] = Object.create(null);\n      Object.assign(node, {\n        [VM_LISTENERS_TM]: null,\n        [VM_LISTENERS_HANDLERS]: [],\n        [VM_LISTENERS_CHILDREN]: Object.create(null)\n      });\n    } else {\n      return null;\n    }\n  }\n  if (end === level) {\n    return node;\n  } else {\n    return walkGetNode(node[VM_LISTENERS_CHILDREN], props, level + 1, create);\n  }\n}\n\nexport function vmAddListener(vm, prop, handler) {\n  const props = isArray(prop) ? prop : prop.split('.');\n  if (props.length === 0) return;\n  const node = walkGetNode(vm[VM_LISTENERS], props, 0, true);\n  arrayPushIfNotExist(node[VM_LISTENERS_HANDLERS], handler);\n}\n\nexport function vmRemoveListener(vm, prop, handler) {\n  const props = isArray(prop) ? prop : prop.split('.');\n  if (props.length === 0) return;\n  const node = walkGetNode(vm[VM_LISTENERS], props, 0, false);\n  if (!node) return;\n  if (!handler) node[VM_LISTENERS_HANDLERS].length = 0; // remove all\n  else arrayRemove(node[VM_LISTENERS_HANDLERS], handler);\n}\n\nexport function vmClearListener(vm) {\n  function loopClear(node) {\n    for(const prop in node) {\n      const leaf = node[prop];\n      if (!(VM_LISTENERS_TM in leaf)) return;\n      if (leaf[VM_LISTENERS_TM]) {\n        clearImm(leaf[VM_LISTENERS_TM]);\n        leaf[VM_LISTENERS_TM] = null;\n      }\n      leaf[VM_LISTENERS_HANDLERS].length = 0;\n      vmClearListener(leaf[VM_LISTENERS_CHILDREN]);\n      leaf[VM_LISTENERS_CHILDREN] = null;\n      node[prop] = null;\n    }\n  }\n  loopClear(vm[VM_LISTENERS]);\n}\n\nexport function vmAddMessengerInterface(vm) {\n  if (VM_LISTENERS in vm) return;\n  vm[VM_LISTENERS] = {};\n  vm[VM_ON] = (prop, handler) => vmAddListener(vm, prop, handler);\n  vm[VM_OFF] = (prop, handler) => vmRemoveListener(vm, prop, handler);\n  vm[VM_NOTIFY] = prop => vmNotifyChanged(vm, prop);\n  vm[VM_CLEAR] = () => vmClearListener(vm);\n}\n\nconst setImm = window.setImmediate || window.setTimeout;\nconst clearImm = window.clearImmediate || window.clearTimeout;\n\nfunction loopNotify(node) {\n  if (node[VM_LISTENERS_TM]) {\n    clearImm(node[VM_LISTENERS_TM]);\n    node[VM_LISTENERS_TM] = null;\n  }\n  if (node[VM_LISTENERS_HANDLERS].length > 0) {\n    node[VM_LISTENERS_TM] = setImm(() => {\n      node[VM_LISTENERS_TM] = null;\n      node[VM_LISTENERS_HANDLERS].forEach(handler => handler());\n    });\n  }\n  const children = node[VM_LISTENERS_CHILDREN];\n  for(const k in children) {\n    loopNotify(children[k]);\n  }\n}\nexport function vmNotifyChanged(vm, prop) {\n  const props = isArray(prop) ? prop : prop.split('.');\n  if (props.length === 0) return;\n  const node = walkGetNode(vm[VM_LISTENERS], props, 0, false);\n  if (!node) return;\n  loopNotify(node);\n}\n","import { \n  isObject,\n  isString,\n  Symbol,\n  startsWith\n} from '../util';\n\nexport const VM_PARENTS = Symbol();\nexport const VM_EMPTY_PARENTS = [];\nexport function isViewModel(obj) {\n  return obj !== null && isObject(obj) && (VM_PARENTS in obj);\n}\n\nexport function isPublicProp(v) {\n  return isString(v) && !startsWith(v, '_');\n}\n\nexport function addVMParent(vm, parent, prop) {\n  const ps = vm[VM_PARENTS];\n  for(let i = 0; i < ps.length; i++) {\n    if (ps[i][0] === parent && ps[i][1] === prop) return;\n  }\n  ps.push([parent, prop]);\n}\n\nexport function removeVMParent(vm, parent, prop) {\n  const ps = vm[VM_PARENTS];\n  for(let i = 0; i < ps.length; i++) {\n    if (ps[i][0] === parent && ps[i][1] === prop) {\n      ps.splice(i, 1);\n      return;\n    }\n  }\n}","import {\n  typeOf,\n  instanceOf,\n  isNumber,\n  isArray\n} from '../util';\nimport {\n  VM_PARENTS,\n  VM_EMPTY_PARENTS,\n  isViewModel,\n  isPublicProp,\n  addVMParent,\n  removeVMParent\n} from './common';\nimport {\n  VM_NOTIFY,\n  vmAddMessengerInterface\n} from './notify';\n\nfunction notifyPropChanged(vm, prop) {\n  if (VM_NOTIFY in vm) {\n    vm[VM_NOTIFY](prop);\n  }\n  vm[VM_PARENTS].forEach(pInfo => {\n    const [pVM, pName] = pInfo;\n    notifyPropChanged(\n      pVM,\n      isArray(prop) ? [pName, ...prop] : [pName, prop]\n    );\n  });\n}\n\nfunction objectPropSetHandler(target, prop, value) {\n  if (!isPublicProp(prop)) {\n    target[prop] = value;\n    return true;\n  }\n  const newValType = typeOf(value);\n  const newValIsVM = isViewModel(value);\n  if (value !== null && newValType === 'object' && !newValIsVM) {\n    throw new Error('public property of ViewModel target must also be ViewModel');\n  }\n  // console.log(`'${prop}' changed from ${store[prop]} to ${value}`);\n  const oldVal = target[prop];\n  if (isViewModel(oldVal)) {\n    removeVMParent(oldVal, target, prop);\n  }\n  target[prop] = value;\n  if (newValIsVM) {\n    addVMParent(value, target, prop);\n  }\n  notifyPropChanged(target, prop);\n  return true;\n}\n\nfunction arrayPropSetHandler(target, prop, value) {\n  if (prop === 'length') {\n    return arrayLengthSetHandler(target, value);\n  }\n  return objectPropSetHandler(target, prop, value);\n}\n\nfunction arrayLengthSetHandler(target, value) {\n  if (!isNumber(value)) throw new Error('bad argument. array length must be validate number.');\n  const oldLen = target.length;\n  if (oldLen > value) for(let i = value; i < oldLen; i++) {\n    const v = target[i];\n    isViewModel(v) && removeVMParent(v, target, i);\n  }\n  target.length = value;\n  if (oldLen !== value) {\n    target[VM_PARENTS].forEach(ps => notifyPropChanged(ps[0], ps[1]));\n  }\n  return true;\n}\n\nexport const ObjectProxyHandler = {\n  set: objectPropSetHandler\n};\n\n/**\n * functions need to be wrap.\n * if first bit is 1, it means this function return another Array need to be convert to ViewModel\n * if second bit is 1, it means this function will change array itself, need to notify change.\n */\nconst ArrayFns = {\n  push: 2,\n  pop: 2,\n  shift: 2,\n  unshift: 2,\n  splice: 3,\n  reverse: 2,\n  sort: 2,\n  fill: 2,\n  slice: 1,\n  concat: 1,\n  map: 1\n};\n\nexport const ArrayProxyHandler = {\n  get(vm, prop) {\n    if (prop in ArrayFns) {\n      const tag = ArrayFns[prop];\n      const fn = vm[prop];\n      return function(...args) {\n        const rtn = fn.call(vm, ...args);\n        if ((tag & 2) > 0) {\n          vm[VM_PARENTS].forEach(ps => notifyPropChanged(ps[0], ps[1]));\n        }\n        if ((tag & 1) > 0 && isArray(rtn) && !(VM_PARENTS in rtn)) {\n          return wrapViewModel(rtn);\n        } else {\n          return rtn;\n        }\n      };\n    } else {\n      return vm[prop];\n    }\n  },\n  set: arrayPropSetHandler\n};\n\n\nfunction wrapProp(vm, prop) {\n  const v = vm[prop];\n  if (v === null || typeOf(v) !== 'object' || VM_PARENTS in v) return;\n  if (instanceOf(v, Boolean) || instanceOf(v, RegExp)) {\n    v[VM_PARENTS] = VM_EMPTY_PARENTS;\n    return;\n  }\n  vm[prop] = wrapViewModel(v);\n  addVMParent(v, vm, prop);\n}\nfunction wrapProxy(vm, isArr, addMessengerInterface) {\n  vm[VM_PARENTS] = [];\n  if (addMessengerInterface) {\n    vmAddMessengerInterface(vm);\n  }\n  return new Proxy(vm, isArr ? ArrayProxyHandler : ObjectProxyHandler);\n}\n\nexport function wrapViewModel(plainObjectOrArray, addMessengerInterface = false) {\n  if (plainObjectOrArray === null) return plainObjectOrArray;\n  if (typeOf(plainObjectOrArray) === 'object') {\n    // already been ViewModel\n    if (VM_PARENTS in plainObjectOrArray) return plainObjectOrArray;\n\n    if (instanceOf(plainObjectOrArray, Boolean) || instanceOf(plainObjectOrArray, RegExp)) {\n      plainObjectOrArray[VM_PARENTS] = VM_EMPTY_PARENTS;\n    } else if (isArray(plainObjectOrArray)) {\n      for(let i = 0; i < plainObjectOrArray.length; i++) {\n        wrapProp(plainObjectOrArray, i);\n      }\n      return wrapProxy(plainObjectOrArray, true, addMessengerInterface);\n    } else {\n      for(const k in plainObjectOrArray) {\n        wrapProp(plainObjectOrArray, k);\n      }\n      return wrapProxy(plainObjectOrArray, false, addMessengerInterface);\n    }\n  } else {\n    return plainObjectOrArray;\n  }\n}\n\nexport function wrapComponent(component) {\n  return new Proxy(component, ObjectProxyHandler);\n}\n","import {\n  Symbol\n} from '../util';\n\nexport const LISTENERS = Symbol();\n\nexport function notifyHelper(listenersMap, notifyKey, ...notifyArgs) {\n  if (!listenersMap) return;\n  const listeners = listenersMap.get(notifyKey);\n  if (!listeners) return;\n  listeners.forEach(handler => handler(...notifyArgs));\n}\n\nexport function onHelper(listenersMap, notifyKey, listener) {\n  let listeners = listenersMap.get(notifyKey);\n  if (!listeners) {\n    listeners = [];\n    listenersMap.set(notifyKey, listeners);\n  }\n  if (listeners.indexOf(listener) < 0) {\n    listeners.push(listener);\n  }\n}\n\nexport function offHelper(listenersMap, notifyKey, listener) {\n  if (!listenersMap) return;\n  if (!notifyKey) {\n    listenersMap.forEach(ls => ls.length = 0);\n    listenersMap.clear();\n    return;\n  }\n  const listeners = listenersMap.get(notifyKey);\n  if (!listeners) return;\n  if (!listener) {\n    listeners.length = 0; // clear all if listener is not provided\n    return;\n  }\n  const idx = listeners.indexOf(listener);\n  if (idx < 0) return;\n  listeners.splice(idx, 1);\n}\n\nexport function clearHelper(listenersMap, notifyKey) {\n  if (!listenersMap) return;\n  if (!notifyKey) {\n    listenersMap.clear();\n  } else {\n    listenersMap.delete(notifyKey);\n  }\n}\n\nexport class Messenger {\n  constructor() {\n    this[LISTENERS] = null;\n  }\n  notify(eventName, ...args) {\n    notifyHelper(this[LISTENERS], eventName, ...args);\n  }\n  on(eventName, eventListener) {\n    const me = this;\n    if (!me[LISTENERS]) {\n      me[LISTENERS] = new Map();\n    }\n    onHelper(me[LISTENERS], eventName, eventListener);\n  }\n  off(eventName, eventListener) {\n    offHelper(this[LISTENERS], eventName, eventListener);\n  }\n  clear(eventName) {\n    clearHelper(this[LISTENERS], eventName);\n  }\n}","import {\n  isString,\n  isArray\n} from '../util';\n\nexport function getParent($ele) {\n  return $ele.parentNode;\n}\n\nexport function setText($element, text) {\n  $element.textContent = text;\n}\n\nexport function setAttribute($ele, attrName, attrValue) {\n  $ele.setAttribute(attrName, attrValue);\n}\n\nexport function setInputValue($inputOrTextarea, value) {\n  $inputOrTextarea.value = value;\n}\n\nexport function createElement(tag, attrs, ...children) {\n  const $e = document.createElement(tag);\n  if (attrs) for(const an in attrs) {\n    setAttribute($e, an, attrs[an]);\n  }\n  children.forEach(child => appendChild($e, child));\n  return $e;\n}\n\nexport function createElementWithoutAttrs(tag, ...children) {\n  return createElement(tag, null, ...children);\n}\n\nexport function createFragment(children) {\n  const $f = document.createDocumentFragment();\n  if (children) children.forEach(c => appendChild($f, c));\n  return $f;\n}\n\nexport function createTextNode(text) {\n  return document.createTextNode(text);\n}\n\nexport function createElementWithChild(tag, attrs, child) {\n  const $e = createElement(tag, attrs);\n  appendChild($e, child);\n  return $e;\n}\n\nexport function createComment(data) {\n  return document.createComment(data);\n}\n\nfunction prepareNewNode(newNode) {\n  if (!isArray(newNode)) return newNode;\n  if (newNode.length === 0) return null;\n  else if (newNode.length === 1) return newNode[0];\n  else {\n    return createFragment(newNode);\n  }\n}\n\nexport function replaceChild($parent, newNode, oldNode) {\n  if (!(newNode = prepareNewNode(newNode))) {\n    return;\n  }\n  $parent.replaceChild(newNode, oldNode);\n}\n\nexport function insertBefore($parent, newNode, referenceNode) {\n  if (!(newNode = prepareNewNode(newNode))) {\n    return;\n  }\n  $parent.insertBefore(newNode, referenceNode);\n}\n\nexport function insertAfter($parent, newNode, referenceNode) {\n  if (!(newNode = prepareNewNode(newNode))) {\n    return;\n  }\n  const rn = referenceNode.nextSibling;\n  if (!rn) {\n    appendChild($parent, newNode);\n  } else {\n    insertBefore($parent, newNode, rn);\n  }\n}\n\nexport function removeChild($parent, $child) {\n  $parent.removeChild($child);\n}\n\nexport function appendChild($parent, ...children) {\n  children.forEach(ch => {\n    if (isArray(ch)) {\n      return ch.forEach(cc => appendChild($parent, cc));\n    }\n    if (isString(ch)) {\n      ch = createTextNode(ch);\n    }\n    $parent.appendChild(ch);\n  });\n}\n\nexport function hasClass($ele, className) {\n  return $ele.classList.contains(className);\n}\n\nexport function toggleClass($ele, ...args) {\n  return $ele.classList.toggle(...args);\n}\nexport function addClass($ele, className) {\n  return toggleClass($ele, className, true);\n}\n\nexport function removeClass($ele, className) {\n  return toggleClass($ele, className, false);\n}\n\nexport function addEvent($element, eventName, handler, capture = false) {\n  $element.addEventListener(eventName, handler, capture);\n}\n\nexport function removeEvent($element, eventName, handler) {\n  $element.removeEventListener(eventName, handler);\n}","import {\n  vmAddListener,\n  vmRemoveListener,\n  vmNotifyChanged,\n  VM_ON,\n  VM_OFF,\n  VM_CLEAR,\n  VM_LISTENERS,\n  VM_NOTIFY,\n  vmClearListener\n} from '../viewmodel/notify';\nimport {\n  VM_PARENTS,\n  VM_EMPTY_PARENTS\n} from '../viewmodel/common';\nimport {\n  Messenger\n} from './messenger';\nimport {\n  Symbol,\n  isDOMNode,\n  instanceOf,\n  assert_fail,\n  isFunction,\n  STR_DEFAULT,\n  isObject,\n  isArray\n} from '../util';\nimport {\n  getParent,\n  removeChild,\n  replaceChild\n} from '../dom';\n\nexport const TEMPLATE_RENDER = Symbol();\nexport const RENDER = Symbol();\nexport const RENDER_TO_DOM = Symbol();\nexport const ARG_COMPONENTS = Symbol();\nexport const CLONE = Symbol();\nexport const DESTROY = Symbol();\nexport const CONTEXT = Symbol();\nexport const CONTEXT_STATE = Symbol();\nexport const ROOT_NODES = Symbol();\nexport const NON_ROOT_COMPONENT_NODES = Symbol();\nexport const REF_NODES = Symbol();\nexport const SET_REF_NODE = Symbol();\nexport const RELATED_VM_REFS = Symbol();\nexport const RELATED_VM_LISTENERS = Symbol();\nexport const RELATED_VM_ADD = Symbol();\nexport const GET_STATE_NAME = Symbol();\nexport const UPDATE = Symbol();\nexport const UPDATE_IF_NEED = Symbol();\nexport const STATE = Symbol();\nexport const STATE_INITIALIZE = 0;\nexport const STATE_RENDERED = 1;\nexport const STATE_WILLDESTROY = 2;\nexport const STATE_DESTROIED = 4;\nexport const STATE_NAMES = [\n  'initialize', 'rendered', 'willdestroy', 'destroied'\n];\n\nfunction copyContext(context) {\n  if (!context) return null;\n  return Object.assign({}, context);\n}\n\nexport function onAfterRender(node) {\n  if (!isComponent(node)) return; // skip html-node\n  node[ROOT_NODES].forEach(onAfterRender);\n  node[NON_ROOT_COMPONENT_NODES].forEach(onAfterRender);\n  node[STATE] = STATE_RENDERED;\n  node[CONTEXT_STATE] = -1; // has been rendered, can't modify context\n  node.afterRender();\n}\n\nfunction removeRootNodes(component, $parent) {\n  component[ROOT_NODES].forEach(node => {\n    if (isComponent(node)) removeRootNodes(node, $parent);\n    else {\n      if (!$parent) $parent = getParent(node);\n      removeChild($parent, node);\n    }\n  });\n  component[ROOT_NODES] = null;\n}\n\nfunction getOrCreateMap(comp, prop) {\n  let m = comp[prop];\n  if (!m) m = comp[prop] = new Map();\n  return m;\n}\n\nexport class Component extends Messenger {\n  /**\n   * compiler will auto transform the `template` getter's return value from String to Render Function.\n   */\n  static get template() {\n    return null;\n  }\n  constructor(attrs) {\n    if (attrs === null || attrs === undefined) {\n      // do nothing.\n    } else if (isFunction(attrs)) {\n      attrs = {\n        [ARG_COMPONENTS]: {\n          [STR_DEFAULT]: attrs\n        }\n      };\n    } else if (isObject(attrs) && !(VM_PARENTS in attrs)) {\n      throw new Error('First argument passed to Component constructor must be ViewModel');\n    }\n    super();\n    this[VM_PARENTS] = VM_EMPTY_PARENTS;\n    this[VM_LISTENERS] = {};\n    this[CONTEXT] = attrs ? attrs[CONTEXT] : null;\n    this[CONTEXT_STATE] = 0;\n    this[ARG_COMPONENTS] = attrs ? (attrs[ARG_COMPONENTS] || null) : null;\n    this[STATE] = STATE_INITIALIZE;\n    /**\n     * ROOT_NODES means root children of this component,\n     *   include html-nodes and component-nodes.\n     * We use this infomation to remove DOM after this component is destroied.\n     * We do not maintain the whole parent-child view-tree but only root children,\n     * because when we remove the root children, whole view-tree will be\n     * removed, so we do not need waste memory to maintain whole view-tree.\n     */\n    this[ROOT_NODES] = [];\n    /**\n     * NON_ROOT_COMPONENT_NODES means nearest non-root component-nodes in the view-tree.\n     * Node in view-tree have two types, html-node and component-node.\n     *   html-node include html dom node and html text node,\n     *   component-node is an instance of a Component.\n     * For example, we have rendered a view-tree:\n     *             RootApp(Component)\n     *             /     |          \\\n     *         h1(Html)  h2(Html)  A(Component)\n     *            |                 |\n     *        C(Component)     D(Component)\n     *\n     * The nearest non-root component-nodes of RootApp include C,\n     *   but not include A(as it's root) or D(as it's not nearest).\n     * \n     * By the way, the ROOT_NODES of view-tree above is [h1, h2, A]\n     */\n    this[NON_ROOT_COMPONENT_NODES] = [];\n    /**\n     * REF_NODES contains all children with ref: attribute.\n     */\n    this[REF_NODES] = null;\n    /**\n     * If some child of this component is passed as argument(ie. \n     * use arg:pass attribute) like ng-tranclude in angular 1.x,\n     * the child may contain some messenger listeners not belong to \n     * this component but belong to outer parent.\n     * \n     * When destroy this component, we should also remove messenger listeners\n     *   belong to outer parent to prevent memory leak.\n     * To implement this goal, we maitain RELATED_VM_LISTENERS.\n     * When render view-tree, any messenger listeners belong to outer\n     * parent, will be also linked under RELATED_VM_LISTENERS, then \n     * when we destroy this component, the listeners can also be clear.\n     * \n     * For examle:\n     * \n     * <!-- outer parent: RootApp -->\n     * <div>\n     * <if expect=\"show\">\n     * <Tooltip>\n     * <argument arg:pass=\"default\">\n     * <p>hello, world. my name is ${name}</p>\n     * </argument>\n     * </Tooltip>\n     * </if>\n     * </div>\n     * \n     * when the `show` variable changed from true to false, the\n     * Tooltip component will be destroy. The messenger listener belong\n     * to the outer parent RootApp which watch `name` variable should \n     * also be removed.\n     */\n    this[RELATED_VM_LISTENERS] = null;\n    /**\n     * Simalary as RELATED_VM_LISTENERS, RELATED_VM_REFS stores\n     *   ref elements of parent component.\n     */\n    this[RELATED_VM_REFS] = null;\n  }\n  [VM_ON](prop, handler, componentCtx) {\n    vmAddListener(this, prop, handler);\n    if (!componentCtx || !isComponent(componentCtx) || componentCtx === this) return;\n    componentCtx[RELATED_VM_ADD](this, prop, handler);\n  }\n  [RELATED_VM_ADD](vm, prop, handler) {\n    const rvl = getOrCreateMap(this, RELATED_VM_LISTENERS);\n    let hook = rvl.get(vm);\n    if (!hook) {\n      hook = [];\n      rvl.set(vm, hook);\n    }\n    hook.push([prop, handler]);\n  }\n  [VM_OFF](prop, handler) {\n    return vmRemoveListener(this, prop, handler);\n  }\n  [VM_CLEAR]() {\n    vmClearListener(this);\n  }\n  [VM_NOTIFY](prop) {\n    return vmNotifyChanged(this, prop);\n  }\n  [CLONE]() {\n    throw new Error('abstract method');\n  }\n  [RENDER]() {\n    let renderFn = this.constructor.template;\n    if (!renderFn && this[ARG_COMPONENTS]) {\n      renderFn = this[ARG_COMPONENTS][STR_DEFAULT];\n    }\n    if (!isFunction(renderFn)) assert_fail();\n    return renderFn(this);\n  }\n  [RENDER_TO_DOM]($targetDOM) {\n    if (!isDOMNode($targetDOM)) assert_fail();\n    if (this[STATE] !== STATE_INITIALIZE) {\n      assert_fail();\n    }\n    replaceChild(getParent($targetDOM), this[RENDER](), $targetDOM);\n    onAfterRender(this);\n  }\n  [DESTROY](removeDOM = true) {\n    if (this[STATE] > STATE_WILLDESTROY) return;\n    this[STATE] = STATE_WILLDESTROY;\n    this.beforeDestroy();\n    super.clear();   // dont forgot call super clear.\n    this[VM_CLEAR](); // dont forgot clear vm listeners\n    destroyRelatedVM(this);\n    this[NON_ROOT_COMPONENT_NODES].forEach(component => {\n      component[DESTROY](false);\n    });\n    this[ROOT_NODES].forEach(node => {\n      if (isComponent(node)) node[DESTROY](false);\n    });\n    this[STATE] = STATE_DESTROIED;\n    this[RELATED_VM_LISTENERS] =\n      this[NON_ROOT_COMPONENT_NODES] =\n      this[REF_NODES] =\n      this[ARG_COMPONENTS] =\n      this[CONTEXT] = null;\n    \n    if (removeDOM) {\n      removeRootNodes(this);\n    }\n  }\n  [UPDATE_IF_NEED]() {\n    if (this[STATE] === STATE_RENDERED) {\n      this[UPDATE]();\n    }\n  }\n  [UPDATE]() {\n    throw new Error('abstract method');\n  }\n  [GET_STATE_NAME]() {\n    return STATE_NAMES[this[STATE]];\n  }\n  setContext(id, ctx, forceOverride = false) {\n    if (this[CONTEXT_STATE] < 0) {\n      throw new Error('Can\\'t setContext after component has been rendered. Try put setContext code into constructor.');\n    }\n    if (this[CONTEXT_STATE] === 0) {\n      // we copy context to make sure child component do not modify context passed from parent.\n      // we do not copy it by default until setContext function is called, because it unnecessary to waste memory if\n      // child component do not modify the context.\n      if (!this[CONTEXT]) {\n        this[CONTEXT] = {};\n      } else {\n        this[CONTEXT] = copyContext(this[CONTEXT]);\n      }\n      this[CONTEXT_STATE] = 1; // has been copied.\n    }\n    if (id in this[CONTEXT]) {\n      // override exist may case hidden bug hard to debug.\n      // so we force programmer to pass third argument to \n      //   tell us he/she know what he/she is doing.\n      if (!forceOverride) throw new Error(`Contenxt with id: ${id} is exist. Pass third argument forceOverride=true to override it.`);\n    }\n    this[CONTEXT][id] = ctx;\n  }\n  getContext(id) {\n    return this[CONTEXT] ? this[CONTEXT][id] : null;\n  }\n  [SET_REF_NODE](ref, el, relatedComponent) {\n    const rns = getOrCreateMap(this, REF_NODES);\n    if (rns.has(ref)) {\n      throw new Error(`ref name '${ref}' of component '${this.constructor.name}' is dulplicated.`);\n    }\n    const rvrs = getOrCreateMap(relatedComponent, RELATED_VM_REFS);\n    let rs = rvrs.get(this);\n    if (!rs) {\n      rs = [];\n      rvrs.set(this, rs);\n    }\n    rs.push(ref);\n    rns[ref] = el;\n  }\n  getChild(ref) {\n    if (this[STATE] !== STATE_RENDERED) {\n      console.error(`Warning: call getChild before component '${this.constructor.name}' is rendered will get nothing, try put getChild into afterRender lifecycle hook.`);\n    }\n    return this[REF_NODES] ? this[REF_NODES][ref] : null;\n  }\n  afterRender() {\n    // life time hook\n  }\n  beforeDestroy() {\n    // life time hook\n  }\n}\n\nexport function destroyRelatedVM(comp) {\n  function _destroy(prop, cb) {\n    const m = comp[prop];\n    if (!m) return;\n    m.forEach((arr, ctx) => {\n      arr.forEach(k => cb(ctx, k));\n      arr.length = 0;\n    });\n    m.clear();\n  }\n  _destroy(RELATED_VM_LISTENERS, (ctx, hook) => {\n    ctx[VM_OFF](hook[0], hook[1]);\n  });\n  _destroy(RELATED_VM_REFS, (ctx, ref) => {\n    // const rn = ctx[REF_NODES];\n    // if (rn) debugger;\n    // rn.delete(ref);\n    // debugger;\n    ctx[REF_NODES].delete(ref);\n  });\n}\n\nexport function isComponent(c) {\n  return instanceOf(c, Component);\n}\n\nexport function assertRenderResults(renderResults) {\n  if (!isArray(renderResults) || renderResults.length === 0) {\n    throw new Error('Render results of component is empty');\n  }\n  return renderResults;\n}\n\nexport function getFirstHtmlDOM(el) {\n  const ns = el[ROOT_NODES];\n  if (!ns || ns.length === 0) assert_fail();\n  if (isComponent(ns[0])) return getFirstHtmlDOM(ns[0]);\n  else return ns[0];\n}","\nimport {\n  VM_ON as VM_ON_addc9e13d4\n} from '/Users/geyuhang/jinge/jinge-framework/src/viewmodel/notify';\nimport {\n  wrapComponent as wrapComponent_addc9e13d4\n} from '/Users/geyuhang/jinge/jinge-framework/src/viewmodel/proxy';\n\nimport {\n  Component,\n  RENDER,\n  ROOT_NODES,\n  ARG_COMPONENTS,\n  UPDATE_IF_NEED,\n  UPDATE,\n  DESTROY,\n  isComponent,\n  getFirstHtmlDOM\n} from '../core/component';\nimport {\n  isArray,\n  Symbol,\n  STR_DEFAULT,\n  isObject,\n  assert_fail,\n  STR_EMPTY\n} from '../util';\nimport {\n  createComment,\n  createFragment,\n  appendChild,\n  getParent,\n  insertBefore,\n  removeChild\n} from '../dom';\nimport {\n  VM_PARENTS\n} from '../viewmodel/common';\n\nexport const FOR_LENGTH = Symbol('length');\nexport const FOR_KEYS = Symbol('keys');\nexport const FOR_KEY_NAME = Symbol('key');\n\nconst KEY_INDEX = 'index';\nconst KEY_EACH = 'each';\nconst EMP_ARR = [];\n// let DEBUG_INC = 0;\n\nexport class ForEachComponent extends Component {\n  constructor(renderFn, item, index) {\n    super(renderFn);\n    const vm_addc9e13d4 = wrapComponent_addc9e13d4(this);\n    vm_addc9e13d4.each = item;\n    vm_addc9e13d4.index = index;\n    return vm_addc9e13d4;\n  }\n  [RENDER]() {\n    const renderFn = this[ARG_COMPONENTS][STR_DEFAULT];\n    if (!renderFn) assert_fail();\n    return renderFn(this);\n  }\n}\n\n\nfunction appendRenderEach(item, i, itemRenderFn, roots) {\n  const el = new ForEachComponent(itemRenderFn, item, i);\n  roots.push(el);\n  return el[RENDER]();\n}\n\nfunction assert_vm(item, i) {\n  if (item !== null && isObject(item) && !(VM_PARENTS in item)) {\n    throw new Error(`<for>: array item [${i}] must be ViewModel.`);\n  }\n}\n\nfunction prepare_key(item, i, keyMap, keyName) {\n  const key = keyName === KEY_EACH ? item : keyName(item);\n  if (keyMap.has(key)) {\n    console.error(`<for>: array item [${i}] and [${keyMap.get(key)}] both have key '${key}', dulplicated key may cause update error.`);\n  }\n  keyMap.set(key, i);\n  return key;\n}\nfunction renderItems(items, itemRenderFn, roots, keys, keyName) {\n  const result = [];\n  const tmpKeyMap = new Map();\n  items.forEach((item, i) => {\n    assert_vm(item, i);\n    if (keyName !== KEY_INDEX) {\n      keys.push(prepare_key(item, i, tmpKeyMap, keyName));  \n    }\n    result.push(...appendRenderEach(item, i, itemRenderFn, roots));\n  });\n  return result;\n}\nfunction loopAppend($parent, el) {\n  el[ROOT_NODES].forEach(node => {\n    if (isComponent(node)) {\n      loopAppend($parent, node);\n    } else {\n      appendChild($parent, node);\n    }\n  });\n}\nexport class ForComponent extends Component {\n  constructor(attrs) {\n    const kn = attrs._key;\n    if (!kn)\n      throw new Error('<for>: require \"_key\" attribute.');\n    if (!kn || !/^(index|each(.[\\w\\d$_]+)*)$/.test(kn)) {\n      throw new Error('<for>: bad \"_key\" attribute value. See https://[todo]');\n    }\n    super(attrs);\n    const vm_addc9e13d4 = wrapComponent_addc9e13d4(this);\n    const fn_addc9e13d4_4 = () => {\n      vm_addc9e13d4.loop = attrs.loop;\n    };\n    fn_addc9e13d4_4();\n    attrs[VM_ON_addc9e13d4]('loop', fn_addc9e13d4_4);\n    vm_addc9e13d4[FOR_KEY_NAME] = attrs._key;\n    vm_addc9e13d4[FOR_LENGTH] = 0;\n    vm_addc9e13d4[FOR_KEYS] = null;\n    if (kn !== KEY_INDEX && kn !== KEY_EACH) {\n      vm_addc9e13d4[FOR_KEY_NAME] = new Function(KEY_EACH, `return ${ kn }`);\n    }\n    return vm_addc9e13d4;\n  }\n  get loop() {\n    return this._l;\n  }\n  set loop(v) {\n    this._l = v;\n    this[UPDATE_IF_NEED]();\n  }\n  [RENDER]() {\n    const roots = this[ROOT_NODES];\n    const itemRenderFn = this[ARG_COMPONENTS] ? this[ARG_COMPONENTS][STR_DEFAULT] : null;\n    if (!itemRenderFn) {\n      roots.push(createComment(STR_EMPTY));\n      return roots;\n    }\n    const items = this.loop;\n    const keyName = this[FOR_KEY_NAME];\n    if (keyName !== KEY_INDEX) this[FOR_KEYS] = [];\n    if (!isArray(items) || items.length === 0) {\n      roots.push(createComment(STR_EMPTY));\n      return roots;\n    }\n    this[FOR_LENGTH] = items.length;\n    return renderItems(items, itemRenderFn, roots, this[FOR_KEYS], keyName);\n  }\n  [UPDATE]() {\n    const itemRenderFn = this[ARG_COMPONENTS] ? this[ARG_COMPONENTS][STR_DEFAULT] : null;\n    if (!itemRenderFn) return;\n\n    const newItems = Array.isArray(this.loop) ? this.loop : EMP_ARR;\n    const roots = this[ROOT_NODES];\n    const nl = newItems.length;\n    const ol = this[FOR_LENGTH];\n    // nothing changed, return directly.\n    if (nl === 0 && ol === 0) return;\n\n    const keyName = this[FOR_KEY_NAME];\n    // if new length equal 0, clear & render comment.\n    if (nl === 0 && ol > 0) {\n      const fd = getFirstHtmlDOM(roots[0]);\n      const $cmt = createComment(STR_EMPTY);\n      insertBefore(getParent(fd), $cmt, fd);\n      for(let i = 0; i < ol; i++) {\n        roots[i][DESTROY]();\n      }\n      roots.length = 1;\n      roots[0] = $cmt;\n      if (keyName !== KEY_INDEX) {\n        this[FOR_KEYS].length = 0;\n      }\n      this[FOR_LENGTH] = 0;\n      return;\n    }\n\n    this[FOR_LENGTH] = nl;\n    const $parent = getParent(ol === 0 ? roots[0] : getFirstHtmlDOM(roots[0]));\n    if (ol === 0) {\n      removeChild($parent, roots[0]);\n      roots.length = 0;\n    }\n\n    if (keyName === KEY_INDEX) {\n      let $f = null;\n      for(let i = 0; i < nl; i++) {\n        if (i < ol) {\n          const el = roots[i];\n          if (newItems[i] !== el.each) {\n            el.each = newItems[i];\n          }\n        } else {\n          if (!$f) $f = createFragment();\n          appendChild($f, ...appendRenderEach(newItems[i], i, itemRenderFn, roots));\n        }\n      }\n      if ($f) {\n        appendChild($parent, $f);\n      }\n      if (nl >= ol) return;\n      for(let i = nl; i < ol; i++) {\n        roots[i][DESTROY]();\n      }\n      roots.splice(nl);\n      return;\n    }\n\n    const oldKeys = this[FOR_KEYS];\n    if (ol === 0) {\n      const rs = renderItems(newItems, itemRenderFn, roots, oldKeys, keyName);\n      appendChild($parent, createFragment(rs));\n      return;\n    }\n\n    const oldKeyMap = new Map();\n    oldKeys.forEach((k, i) => {\n      oldKeyMap.set(k, i);\n    });\n    const newKeys = [];\n    const newKeyMap = new Map();\n    newItems.forEach((item, i) => {\n      assert_vm(item, i);\n      newKeys.push(prepare_key(item, i, newKeyMap, keyName));\n    });\n    \n    let oi = 0;\n    let ni = 0;\n    const newRoots = [];\n    const oldTags = new Uint8Array(ol);\n    while(oi < ol || ni < nl) {\n      while(oi < ol) {\n        if (oldTags[oi] !== 0) {\n          oi++;\n        } else if (newKeyMap.has(oldKeys[oi]) && newKeyMap.get(oldKeys[oi]) >= ni) {\n          break;\n        } else {\n          roots[oi][DESTROY]();\n          oi++;\n        }\n      }\n      if (oi >= ol) {\n        let $f = null;\n        for(; ni < nl; ni++) {\n          const el = new ForEachComponent(itemRenderFn, newItems[ni], ni);\n          if (!$f) $f = createFragment();\n          appendChild($f, ...el[RENDER]());\n          newRoots.push(el);\n        }\n        if ($f) appendChild($parent, $f);\n        break;\n      }\n      const oldKey = oldKeys[oi];\n      let $f = null;\n      while(ni < nl) {\n        const newKey = newKeys[ni];\n        if (newKey === oldKey) break;\n        \n        let reuseEl = null;\n        if (oldKeyMap.has(newKey)) {\n          const oldIdx = oldKeyMap.get(newKey);\n          if (oldIdx > oi && oldTags[oldIdx] === 0) {\n            reuseEl = roots[oldIdx];\n            oldTags[oldIdx] = 1;\n          } \n        }\n        if (!$f) $f = createFragment();\n        if (!reuseEl) {\n          reuseEl = new ForEachComponent(itemRenderFn, newItems[ni], ni);\n          appendChild($f, ...reuseEl[RENDER]());\n        } else {\n          loopAppend($f, reuseEl);\n          if (reuseEl.index !== ni) reuseEl.index = ni;\n          if (reuseEl.each !== newItems[ni]) reuseEl.each = newItems[ni];\n        }\n        newRoots.push(reuseEl);\n        ni++;\n      }\n      if (ni >= nl) {\n        assert_fail('unimpossible?!');\n      }\n      const el = roots[oi];\n      $f && insertBefore($parent, $f, getFirstHtmlDOM(el));\n      if (el.index !== ni) el.index = ni;\n      if (el.each !== newItems[ni]) el.each = newItems[ni];\n      newRoots.push(el);\n      oi++;\n      ni++;\n    }\n    this[ROOT_NODES] = newRoots;\n    this[FOR_KEYS] = newKeys;\n\n  }\n}","\nimport {\n  VM_ON as VM_ON_addc9e13d4\n} from '/Users/geyuhang/jinge/jinge-framework/src/viewmodel/notify';\nimport {\n  wrapComponent as wrapComponent_addc9e13d4\n} from '/Users/geyuhang/jinge/jinge-framework/src/viewmodel/proxy';\n\nimport {\n  Component,\n  RENDER,\n  DESTROY,\n  ARG_COMPONENTS,\n  UPDATE_IF_NEED,\n  UPDATE,\n  ROOT_NODES,\n  onAfterRender,\n  isComponent,\n  getFirstHtmlDOM\n} from '../core/component';\nimport {\n  createComment,\n  getParent,\n  removeChild,\n  insertBefore\n} from '../dom';\nimport {\n  STR_DEFAULT,\n  STR_EMPTY\n} from '../util';\n\n\nfunction getRenderFn(acs, value) {\n  return acs ? ((value in acs) ? acs[value] : acs[STR_DEFAULT]) : null;\n}\n\nexport function renderSwitch(acs, roots, value) {\n  const renderFn = getRenderFn(acs, value);\n  if (!renderFn) {\n    roots.push(createComment(STR_EMPTY));\n    return roots;\n  }\n  const el = new Component(renderFn);\n  roots.push(el);\n  return el[RENDER]();\n}\n\n\nexport function updateSwitch(acs, roots, value) {\n  const renderFn = getRenderFn(acs, value);\n  if (!renderFn) {\n    const el = roots[0];\n    if (isComponent(el)) {\n      const fd = getFirstHtmlDOM(el);\n      const pa = getParent(fd);\n      const $cmt = createComment(STR_EMPTY);\n      roots[0] = $cmt;\n      insertBefore(\n        pa,\n        $cmt,\n        fd\n      );\n      el[DESTROY]();\n    }\n    return;\n  }\n\n  const el = roots[0];\n  let fd, pa;\n  const isC = isComponent(el);\n  if (isC) {\n    fd = getFirstHtmlDOM(el);\n    pa = getParent(fd);\n  } else {\n    fd = el;\n    pa = getParent(el);\n  }\n  const ne = new Component(renderFn);\n  roots[0] = ne;\n  insertBefore(\n    pa,\n    ne[RENDER](),\n    fd\n  );\n  if (isC) {\n    el[DESTROY]();\n  } else {\n    removeChild(pa, fd);\n  }\n  onAfterRender(ne);\n}\n\nexport class IfComponent extends Component {\n  constructor(attrs) {\n    super(attrs);\n    const vm_addc9e13d4 = wrapComponent_addc9e13d4(this);\n    const fn_addc9e13d4_1 = () => {\n      vm_addc9e13d4.expect = !!attrs.expect;\n    };\n    fn_addc9e13d4_1();\n    attrs[VM_ON_addc9e13d4]('expect', fn_addc9e13d4_1);\n    return vm_addc9e13d4;\n  }\n  get expect() {\n    return this._e;\n  }\n  set expect(v) {\n    if (this._e === v) return;\n    this._e = v;\n    this[UPDATE_IF_NEED]();\n  }\n  [RENDER]() {\n    const acs = this[ARG_COMPONENTS];\n    if (acs) {\n      acs[false] = acs['else'];\n    }\n    return renderSwitch(acs, this[ROOT_NODES], this.expect);\n  }\n  [UPDATE]() {\n    updateSwitch(this[ARG_COMPONENTS], this[ROOT_NODES], this.expect);\n  }\n}","import {\n  createTextNode as createTextNode_0b9aa088, createComment as createComment_0b9aa088, createElement as createElement_0b9aa088, createElementWithoutAttrs as createElementWithoutAttrs_0b9aa088, createFragment as createFragment_0b9aa088, appendText as appendText_0b9aa088, appendChild as appendChild_0b9aa088, setText as setText_0b9aa088, setAttribute as setAttribute_0b9aa088, setInputValue as setInputValue_0b9aa088, addEvent as addEvent_0b9aa088\n} from 'jinge/src/dom';\nimport {\n  VM_ON as VM_ON_0b9aa088, VM_NOTIFY as VM_NOTIFY_0b9aa088\n} from 'jinge/src/viewmodel/notify';\nimport {\n  assertRenderResults as assertRenderResults_0b9aa088, SET_REF_NODE as SET_REF_NODE_0b9aa088, CONTEXT as CONTEXT_0b9aa088, NON_ROOT_COMPONENT_NODES as NON_ROOT_COMPONENT_NODES_0b9aa088, ROOT_NODES as ROOT_NODES_0b9aa088, ARG_COMPONENTS as ARG_COMPONENTS_0b9aa088, RENDER as RENDER_0b9aa088\n} from 'jinge/src/core/component';\nimport {\n  wrapViewModel as wrapViewModel_0b9aa088\n} from 'jinge/src/viewmodel/proxy';\nimport {\n  STR_EMPTY as STR_EMPTY_0b9aa088, STR_DEFAULT as STR_DEFAULT_0b9aa088\n} from 'jinge/src/util';\n\nimport {\n  IfComponent as IfComponent_f462087e, ForComponent as ForComponent_f462087e, SwitchComponent as SwitchComponent_f462087e, Component as Component_f462087e\n} from 'jinge';\n\nexport default function(component) {\n  const vm_0 = component;\n  return [\n  (() => {\n    const el = createElementWithoutAttrs_0b9aa088(\n      \"span\",\n      \"\\n  Hello, Everyone!\\n  My name is \",\n      (() => {\n        const el = createTextNode_0b9aa088('');\n        const fn = () => setText_0b9aa088(el, vm_0.name);\n        vm_0[VM_ON_0b9aa088](\"name\", fn, component);\n        fn();\n        return el;\n      })(),\n      \"!\\n\"\n    );\n    vm_0[SET_REF_NODE_0b9aa088]('someId', el, component)\n    component[ROOT_NODES_0b9aa088].push(el);\n    return el;\n  })()\n  ];\n}","\nimport {\n  VM_ON as VM_ON_addc9e13d4\n} from 'jinge/src/viewmodel/notify';\nimport {\n  wrapComponent as wrapComponent_addc9e13d4\n} from 'jinge/src/viewmodel/proxy';\n\nimport {\n  Component\n} from 'jinge';\n\nimport _tpl from './boy.html';\n\nexport default class Boy extends Component {\n  constructor(attrs) {\n    super(attrs);\n    if (attrs !== null && typeof attrs === 'object') {\n      const props = Object.keys(attrs);\n      props.forEach(p => this[p] = attrs[p]);\n\n      const vm_addc9e13d4 = wrapComponent_addc9e13d4(this);\n      props.filter(k => /^[a-zA-Z]/.test(k)).forEach(k => {\n        attrs[VM_ON_addc9e13d4](k, () => vm_addc9e13d4[k] = attrs[k]);\n      });\n      return vm_addc9e13d4;\n    } else {\n      return wrapComponent_addc9e13d4(this);      \n    }\n  }\n  static get template() {\n    return _tpl;\n  }\n  someApi() {\n    alert(`Hello, everyone. My name is ${this.name}`);\n    this.notify('someApiCalled', this.name);\n  }\n  afterRender() {\n    console.log('after render');\n    /**\n     * you can use this.getChild to get DOM node.\n     */\n    console.log(this.getChild('someId'));\n  }\n  beforeDestroy() {\n    console.log('before destroy');\n  }\n}","import {\n  createTextNode as createTextNode_0b9aa088, createComment as createComment_0b9aa088, createElement as createElement_0b9aa088, createElementWithoutAttrs as createElementWithoutAttrs_0b9aa088, createFragment as createFragment_0b9aa088, appendText as appendText_0b9aa088, appendChild as appendChild_0b9aa088, setText as setText_0b9aa088, setAttribute as setAttribute_0b9aa088, setInputValue as setInputValue_0b9aa088, addEvent as addEvent_0b9aa088\n} from 'jinge/src/dom';\nimport {\n  VM_ON as VM_ON_0b9aa088, VM_NOTIFY as VM_NOTIFY_0b9aa088\n} from 'jinge/src/viewmodel/notify';\nimport {\n  assertRenderResults as assertRenderResults_0b9aa088, SET_REF_NODE as SET_REF_NODE_0b9aa088, CONTEXT as CONTEXT_0b9aa088, NON_ROOT_COMPONENT_NODES as NON_ROOT_COMPONENT_NODES_0b9aa088, ROOT_NODES as ROOT_NODES_0b9aa088, ARG_COMPONENTS as ARG_COMPONENTS_0b9aa088, RENDER as RENDER_0b9aa088\n} from 'jinge/src/core/component';\nimport {\n  wrapViewModel as wrapViewModel_0b9aa088\n} from 'jinge/src/viewmodel/proxy';\nimport {\n  STR_EMPTY as STR_EMPTY_0b9aa088, STR_DEFAULT as STR_DEFAULT_0b9aa088\n} from 'jinge/src/util';\n\nimport {\n  IfComponent as IfComponent_f462087e, ForComponent as ForComponent_f462087e, SwitchComponent as SwitchComponent_f462087e, Component as Component_f462087e\n} from 'jinge';\nimport Boy from './boy';\nexport default function(component) {\n  const vm_0 = component;\n  return [\n  (() => {\n    const el = createElementWithoutAttrs_0b9aa088(\n      \"h2\",\n      \"Lifecycle demo\"\n    );\n    component[ROOT_NODES_0b9aa088].push(el);\n    return el;\n  })(),\n  (() => {\n    const el = createElementWithoutAttrs_0b9aa088(\n      \"p\",\n      \"\\n  Each component have two lifecycle hooks,\\n  afterRender and beforeDestroy.\\n\"\n    );\n    component[ROOT_NODES_0b9aa088].push(el);\n    return el;\n  })(),\n  (() => {\n    const el = createElementWithoutAttrs_0b9aa088(\n      \"p\",\n      ...(() => {\n        const attrs = wrapViewModel_0b9aa088({\n          [CONTEXT_0b9aa088]: component[CONTEXT_0b9aa088],\n          expect: null,\n          [ARG_COMPONENTS_0b9aa088]: {\n            [STR_DEFAULT_0b9aa088]: function(component) {\n              return [\n              ...(() => {\n                const attrs = wrapViewModel_0b9aa088({\n                  [CONTEXT_0b9aa088]: component[CONTEXT_0b9aa088],\n                  name: null\n                }, true);\n                const fn_0 = () => attrs.name = '' + (vm_0.name) + \"_\" + (vm_0.inc);\n                vm_0[VM_ON_0b9aa088](\"name\", fn_0, component);\n                vm_0[VM_ON_0b9aa088](\"inc\", fn_0, component);\n                fn_0();\n                const el = new Boy(attrs);\n                el.on('someApiCalled', function(...args) {vm_0.onBoyApiCalled(...args)})\n                vm_0[SET_REF_NODE_0b9aa088]('boy', el, component)\n                component[ROOT_NODES_0b9aa088].push(el);\n                return assertRenderResults_0b9aa088(el[RENDER_0b9aa088](component));\n              })()\n              ];\n            }\n          }\n        }, true);\n        const fn_0 = () => attrs.expect = vm_0.showBoy;\n        vm_0[VM_ON_0b9aa088](\"showBoy\", fn_0, component);\n        fn_0();\n        const el = new IfComponent_f462087e(attrs);\n        component[NON_ROOT_COMPONENT_NODES_0b9aa088].push(el);\n        return assertRenderResults_0b9aa088(el[RENDER_0b9aa088](component));\n      })()\n    );\n    component[ROOT_NODES_0b9aa088].push(el);\n    return el;\n  })(),\n  (() => {\n    const el = createElementWithoutAttrs_0b9aa088(\n      \"p\",\n      (() => {\n        const el = createElementWithoutAttrs_0b9aa088(\n          \"button\",\n          (() => {\n            const el = createTextNode_0b9aa088('');\n            const fn = () => setText_0b9aa088(el, vm_0.showBoy ? 'Hide' : 'Show');\n            vm_0[VM_ON_0b9aa088](\"showBoy\", fn, component);\n            fn();\n            return el;\n          })(),\n          \" Boy\"\n        );\n        addEvent_0b9aa088(el, 'click', function(...args) {vm_0.showBoy = !vm_0.showBoy;vm_0.inc++;vm_0.log(args[0])})\n        return el;\n      })(),\n      ...(() => {\n        const attrs = wrapViewModel_0b9aa088({\n          [CONTEXT_0b9aa088]: component[CONTEXT_0b9aa088],\n          expect: null,\n          [ARG_COMPONENTS_0b9aa088]: {\n            [STR_DEFAULT_0b9aa088]: function(component) {\n              return [\n              (() => {\n                const el = createElementWithoutAttrs_0b9aa088(\n                  \"button\",\n                  \"Call Api\"\n                );\n                addEvent_0b9aa088(el, 'click', function(...args) {vm_0.callApi(...args)})\n                component[ROOT_NODES_0b9aa088].push(el);\n                return el;\n              })()\n              ];\n            }\n          }\n        }, true);\n        const fn_0 = () => attrs.expect = vm_0.showBoy;\n        vm_0[VM_ON_0b9aa088](\"showBoy\", fn_0, component);\n        fn_0();\n        const el = new IfComponent_f462087e(attrs);\n        component[NON_ROOT_COMPONENT_NODES_0b9aa088].push(el);\n        return assertRenderResults_0b9aa088(el[RENDER_0b9aa088](component));\n      })()\n    );\n    component[ROOT_NODES_0b9aa088].push(el);\n    return el;\n  })()\n  ];\n}","import {\n  RENDER_TO_DOM,\n  isComponent\n} from './component';\nimport { assert_fail } from '../util';\n\nexport function bootstrap(Component, dom) {\n  if (dom === document.body) {\n    throw new Error('bootstrap dom cannot be document.body');\n  }\n  const bootComponent = new Component();\n  if (!isComponent(bootComponent)) assert_fail();\n  bootComponent[RENDER_TO_DOM](dom);\n}\n","\nimport {\n  VM_ON as VM_ON_addc9e13d4\n} from 'jinge/src/viewmodel/notify';\nimport {\n  wrapComponent as wrapComponent_addc9e13d4\n} from 'jinge/src/viewmodel/proxy';\n\nimport {\n  Component,\n  bootstrap\n} from 'jinge';\n\nimport _tpl from './app.html';\n\nclass App extends Component {\n  static get template() {\n    return _tpl;\n  }\n  constructor(args) {\n    super(args);\n    const vm_addc9e13d4 = wrapComponent_addc9e13d4(this);\n    vm_addc9e13d4.showBoy = true;\n    vm_addc9e13d4.inc = 0;\n    vm_addc9e13d4.name = 'Jinge';\n    return vm_addc9e13d4;\n  }\n  afterRender() {\n    /**\n     * if Component node have ref: attribute,\n     * the component instance can be directly got by this.getChild.\n     * After got component instance, it's api can be directly called.\n     */\n    this.callApi();\n  }\n  log(...args) {\n    console.log(...args);\n  }\n  callApi($evt) {\n    console.log($evt);\n    const boy = this.getChild('boy');\n    boy.someApi();\n  }\n  onBoyApiCalled(name) {\n    console.log('boy', name, 'send message: someApiCalled');\n  }\n}\n\nbootstrap(App, document.getElementById('root-app'));\n"],"sourceRoot":""}