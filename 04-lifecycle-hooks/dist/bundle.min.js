!function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=0)}([function(t,n,e){"use strict";function r(t){return typeof t}function o(t){return"object"===r(t)}function i(t){return"string"===r(t)}function s(t){return Array.isArray(t)}function c(t){return"function"===r(t)}function u(t,n){return t instanceof n}function l(t,n){return t.indexOf(n)}function f(t){return window.Symbol(t)}function h(t){throw t&&console.error(t),new Error("assert failed!")}function a(t,n,e=0){return t.startsWith(n,e)}e.r(n);const p="default",d="empty";const m=f(),g=f(),y=f(),w=f(),b=f(),E=f(),x=f(),v=f();function C(t,n,e=0,r=!1){const o=n.length-1;if(o<0)return null;const i=""+n[e];if(a(i,"_"))return console.error('WARN: property name startsWith char "_" is private/once-used property, ignored get/set listener.'),null;let s=t[i];if(!s){if(!r)return null;s=t[i]=Object.create(null),Object.assign(s,{[E]:null,[x]:[],[v]:Object.create(null)})}return o===e?s:C(s[v],n,e+1,r)}function j(t,n,e){const r=s(n)?n:n.split(".");if(0===r.length)return;const o=C(t[b],r,0,!0);var i,c;l(i=o[x],c=e)>=0||i.push(c)}function A(t,n,e){const r=s(n)?n:n.split(".");if(0===r.length)return;const o=C(t[b],r,0,!1);o&&(e?function(t,n){const e=l(t,n);e<0||t.splice(e,1)}(o[x],e):o[x].length=0)}function B(t){!function(t){for(const n in t){const e=t[n];if(!(E in e))return;e[E]&&(_(e[E]),e[E]=null),e[x].length=0,B(e[v]),e[v]=null,t[n]=null}}(t[b])}const O=window.setImmediate||window.setTimeout,_=window.clearImmediate||window.clearTimeout;function M(t,n){const e=s(n)?n:n.split(".");if(0===e.length)return;const r=C(t[b],e,0,!1);r&&function t(n){n[E]&&(_(n[E]),n[E]=null),n[x].length>0&&(n[E]=O(()=>{n[E]=null,n[x].forEach(t=>t())}));const e=n[v];for(const n in e)t(e[n])}(r)}const R=f(),N=[];function P(t){return null!==t&&o(t)&&R in t}function k(t,n,e){const r=t[R];for(let t=0;t<r.length;t++)if(r[t][0]===n&&r[t][1]===e)return;r.push([n,e])}function S(t,n,e){const r=t[R];for(let t=0;t<r.length;t++)if(r[t][0]===n&&r[t][1]===e)return void r.splice(t,1)}function T(t,n){m in t&&t[m](n),t[R].forEach(t=>{const[e,r]=t;T(e,s(n)?[r,...n]:[r,n])})}function D(t,n,e){if(!i(o=n)||a(o,"_"))return t[n]=e,!0;var o;const s=r(e),c=P(e);if(null!==e&&"object"===s&&!c)throw new Error("public property of ViewModel target must also be ViewModel");const u=t[n];return P(u)&&S(u,t,n),t[n]=e,c&&k(e,t,n),T(t,n),!0}const I={set:D},$={push:2,pop:2,shift:2,unshift:2,splice:3,reverse:2,sort:2,fill:2,slice:1,concat:1,map:1},W={get(t,n){if(n in $){const e=$[n],r=t[n];return function(...n){const o=r.call(t,...n);return(2&e)>0&&t[R].forEach(t=>T(t[0],t[1])),(1&e)>0&&s(o)&&!(R in o)?V(o):o}}return t[n]},set:function(t,n,e){return"length"===n?function(t,n){if("number"!==r(e=n)||Number.isNaN(e)||!Number.isFinite(e))throw new Error("bad argument. array length must be validate number.");var e;const o=t.length;if(o>n)for(let e=n;e<o;e++){const n=t[e];P(n)&&S(n,t,e)}return t.length=n,o!==n&&t[R].forEach(t=>T(t[0],t[1])),!0}(t,e):D(t,n,e)}};function F(t,n){const e=t[n];null===e||"object"!==r(e)||R in e||(u(e,Boolean)||u(e,RegExp)?e[R]=N:(t[n]=V(e),k(e,t,n)))}function H(t,n,e){return t[R]=[],e&&function(t){b in t||(t[b]={},t[g]=((n,e)=>j(t,n,e)),t[y]=((n,e)=>A(t,n,e)),t[m]=(n=>M(t,n)),t[w]=(()=>B(t)))}(t),new Proxy(t,n?W:I)}function V(t,n=!1){if(null===t)return t;if("object"!==r(t))return t;if(R in t)return t;if(!u(t,Boolean)&&!u(t,RegExp)){if(s(t)){for(let n=0;n<t.length;n++)F(t,n);return H(t,!0,n)}for(const n in t)F(t,n);return H(t,!1,n)}t[R]=N}function z(t){return new Proxy(t,I)}const L=f();class J{constructor(){this[L]=null}notify(t,...n){!function(t,n,...e){if(!t)return;const r=t.get(n);r&&r.forEach(t=>t(...e))}(this[L],t,...n)}on(t,n){const e=this;e[L]||(e[L]=new Map),function(t,n,e){let r=t.get(n);r||(r=[],t.set(n,r)),r.indexOf(e)<0&&r.push(e)}(e[L],t,n)}off(t,n){!function(t,n,e){if(!t)return;if(!n)return t.forEach(t=>t.length=0),void t.clear();const r=t.get(n);if(!r)return;if(!e)return void(r.length=0);const o=r.indexOf(e);o<0||r.splice(o,1)}(this[L],t,n)}clear(t){var n,e;n=this[L],e=t,n&&(e?n.delete(e):n.clear())}}function Z(t){return t.parentNode}function q(t,n){t.textContent=n}function G(t,n,...e){const r=document.createElement(t);if(n)for(const t in n)o=r,i=t,s=n[t],o.setAttribute(i,s);var o,i,s;return e.forEach(t=>et(r,t)),r}function K(t,...n){return G(t,null,...n)}function Q(t){const n=document.createDocumentFragment();return t&&t.forEach(t=>et(n,t)),n}function U(t){return document.createTextNode(t)}function X(t){return document.createComment(t)}function Y(t){return s(t)?0===t.length?null:1===t.length?t[0]:Q(t):t}function tt(t,n,e){(n=Y(n))&&t.insertBefore(n,e)}function nt(t,n){t.removeChild(n)}function et(t,...n){n.forEach(n=>{if(s(n))return n.forEach(n=>et(t,n));i(n)&&(n=U(n)),t.appendChild(n)})}function rt(t,n,e,r=!1){t.addEventListener(n,e,r)}f();const ot=f(),it=f(),st=f(),ct=f(),ut=f(),lt=f(),ft=f(),ht=f(),at=f(),pt=f(),dt=f(),mt=f(),gt=f(),yt=f(),wt=f(),bt=f(),Et=f(),xt=f(),vt=0,Ct=1,jt=2,At=4,Bt=["initialize","rendered","willdestroy","destroied"];function Ot(t){Rt(t)&&(t[ht].forEach(Ot),t[at].forEach(Ot),t[xt]=Ct,t[ft]=-1,t.afterRender())}function _t(t,n){let e=t[n];return e||(e=t[n]=new Map),e}class Mt extends J{static get template(){return null}constructor(t){if(null==t);else if(c(t))t={[st]:{[p]:t}};else if(o(t)&&!(R in t))throw new Error("First argument passed to Component constructor must be ViewModel");super(),this[R]=N,this[b]={},this[lt]=t?t[lt]:null,this[ft]=0,this[st]=t&&t[st]||null,this[xt]=vt,this[ht]=[],this[at]=[],this[pt]=null,this[gt]=null,this[mt]=null}[g](t,n,e){j(this,t,n),e&&Rt(e)&&e!==this&&e[yt](this,t,n)}[yt](t,n,e){const r=_t(this,gt);let o=r.get(t);o||(o=[],r.set(t,o)),o.push([n,e])}[y](t,n){return A(this,t,n)}[w](){B(this)}[m](t){return M(this,t)}[ct](){throw new Error("abstract method")}[ot](){let t=this.constructor.template;return!t&&this[st]&&(t=this[st][p]),c(t)||h(),t(this)}[it](t){var n,e,r;u(t,Node)||h(),this[xt]!==vt&&h(),n=Z(t),e=this[ot](),r=t,(e=Y(e))&&n.replaceChild(e,r),Ot(this)}[ut](t=!0){this[xt]>jt||(this[xt]=jt,this.beforeDestroy(),super.clear(),this[w](),function(t){function n(n,e){const r=t[n];r&&(r.forEach((t,n)=>{t.forEach(t=>e(n,t)),t.length=0}),r.clear())}n(gt,(t,n)=>{t[y](n[0],n[1])}),n(mt,(t,n)=>{t[pt].delete(n)})}(this),this[at].forEach(t=>{t[ut](!1)}),this[ht].forEach(t=>{Rt(t)&&t[ut](!1)}),this[xt]=At,this[gt]=this[at]=this[pt]=this[st]=this[lt]=null,t&&function t(n,e){n[ht].forEach(n=>{Rt(n)?t(n,e):(e||(e=Z(n)),nt(e,n))}),n[ht]=null}(this))}[Et](){this[xt]===Ct&&this[bt]()}[bt](){throw new Error("abstract method")}[wt](){return Bt[this[xt]]}setContext(t,n,e=!1){if(this[ft]<0)throw new Error("Can't setContext after component has been rendered. Try put setContext code into constructor.");var r;if(0===this[ft]&&(this[lt]?this[lt]=(r=this[lt])?Object.assign({},r):null:this[lt]={},this[ft]=1),t in this[lt]&&!e)throw new Error(`Contenxt with id: ${t} is exist. Pass third argument forceOverride=true to override it.`);this[lt][t]=n}getContext(t){return this[lt]?this[lt][t]:null}[dt](t,n,e){const r=_t(this,pt);if(r.has(t))throw new Error(`ref name '${t}' of component '${this.constructor.name}' is dulplicated.`);const o=_t(e,mt);let i=o.get(this);i||(i=[],o.set(this,i)),i.push(t),r[t]=n}getChild(t){return this[xt]!==Ct&&console.error(`Warning: call getChild before component '${this.constructor.name}' is rendered will get nothing, try put getChild into afterRender lifecycle hook.`),this[pt]?this[pt][t]:null}afterRender(){}beforeDestroy(){}}function Rt(t){return u(t,Mt)}function Nt(t){if(!s(t)||0===t.length)throw new Error("Render results of component is empty");return t}function Pt(t){const n=t[ht];return n&&0!==n.length||h(),Rt(n[0])?Pt(n[0]):n[0]}f("length"),f("keys"),f("key");function kt(t,n){return t?n in t?t[n]:t[p]:null}function St(t,n,e){const r=kt(t,e);if(!r)return n.push(X(d)),n;const o=new Mt(r);return n.push(o),o[ot]()}function Tt(t,n,e){const r=kt(t,e);if(!r){const t=n[0];if(Rt(t)){const e=Pt(t),r=Z(e),o=X(d);n[0]=o,tt(r,o,e),t[ut]()}return}const o=n[0];let i,s;const c=Rt(o);c?s=Z(i=Pt(o)):(i=o,s=Z(o));const u=new Mt(r);n[0]=u,tt(s,u[ot](),i),c?o[ut]():nt(s,i),Ot(u)}class Dt extends Mt{constructor(t){super(t);const n=z(this),e=()=>{n.expect=!!t.expect};return e(),t[g]("expect",e),n}get expect(){return this._e}set expect(t){this._e!==t&&(this._e=t,this[Et]())}[ot](){const t=this[st];return t&&(t[!1]=t.else),St(t,this[ht],this.expect)}[bt](){Tt(this[st],this[ht],this.expect)}}var It=function(t){const n=t;return[(()=>{const e=K("span","\n  Hello, Everyone!\n  My name is ",(()=>{const e=U(""),r=()=>q(e,n.name);return n[g]("name",r,t),r(),e})(),"!\n");return n[dt]("someId",e,t),t[ht].push(e),e})()]};class $t extends Mt{constructor(t){if(super(t),null!==t&&"object"==typeof t){const n=Object.keys(t);n.forEach(n=>this[n]=t[n]);const e=z(this);return n.filter(t=>/^[a-zA-Z]/.test(t)).forEach(n=>{t[g](n,()=>e[n]=t[n])}),e}return z(this)}static get template(){return It}someApi(){alert(`Hello, everyone. My name is ${this.name}`),this.notify("someApiCalled",this.name)}afterRender(){console.log("after render"),console.log(this.getChild("someId"))}beforeDestroy(){console.log("before destroy")}}var Wt=function(t){const n=t;return[(()=>{const n=K("h2","Lifecycle demo");return t[ht].push(n),n})(),(()=>{const n=K("p","\n  Each component have two lifecycle hooks,\n  afterRender and beforeDestroy.\n");return t[ht].push(n),n})(),(()=>{const e=K("p",...(()=>{const e=V({[lt]:t[lt],expect:null,[st]:{[p]:function(t){return[...(()=>{const e=V({[lt]:t[lt],name:null},!0),r=()=>e.name=n.name+"_"+n.inc;n[g]("name",r,t),n[g]("inc",r,t),r();const o=new $t(e);return o.on("someApiCalled",function(...t){n.onBoyApiCalled(...t)}),n[dt]("boy",o,t),t[ht].push(o),Nt(o[ot](t))})()]}}},!0),r=()=>e.expect=n.showBoy;n[g]("showBoy",r,t),r();const o=new Dt(e);return t[at].push(o),Nt(o[ot](t))})());return t[ht].push(e),e})(),(()=>{const e=K("p",(()=>{const e=K("button",(()=>{const e=U(""),r=()=>q(e,n.showBoy?"Hide":"Show");return n[g]("showBoy",r,t),r(),e})()," Boy");return rt(e,"click",function(...t){n.showBoy=!n.showBoy,n.inc++,n.log(t[0])}),e})(),...(()=>{const e=V({[lt]:t[lt],expect:null,[st]:{[p]:function(t){return[(()=>{const e=K("button","Call Api");return rt(e,"click",function(...t){n.callApi(...t)}),t[ht].push(e),e})()]}}},!0),r=()=>e.expect=n.showBoy;n[g]("showBoy",r,t),r();const o=new Dt(e);return t[at].push(o),Nt(o[ot](t))})());return t[ht].push(e),e})()]};!function(t,n){if(n===document.body)throw new Error("bootstrap dom cannot be document.body");const e=new t;Rt(e)||h(),e[it](n)}(class extends Mt{static get template(){return Wt}constructor(t){super(t);const n=z(this);return n.showBoy=!0,n.inc=0,n.name="Jinge",n}afterRender(){this.callApi()}log(...t){console.log(...t)}callApi(t){console.log(t),this.getChild("boy").someApi()}onBoyApiCalled(t){console.log("boy",t,"send message: someApiCalled")}},document.getElementById("root-app"))}]);
//# sourceMappingURL=bundle.min.js.map