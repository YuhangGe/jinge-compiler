{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/util/type.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/util/array.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/util/common.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/util/setimm.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/util/dom.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/vm/common.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/vm/notify.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/vm/node.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/vm/core.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/vm/proxy.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/core/messenger.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/core/style.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/core/i18n.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/core/component.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/core/transition.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/components/if.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/core/render_fns.js","webpack:///./app.html","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/core/bootstrap.js","webpack:///./index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","typeOf","v","isObject","isString","isUndefined","isArray","Array","isFunction","arrayRemove","array","item","idx","indexOf","splice","UID_INC","uid","Date","now","toString","Math","floor","random","tasksByHandle","registerImmediate","autoIncrement","nextHandle","currentlyRunningATask","clearImmediateFallback","handle","delete","runIfPresent","setTimeout","callback","window","setImmediate","Map","messagePrefix","addEventListener","event","source","data","startsWith","Number","slice","length","postMessage","arguments","Error","set","clearImmediate","createTextNode","text","document","JSON","stringify","createFragment","children","f","createDocumentFragment","forEach","appendChild","appendChildren","$parent","setAttribute","$ele","attrName","attrValue","attrN","removeAttribute","_createEl","$el","attrs","an","createElement","tag","createElementWithoutAttrs","addEvent","$element","eventName","handler","capture","passive","removeEvent","removeEventListener","$$","isInnerObj","clazz","constructor","RegExp","Boolean","isPublicProperty","charCodeAt","getPropertyName","parsePropertyPath","propertyPath","split","addParent","child","parent","__parents","push","core","prop","removeParent","findIndex","handleTasks","handleCancel","immediate","loopHandle","node","handlers","__handlers","has","imm","arg","handleOnce","listeners","__listeners","loopClearNode","sn","__parent","target","this","__notifiable","__related","__setters","proxy","writable","configurable","related","dbStarIdx","loopCreateNode","parentNode","level","propertyName","__property","__addRelated","loopGetNode","_a","size","deleteNode","__rmRelated","loopNotify","vm","parents","ps","__notify","concat","console","error","hooks","origin","hook","__unwatch","sfm","fn","getOwnPropertyNames","isPropArray","it","arr1","arr2","arrayEqual","notifyPropChanged","__propSetHandler","setFn","assertVM","oldVal","newValIsVM","__objectPropSetFn","__componentPropSetFn","setterFn","obj","map","desc","getOwnPropertyDescriptor","getPrototypeOf","getSetterFnIfPropIsSetter","attrsPropSetHandler","componentPropSetHandler","warn","attributes","vmCore","Proxy","createAttributes","MESSENGER_LISTENERS","Messenger","templateListeners","__on","opts","args","eventListener","options","once","onceListener","__off","clear","manager","sty","$style","type","id","dom","head","styleSheet","cssText","css","textContent","styleMap","info","refs","$e","style","class","body","exist","getComputedStyle","getPropertyValue","removeChild","isHideCssExists","getElementById","compile","Function","replace","i18n","super","__deps","__data","__cache","__key","__regLoc","JINGE_I18N_DATA","locale","depent","filename","fetch","then","res","defaultFetchFn","code","params","dict","dictionary","substring","render","renderDict","listener","ComponentStates","ContextStates","__","isComponent","assertRenderResults","renderResults","PRIVATE","compilerAttrs","private","component","createComponent","passedAttrs","context","contextState","UNTOUCH","slots","state","INITIALIZE","rootNodes","nonRootCompNodes","relatedRefs","updateNextMap","compStylePid","deregDOM","deregI18N","deregs","unwatcher","watch","deregister","lisDeregister","registerEvent","$event","ignoredEventNames","targetEl","RENDERED","lis","__firstDOM","nodeType","Node","ELEMENT_NODE","__domAddListener","stop","prevent","$evt","stopPropagation","preventDefault","el","__transitionDOM","rns","__lastDOM","Clazz","renderFn","template","default","add","replaceMode","rr","__render","oldNode","attch","replaceChild","__handleAfterRender","removeDOM","comp","WILLDESTROY","__beforeDestroy","__handleBeforeDestroy","remove","__destroy","ref","deregFn","DESTROIED","TOUCHED","TOUCHED_FREEZED","UNTOUCH_FREEZED","__afterRender","nextTick","__update","ntMap","first","forceOverride","assign","relatedComponent","elOrArr","isComp","rbs","inheritIds","styleId","ids","TransitionStates","getDurationType","cst","parentStyleIds","__addStylePid","renderSwitch","_currentValue","acs","transition","_transitionMap","k","ENTERED","LEAVED","_previousValue","_onEndHandler","onTransitionEnd","roots","createComment","doUpdate","firstDOM","parentDOM","newEl","nodes","insertBefore","_branch","cancelTs","tn","e","onEnd","classList","startTs","classOfStart","classOfActive","tsEndName","ENTERING","LEAVING","updateSwitch","pv","pt","updateSwitchWithTransition","updateSwitchOnTransitionEnd","ct","fd","destroySwitch","ts","__vm_cd786ab284ed","fn_5_cd786ab284ed","expect","__watch","fn_6_cd786ab284ed","__updateIfNeed","test","textRenderFn","txtContent","ComponentClazz","vm_0","fn_0","log","setInterval","__renderToDOM"],"mappings":"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","file":"bundle.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"dist\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export function typeOf(v) {\n    return typeof v;\n}\nexport function isObject(v) {\n    return v !== null && typeOf(v) === 'object';\n}\nexport function isString(v) {\n    return typeOf(v) === 'string';\n}\nexport function isNumber(v) {\n    return typeOf(v) === 'number' && !Number.isNaN(v) && Number.isFinite(v);\n}\nexport function isUndefined(v) {\n    return typeOf(v) === 'undefined';\n}\nexport function isArray(v) {\n    return Array.isArray(v);\n}\nexport function instanceOf(v, Clazz) {\n    return v instanceof Clazz;\n}\nexport function isBoolean(v) {\n    return typeof v === 'boolean' || instanceOf(v, Boolean);\n}\nexport function isFunction(v) {\n    return typeOf(v) === 'function';\n}\nexport function isDOMNode(ele) {\n    return instanceOf(ele, Node);\n}\nexport function isPromise(obj) {\n    return isObject(obj) && isFunction(obj.then);\n}\n//# sourceMappingURL=type.js.map","export function arrayRemove(array, item) {\n    const idx = array.indexOf(item);\n    if (idx < 0)\n        return false;\n    array.splice(idx, 1);\n    return true;\n}\nexport function arrayPushIfNotExist(array, item) {\n    const idx = array.indexOf(item);\n    if (idx >= 0)\n        return;\n    array.push(item);\n}\nexport function arrayEqual(arr1, arr2) {\n    if (arr1.length !== arr2.length)\n        return false;\n    for (let i = 0; i < arr1.length; i++) {\n        if (arr1[i] !== arr2[i])\n            return false;\n    }\n    return true;\n}\n//# sourceMappingURL=array.js.map","let UID_INC = 0;\nexport function uid() {\n    return Date.now().toString(32) + '-' + Math.floor(Math.random() * 0xffffff).toString(32) + '-' + (UID_INC++).toString(32);\n}\n//# sourceMappingURL=common.js.map","/**\n * setImmediate polyfill only for modern browsers\n * Copied from https://github.com/YuzuJS/setImmediate/blob/master/setImmediate.js\n * Simplified by Yuhang-Ge<abeyuhang@gmail.com>\n */\nimport { isUndefined, isFunction, isString } from './type';\nlet autoIncrement = 0;\nlet nextHandle = 1; // Spec says greater than zero\nlet tasksByHandle;\nlet currentlyRunningATask = false;\nlet registerImmediate;\nfunction setImmediateFallback(callback) {\n    if (!isFunction(callback) || arguments.length > 1) {\n        throw new Error('setImmediate require callback function.');\n    }\n    tasksByHandle.set(nextHandle, callback);\n    registerImmediate(nextHandle);\n    // console.log('siiii', callback);\n    return nextHandle++;\n}\nfunction clearImmediateFallback(handle) {\n    tasksByHandle.delete(handle);\n}\nfunction runIfPresent(handle) {\n    // From the spec: 'Wait until any invocations of this algorithm started before this one have completed.'\n    // So if we're currently running a task, we'll need to delay this invocation.\n    if (currentlyRunningATask) {\n        // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n        // 'too much recursion' error.\n        setTimeout(runIfPresent, 0, handle);\n        return;\n    }\n    const callback = tasksByHandle.get(handle);\n    // console.log('stttt', handle, callback);\n    if (!callback)\n        return;\n    currentlyRunningATask = true;\n    try {\n        callback();\n    }\n    finally {\n        clearImmediateFallback(handle);\n        currentlyRunningATask = false;\n    }\n}\nif (isUndefined(window.setImmediate)) {\n    tasksByHandle = new Map();\n    const messagePrefix = 'setImmediate$' + (autoIncrement++).toString(32) + '$';\n    window.addEventListener('message', event => {\n        if (event.source === window &&\n            isString(event.data) &&\n            event.data.startsWith(messagePrefix)) {\n            runIfPresent(Number(event.data.slice(messagePrefix.length)));\n        }\n    }, false);\n    registerImmediate = function (handle) {\n        window.postMessage(messagePrefix + handle, '*');\n    };\n}\nexport const setImmediate = setImmediateFallback;\nexport const clearImmediate = clearImmediateFallback;\n//# sourceMappingURL=setimm.js.map","import { isString, isUndefined, isObject } from './type';\nexport function setText($element, text) {\n    if (!isString(text)) {\n        text = JSON.stringify(text);\n    }\n    $element.textContent = text;\n}\nexport function createTextNode(text = '') {\n    return document.createTextNode(isString(text) ? text : JSON.stringify(text));\n}\nexport function createFragment(children) {\n    const f = document.createDocumentFragment();\n    children && children.forEach(n => {\n        f.appendChild(isString(n) ? document.createTextNode(n) : n);\n    });\n    return f;\n}\nexport function appendChildren($parent, children) {\n    $parent.appendChild(createFragment(children));\n}\nexport function replaceChildren($parent, children, oldNode) {\n    $parent.replaceChild(createFragment(children), oldNode);\n}\nexport function removeAttribute($ele, attrName) {\n    if (!attrName)\n        return;\n    if (isObject(attrName)) {\n        for (const attrN in attrName) {\n            removeAttribute($ele, attrN);\n        }\n        return;\n    }\n    return $ele.removeAttribute(attrName);\n}\nexport function setAttribute($ele, attrName, attrValue) {\n    if (!attrName)\n        return;\n    if (isObject(attrName)) {\n        for (const attrN in attrName) {\n            setAttribute($ele, attrN, attrName[attrN]);\n        }\n        return;\n    }\n    if (isUndefined(attrValue) || attrValue === null) {\n        removeAttribute($ele, attrName);\n    }\n    else {\n        $ele.setAttribute(attrName, attrValue);\n    }\n}\nfunction _createEl($el, attrs, children) {\n    if (attrs) {\n        for (const an in attrs) {\n            if (an && !isUndefined(attrs[an])) {\n                setAttribute($el, an, attrs[an]);\n            }\n        }\n    }\n    appendChildren($el, children);\n    return $el;\n}\nexport function createElement(tag, attrs, ...children) {\n    return _createEl(document.createElement(tag), attrs, children);\n}\nexport function createElementWithoutAttrs(tag, ...children) {\n    return createElement(tag, null, ...children);\n}\nexport function createSVGElement(tag, attrs, ...children) {\n    return _createEl(document.createElementNS('http://www.w3.org/2000/svg', tag), attrs, children);\n}\nexport function createSVGElementWithoutAttrs(tag, ...children) {\n    return createSVGElement(tag, null, ...children);\n}\nexport function createElementWithChild(tag, attrs, child) {\n    const $e = createElement(tag, attrs);\n    $e.appendChild(child);\n    return $e;\n}\nexport function insertAfter($parent, newNode, referenceNode) {\n    const rn = referenceNode.nextSibling;\n    if (!rn) {\n        $parent.appendChild(newNode);\n    }\n    else {\n        $parent.insertBefore(newNode, rn);\n    }\n}\n// export function hasClass($ele: Element, className: string): boolean {\n//   return $ele.classList.contains(className);\n// }\n// export function toggleClass($ele: Element, className: string, force?: boolean): boolean {\n//   return $ele.classList.toggle(className, force);\n// }\n// export function addClass($ele: Element, className: string): boolean {\n//   return toggleClass($ele, className, true);\n// }\n// export function removeClass($ele: Element, className: string): boolean {\n//   return toggleClass($ele, className, false);\n// }\n// export function replaceClass($ele: Element, oldClass: string, newClass: string): void {\n//   return $ele.classList.replace(oldClass, newClass);\n// }\nexport function addEvent($element, eventName, handler, capture) {\n    isUndefined(capture) && (capture = eventName.startsWith('touch') ? {\n        capture: false,\n        passive: true\n    } : false);\n    $element.addEventListener(eventName, handler, capture);\n}\nexport function removeEvent($element, eventName, handler) {\n    $element.removeEventListener(eventName, handler);\n}\n/**\n * Add event to DOM element, similar as addEventListener,\n * but return deregister function which will call removeEventListener.\n *\n * @returns {Function} deregister function which will removeEventListener\n */\nexport function registerEvent($element, eventName, handler, capture) {\n    addEvent($element, eventName, handler, capture);\n    return function deregister() {\n        removeEvent($element, eventName, handler);\n    };\n}\n//# sourceMappingURL=dom.js.map","import { isString, isUndefined, isObject, isArray, } from '../util';\nexport const $$ = Symbol('$$');\nexport function isInnerObj(v) {\n    const clazz = v.constructor;\n    return clazz === RegExp || clazz === Date || clazz === Boolean;\n}\nexport function isViewModel(v) {\n    return isObject(v) && ($$ in v);\n}\nexport function isPublicProperty(v) {\n    return isString(v) && v.charCodeAt(0) !== 95;\n}\nexport function getPropertyName(v) {\n    if (isString(v)) {\n        return v;\n    }\n    if (v === null) {\n        return 'null';\n    }\n    if (isUndefined(v)) {\n        return 'undefined';\n    }\n    return v.toString();\n}\nexport function parsePropertyPath(propertyPath) {\n    return isString(propertyPath) ? (propertyPath.indexOf('.') > 0 ? propertyPath.split('.') : [propertyPath]) : (isArray(propertyPath) ? propertyPath : [propertyPath]);\n}\nexport function addParent(child, parent, property) {\n    if (!parent.__parents) {\n        parent.__parents = [];\n    }\n    parent.__parents.push({\n        core: child,\n        prop: property\n    });\n}\nexport function removeParent(child, parent, property) {\n    if (!child.__parents) {\n        return;\n    }\n    const idx = child.__parents.findIndex(item => {\n        return item.core === parent && item.prop === property;\n    });\n    if (idx >= 0) {\n        child.__parents.splice(idx, 1);\n    }\n}\nexport function shiftParent(child, parent, property, delta) {\n    if (!child.__parents)\n        return;\n    const item = child.__parents.find(it => {\n        return it.core === parent && it.prop === property;\n    });\n    if (item) {\n        item.prop += delta;\n    }\n}\n//# sourceMappingURL=common.js.map","import { setImmediate, clearImmediate } from '../util';\nimport { getPropertyName } from './common';\nconst handleTasks = new Map();\nexport function handleCancel(handler) {\n    const t = handleTasks.get(handler);\n    if (t) {\n        clearImmediate(t.immediate);\n        handleTasks.delete(handler);\n    }\n}\nexport function handleOnce(handler, propertyPath) {\n    if (handleTasks.has(handler)) {\n        return;\n    }\n    const imm = setImmediate(() => {\n        const arg = handleTasks.get(handler);\n        try {\n            handler(arg.propertyPath);\n        }\n        finally {\n            handleTasks.delete(handler);\n        }\n    });\n    handleTasks.set(handler, {\n        immediate: imm,\n        propertyPath: propertyPath\n    });\n}\nexport function loopHandle(propertyPath, node, immediate) {\n    const handlers = node.__handlers;\n    handlers && handlers.forEach(handler => {\n        if (immediate) {\n            handler(propertyPath);\n        }\n        else {\n            handleOnce(handler, propertyPath);\n        }\n    });\n    const listeners = node.__listeners;\n    listeners && listeners.forEach(c => {\n        loopHandle(propertyPath, c, immediate);\n    });\n}\nexport function loopNotify(vm, propertyPath, immediate, level = 0) {\n    const listeners = vm.__listeners;\n    if (!listeners) {\n        return;\n    }\n    const propertyName = getPropertyName(propertyPath[level]);\n    if (!propertyName) {\n        return;\n    }\n    let node = listeners.get(propertyName);\n    if (node) {\n        if (propertyPath.length - 1 === level) {\n            // loopHandle(props, node, config[CFG_VM_DEBUG] ? null : imms);\n            loopHandle(propertyPath, node, immediate);\n        }\n        else {\n            loopNotify(node, propertyPath, immediate, level + 1);\n        }\n    }\n    node = listeners.get('*');\n    if (node) {\n        if (propertyPath.length - 1 === level) {\n            loopHandle(propertyPath, node, true);\n        }\n        else {\n            loopNotify(node, propertyPath, immediate, level + 1);\n        }\n    }\n    node = listeners.get('**');\n    if (node) {\n        loopHandle(propertyPath, node, true);\n    }\n}\n//# sourceMappingURL=notify.js.map","import { getPropertyName } from './common';\nimport { handleCancel } from './notify';\nexport function loopCreateNode(parentNode, propertyPath, level = 0) {\n    const propertyName = getPropertyName(propertyPath[level]);\n    if (!parentNode.__listeners) {\n        parentNode.__listeners = new Map();\n    }\n    let node = parentNode.__listeners.get(propertyName);\n    if (!node) {\n        node = {\n            __parent: parentNode,\n            __property: propertyName,\n            __handlers: null,\n            __listeners: null\n        };\n        parentNode.__listeners.set(propertyName, node);\n    }\n    if (propertyPath.length - 1 === level) {\n        return node;\n    }\n    else {\n        return loopCreateNode(node, propertyPath, level + 1);\n    }\n}\nexport function loopGetNode(parentNode, propertyPath, level = 0) {\n    var _a;\n    const propertyName = getPropertyName(propertyPath[level]);\n    if (!propertyName) {\n        return null;\n    }\n    const node = (_a = parentNode.__listeners) === null || _a === void 0 ? void 0 : _a.get(propertyName);\n    if (!node) {\n        return null;\n    }\n    if (propertyPath.length - 1 === level) {\n        return node;\n    }\n    else {\n        return loopGetNode(node, propertyPath, level + 1);\n    }\n}\nexport function deleteNode(node) {\n    if ((node && node.__handlers && node.__handlers.length > 0) ||\n        (node.__listeners && node.__listeners.size > 0)) {\n        return null;\n    }\n    /**\n     * if one node don't have any listener or child, delete it.\n     */\n    const parent = node.__parent;\n    const property = node.__property;\n    node.__parent = null; // unlink parent.\n    parent.__listeners.delete(property);\n    return parent;\n}\nexport function loopClearNode(node) {\n    const listeners = node.__listeners;\n    if (listeners) {\n        // loop clear all child nodes\n        listeners.forEach(sn => loopClearNode(sn));\n        node.__listeners = null;\n    }\n    // destroy all handlers\n    const handlers = node.__handlers;\n    if (handlers) {\n        // clear handler waiting to execute\n        handlers.forEach(handleCancel);\n        node.__handlers = null;\n    }\n    // unlink parent\n    node.__parent = null;\n}\n//# sourceMappingURL=node.js.map","import { arrayRemove, isArray, arrayEqual, isObject } from '../util';\nimport { parsePropertyPath, $$, removeParent, } from './common';\nimport { loopCreateNode, loopGetNode, loopClearNode, deleteNode } from './node';\nimport { handleCancel, loopNotify } from './notify';\nexport class ViewModelCoreImpl {\n    /**\n     * Don't use the constructor. Use createViewModel instead.\n     */\n    constructor(target) {\n        this.__notifiable = true;\n        this.__parents = null;\n        this.__listeners = null;\n        this.__related = null;\n        this.__setters = null;\n        this.target = target;\n        this.proxy = null;\n        Object.defineProperty(target, $$, {\n            value: this,\n            writable: false,\n            configurable: true,\n            enumerable: false\n        });\n    }\n    __watch(propertyPath, handler, related) {\n        propertyPath = parsePropertyPath(propertyPath);\n        const dbStarIdx = propertyPath.indexOf('**');\n        if (dbStarIdx >= 0 && dbStarIdx !== propertyPath.length - 1) {\n            /**\n             * 'a.b.**' is good.\n             * 'a.b.**.c' is bad.\n             */\n            throw new Error('wizard \"**\" must be last element in path.');\n        }\n        const node = loopCreateNode(this, propertyPath);\n        if (!node.__handlers) {\n            node.__handlers = [];\n        }\n        if (node.__handlers.indexOf(handler) < 0) {\n            node.__handlers.push(handler);\n        }\n        if (related && related !== this) {\n            /**\n             * If some child of this component is passed as argument(ie.\n             * use arg:pass attribute) like ng-tranclude in angular 1.x,\n             * the child may contain some messenger listeners not belong to\n             * this component but belong to outer parent.\n             *\n             * When destroy this component, we should also remove messenger listeners\n             *   belong to outer parent to prevent memory leak.\n             * To implement this goal, we maitain VM_RELATED_LISTENERS.\n             * When render view-tree, any messenger listeners belong to outer\n             * parent, will be also linked under VM_RELATED_LISTENERS, then\n             * when we destroy this component, the listeners can also be clear.\n             *\n             * For examle:\n             *\n             * <!-- outer parent: RootApp -->\n             * <div>\n             * <if expect=\"show\">\n             * <Tooltip>\n             * <argument arg:pass=\"default\">\n             * <p>hello, world. my name is ${name}</p>\n             * </argument>\n             * </Tooltip>\n             * </if>\n             * </div>\n             *\n             * when the `show` variable changed from true to false, the\n             * Tooltip component will be destroy. The messenger listener belong\n             * to the outer parent RootApp which watch `name` variable should\n             * also be removed.\n             */\n            related.__addRelated(this, propertyPath, handler);\n        }\n    }\n    __unwatch(propertyPath, handler, related) {\n        if (!propertyPath) {\n            loopClearNode(this);\n            return;\n        }\n        const node = loopGetNode(this, parsePropertyPath(propertyPath));\n        if (!node) {\n            return;\n        }\n        const handlers = node.__handlers;\n        if (!handlers) {\n            return;\n        }\n        if (!handler) { // remove all if second parameter is not provided\n            handlers.forEach(handleCancel);\n            handlers.length = 0;\n        }\n        else {\n            handleCancel(handler);\n            arrayRemove(handlers, handler);\n        }\n        deleteNode(node);\n        if (related && related !== this) {\n            related.__rmRelated(this, propertyPath, handler);\n        }\n    }\n    __notify(propertyPath, immediate = false) {\n        if (!this.__notifiable) {\n            return;\n        }\n        propertyPath = parsePropertyPath(propertyPath);\n        if (this.__listeners) {\n            loopNotify(this, propertyPath, immediate);\n        }\n        const parents = this.__parents;\n        parents && parents.forEach(ps => {\n            const vm = ps.core;\n            if (!vm) {\n                // eslint-disable-next-line no-console\n                console.error('dev-warn-unexpected: parent of ViewModelCore has been destroied but not unlink.');\n                return;\n            }\n            vm.__notify([ps.prop].concat(propertyPath), immediate);\n        });\n    }\n    __destroy() {\n        this.__notifiable = false;\n        this.__parents = null;\n        // clear listeners\n        loopClearNode(this);\n        // unlink wrapper proxy\n        this.proxy = null;\n        if (this.__related) {\n            this.__related.forEach((hooks, origin) => {\n                hooks.forEach(hook => {\n                    origin.__unwatch(hook.prop, hook.handler);\n                });\n            });\n            this.__related = null;\n        }\n        const target = this.target;\n        /*\n         * 解除 ViewModel 之间的 VM_PARENTS 关联。\n         * 使用 getOwnPropertyNames 可以获取所有属性，但无法获取 setter 函数定义的属性。\n         */\n        const sfm = this.__setters;\n        if (sfm) {\n            sfm.forEach((fn, prop) => {\n                if (fn === null) {\n                    return;\n                }\n                const v = target[prop];\n                if (!isObject(v) || !($$ in v)) {\n                    return;\n                }\n                removeParent(v[$$], this, prop);\n            });\n            this.__setters = null;\n        }\n        Object.getOwnPropertyNames(target).forEach(prop => {\n            const v = target[prop];\n            if (!isObject(v) || !($$ in v)) {\n                return;\n            }\n            removeParent(v[$$], this, prop);\n        });\n        // unlink vm target\n        delete target[$$];\n        this.target = null;\n    }\n    __addRelated(origin, propertyPath, handler) {\n        if (!this.__related)\n            this.__related = new Map();\n        let hook = this.__related.get(origin);\n        if (!hook) {\n            this.__related.set(origin, hook = []);\n        }\n        hook.push({\n            prop: propertyPath,\n            handler\n        });\n    }\n    __rmRelated(origin, propertyPath, handler) {\n        if (!this.__related)\n            return;\n        const hook = this.__related.get(origin);\n        if (!hook)\n            return;\n        const isPropArray = isArray(propertyPath);\n        const i = hook.findIndex(it => {\n            return handler === it.handler &&\n                (isPropArray\n                    ? arrayEqual(propertyPath, it.prop)\n                    : propertyPath === it.prop);\n        });\n        if (i >= 0) {\n            hook.splice(i, 1);\n        }\n    }\n}\n//# sourceMappingURL=core.js.map","import { isNumber, isArray, isObject, isFunction, isPromise, isUndefined } from '../util';\nimport { addParent, isViewModel, removeParent, shiftParent, isPublicProperty, isInnerObj, $$ } from './common';\nimport { ViewModelCoreImpl } from './core';\n/**\n * check if property named \"prop\" is setter of instance \"obj\",\n * if it's setter, return setter function, otherwise return null.\n * @param {Object} obj\n * @param {String} prop\n *\n * 检测名称为 \"prop\" 的属性是否是 setter，如果是，返回该 setter 函数，\n * 否则，返回 null。\n * 由于 obj 可能是有继承关系的类的实例，因此需要向上检测继承的类的 prototype。\n */\nfunction getSetterFnIfPropIsSetter(obj, prop) {\n    let map = obj[$$].__setters;\n    if (!map) {\n        obj[$$].__setters = map = new Map();\n    }\n    if (!map.has(prop)) {\n        let clazz = obj.constructor;\n        let desc = Object.getOwnPropertyDescriptor(clazz.prototype, prop);\n        let fn;\n        if (desc) {\n            fn = isFunction(desc.set) ? desc.set : null;\n            map.set(prop, fn);\n            return fn;\n        }\n        // lookup to check parent classes\n        clazz = Object.getPrototypeOf(clazz);\n        while (clazz && clazz.prototype) {\n            desc = Object.getOwnPropertyDescriptor(clazz.prototype, prop);\n            if (desc) {\n                fn = isFunction(desc.set) ? desc.set : null;\n                map.set(prop, fn);\n                return fn;\n            }\n            clazz = Object.getPrototypeOf(clazz);\n        }\n        map.set(prop, null);\n        return null;\n    }\n    else {\n        return map.get(prop);\n    }\n}\nfunction notifyPropChanged(vm, prop) {\n    vm[$$].__notify(prop);\n}\nfunction __propSetHandler(target, prop, value, setFn, assertVM = true) {\n    if (!isPublicProperty(prop)) {\n        /**\n         * 如果不强制转成 string，typescript 会报：Type 'symbol' cannot be used as an index type\n         */\n        target[prop] = value;\n        return true;\n    }\n    const oldVal = target[prop];\n    if (oldVal === value && !isUndefined(value)) {\n        return true;\n    }\n    let newValIsVM = isObject(value) && !isInnerObj(value);\n    if (newValIsVM) {\n        newValIsVM = $$ in value;\n        if (assertVM && !newValIsVM) {\n            throw new Error(`public property \"${prop.toString()}\" of ViewModel must also be ViewModel`);\n        }\n    }\n    // console.log(`'${prop}' changed from ${store[prop]} to ${value}`);\n    if (isObject(oldVal) && ($$ in oldVal)) {\n        removeParent(oldVal[$$], target[$$], prop);\n    }\n    setFn(target, prop, value);\n    if (newValIsVM) {\n        addParent(value[$$], target[$$], prop);\n    }\n    notifyPropChanged(target, prop);\n    return true;\n}\nfunction __objectPropSetFn(target, prop, value) {\n    target[prop] = value;\n}\nfunction __componentPropSetFn(target, prop, value) {\n    /**\n     * we must ensure `this` in setter function to be `Proxy`\n     *\n     * 首先判断当前赋值的变量名，是否对应了一个 setter 函数，\n     * 如果是 setter 函数，则应该显式地调用，\n     *   并将 `this` 设置为该 target 的包装 Proxy，\n     *   这样才能保正 setter 函数中其它赋值语句能触发 notify。\n     * 如果不是 setter 函数，则简单地使用 target\\[prop\\] 赋值即可。\n     */\n    const setterFn = getSetterFnIfPropIsSetter(target, prop);\n    if (setterFn) {\n        setterFn.call(target[$$].proxy, value);\n    }\n    else {\n        target[prop] = value;\n    }\n}\nfunction objectPropSetHandler(target, prop, value) {\n    if (!($$ in target)) {\n        // ViewModel has been destroied.\n        return true;\n    }\n    return __propSetHandler(target, prop, value, __objectPropSetFn);\n}\nfunction attrsPropSetHandler(target, prop, value) {\n    if (!($$ in target)) {\n        // ViewModel has been destroied.\n        return true;\n    }\n    return __propSetHandler(target, prop, value, __objectPropSetFn, false);\n}\nfunction componentPropSetHandler(target, prop, value) {\n    if (!($$ in target)) {\n        // eslint-disable-next-line no-console\n        console.warn(`call setter \"${prop.toString()}\" after destroied, resources such as setInterval maybe not released before destroy. component:`, target);\n        return true;\n    }\n    return __propSetHandler(target, prop, value, __componentPropSetFn);\n}\nfunction arrayNotifyItems(target, idxStart, idxEnd) {\n    let i = idxStart;\n    if (idxStart > idxEnd) {\n        i = idxEnd;\n        idxEnd = idxStart;\n    }\n    for (; i < idxEnd; i++) {\n        // console.log('npc', i);\n        notifyPropChanged(target, i);\n    }\n}\nfunction arrayLengthSetHandler(target, value) {\n    if (!isNumber(value)) {\n        throw new Error('bad argument. array length must be validate number.');\n    }\n    const oldLen = target.length;\n    if (oldLen > value) {\n        for (let i = value; i < oldLen; i++) {\n            const v = target[i];\n            if (isViewModel(v)) {\n                removeParent(v[$$], target[$$], i);\n            }\n        }\n    }\n    target.length = value;\n    // console.log('set .length from', oldLen, 'to', value);\n    if (oldLen !== value) {\n        notifyPropChanged(target, 'length');\n        arrayNotifyItems(target, oldLen, value);\n    }\n    return true;\n}\nfunction arrayPropSetHandler(target, prop, value) {\n    if (!($$ in target)) {\n        return true;\n    }\n    if (prop === 'length') {\n        return arrayLengthSetHandler(target, value);\n    }\n    /**\n     * 即便是 arr[0] 这样的取值，在 Proxy 的 set 里面，传递的 property 也是 string 类型，即 \"0\"。\n     * 因此，对数组也使用和对象一致的 objectPropSetHandler 来处理。\n     */\n    return __propSetHandler(target, prop, value, __objectPropSetFn);\n}\nconst ObjectProxyHandler = {\n    set: objectPropSetHandler\n};\nconst PromiseProxyHandler = {\n    get(target, prop) {\n        if (prop === 'then' || prop === 'catch') {\n            const v = target[prop];\n            return function (...args) {\n                return v.call(target, ...args);\n            };\n        }\n        else {\n            return target[prop];\n        }\n    },\n    set: objectPropSetHandler\n};\nfunction _arrayReverseSort(target, fn, arg) {\n    target.forEach((it, i) => {\n        if (isViewModel(it)) {\n            addParent(it[$$], target[$$], i);\n        }\n    });\n    target[fn](arg);\n    target.forEach((it, i) => {\n        if (isViewModel(it)) {\n            removeParent(it[$$], target[$$], i);\n        }\n    });\n    arrayNotifyItems(target, 0, target.length);\n    // return wrapper proxy to ensure `arr.reverse() === arr`\n    return target[$$].proxy;\n}\nfunction wrapSubArray(arr, wrapEachItem = false) {\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    const rtn = wrapProxy(arr, true);\n    // handleVMDebug(arr);\n    arr.forEach((it, i) => {\n        if (isViewModel(it)) {\n            addParent(it[$$], arr[$$], i);\n        }\n        else if (wrapEachItem) {\n            // eslint-disable-next-line @typescript-eslint/no-use-before-define\n            arr[i] = createViewModel(it);\n        }\n    });\n    return rtn;\n}\nfunction _arrayShiftOrUnshiftProp(arr, delta) {\n    arr.forEach((el, i) => {\n        if (!isViewModel(el))\n            return;\n        shiftParent(el[$$], arr[$$], i, delta);\n    });\n}\nfunction _argAssert(arg, fn) {\n    if (isObject(arg)) {\n        if (!($$ in arg)) {\n            throw new Error(`argument passed to Array.${fn} must be ViewModel if the array is ViewModel`);\n        }\n        else {\n            return true;\n        }\n    }\n    else {\n        return false;\n    }\n}\nconst ArrayFns = {\n    splice(target, idx, delCount, ...args) {\n        if (idx < 0)\n            idx = 0;\n        args.forEach((arg, i) => {\n            if (_argAssert(arg, 'splice')) {\n                addParent(arg[$$], target[$$], idx + i);\n            }\n        });\n        for (let i = 0; i < delCount; i++) {\n            if (idx + i >= target.length)\n                break;\n            const el = target[idx + i];\n            if (isViewModel(el)) {\n                removeParent(el[$$], target[$$], idx + i);\n            }\n        }\n        const delta = args.length - delCount;\n        if (delta !== 0) {\n            for (let i = idx + delCount; i < target.length; i++) {\n                const el = target[i];\n                if (!isViewModel(el)) {\n                    continue;\n                }\n                shiftParent(el[$$], target[$$], i, delta);\n            }\n        }\n        const rtn = wrapSubArray(target.splice(idx, delCount, ...args));\n        if (delta !== 0) {\n            notifyPropChanged(target, 'length');\n            for (let i = idx; i < target.length; i++) {\n                notifyPropChanged(target, i);\n            }\n        }\n        return rtn;\n    },\n    shift(target) {\n        if (target.length === 0)\n            return target.shift();\n        _arrayShiftOrUnshiftProp(target, -1);\n        const el = target.shift();\n        if (isViewModel(el)) {\n            removeParent(el[$$], target[$$], -1);\n        }\n        notifyPropChanged(target, 'length');\n        for (let i = 0; i < target.length + 1; i++) {\n            notifyPropChanged(target, i);\n        }\n        return el;\n    },\n    unshift(target, ...args) {\n        if (args.length === 0)\n            return target.unshift();\n        args.forEach((arg, i) => {\n            if (_argAssert(arg, 'unshift')) {\n                addParent(arg[$$], target[$$], i);\n            }\n        });\n        _arrayShiftOrUnshiftProp(target, args.length);\n        const rtn = target.unshift(...args);\n        notifyPropChanged(target, 'length');\n        for (let i = 0; i < target.length; i++) {\n            notifyPropChanged(target, i);\n        }\n        return rtn;\n    },\n    pop(target) {\n        if (target.length === 0) {\n            return target.pop();\n        }\n        const el = target.pop();\n        if (isViewModel(el)) {\n            removeParent(el[$$], target[$$], target.length);\n        }\n        notifyPropChanged(target, 'length');\n        notifyPropChanged(target, target.length);\n        return el;\n    },\n    push(target, ...args) {\n        if (args.length === 0)\n            return target.push();\n        args.forEach((arg, i) => {\n            if (_argAssert(arg, 'push')) {\n                addParent(arg[$$], target[$$], target.length + i);\n            }\n        });\n        const rtn = target.push(...args);\n        notifyPropChanged(target, 'length');\n        for (let i = target.length - 1 - args.length; i < target.length; i++) {\n            notifyPropChanged(target, i);\n        }\n        return rtn;\n    },\n    fill(target, v) {\n        _argAssert(v, 'fill');\n        target.forEach((it, i) => {\n            if (it === v && !isUndefined(it)) {\n                return;\n            }\n            if (isViewModel(it)) {\n                removeParent(it[$$], target[$$], i);\n            }\n            target[i] = v;\n            if (isViewModel(v)) {\n                addParent(v[$$], target[$$], i);\n            }\n            notifyPropChanged(target, i);\n        });\n        return target[$$].proxy;\n    },\n    reverse(target) {\n        return _arrayReverseSort(target, 'reverse');\n    },\n    sort(target, fn) {\n        return _arrayReverseSort(target, 'sort', fn);\n    },\n    concat(target, arr) {\n        _argAssert(arr, 'concat');\n        return wrapSubArray(target.concat(arr));\n    },\n    filter(target, fn) {\n        return wrapSubArray(target.filter(fn));\n    },\n    slice(target, si, ei) {\n        return wrapSubArray(target.slice(si, ei));\n    },\n    map(target, fn) {\n        return wrapSubArray(target.map(fn), true);\n    }\n};\nexport const ArrayProxyHandler = {\n    get(target, prop) {\n        if (prop in ArrayFns) {\n            const fn = ArrayFns[prop];\n            return function (...args) {\n                return fn(target, ...args);\n            };\n        }\n        else {\n            return target[prop];\n        }\n    },\n    set: arrayPropSetHandler\n};\nfunction wrapProxy(target, isArr) {\n    const vmCore = new ViewModelCoreImpl(target);\n    return vmCore.proxy = new Proxy(target, isArr ? ArrayProxyHandler : (isPromise(target) ? PromiseProxyHandler : ObjectProxyHandler));\n}\nfunction wrapProp(parent, child, property) {\n    // const v = vm[property];\n    if (!isObject(child) || isInnerObj(child)) {\n        return;\n    }\n    if (!($$ in child)) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        parent[property] = child = createViewModel(child);\n    }\n    addParent(child[$$], parent[$$], property);\n}\nexport function createViewModel(target) {\n    if (isObject(target)) {\n        // directly return if alreay is ViewModel or inner object(Date/RegExp/Boolean).\n        if (isInnerObj(target) || ($$ in target)) {\n            return target;\n        }\n        const isArr = isArray(target);\n        if (isArr) {\n            for (let i = 0; i < target.length; i++) {\n                wrapProp(target, target[i], i);\n            }\n        }\n        else {\n            for (const k in target) {\n                if (isPublicProperty(k)) {\n                    wrapProp(target, target[k], k);\n                }\n            }\n        }\n        return wrapProxy(target, isArr);\n    }\n    else {\n        return target;\n    }\n}\nexport function createAttributes(attributes) {\n    const vmCore = new ViewModelCoreImpl(attributes);\n    // 初始化时默认的 notifiable 为 false，\n    // 待 RENDER 结束后才修改为 true，用于避免无谓的消息通知。\n    vmCore.__notifiable = false;\n    return (vmCore.proxy = new Proxy(attributes, {\n        set: attrsPropSetHandler\n    }));\n}\n// function handleVMDebug(vm) {\n//   if (!config[CFG_VM_DEBUG]) {\n//     return;\n//   }\n//   let _di = window._VM_DEBUG;\n//   if (!_di) {\n//     _di = window._VM_DEBUG = {\n//       id: 0, vms: []\n//     };\n//   }\n//   vm[VM_DEBUG_ID] = _di.id++;\n//   // if (isComponent(vm) && !(VM_DEBUG_NAME in vm)) {\n//   //   vm[VM_DEBUG_NAME] = `<${vm.constructor.name}>`;\n//   // }\n//   _di.vms.push(vm);\n// }\nexport function createComponent(component) {\n    if ($$ in component) {\n        throw new Error('component has alreay been wrapped.');\n    }\n    // handleVMDebug(component);\n    const vmCore = new ViewModelCoreImpl(component);\n    // 初始化时 Component 默认的 VM_NOTIFIABLE 为 false，\n    // 待 RENDER 结束后才修改为 true，用于避免无谓的消息通知。\n    vmCore.__notifiable = false;\n    return vmCore.proxy = new Proxy(component, {\n        set: componentPropSetHandler\n    });\n}\nexport function vm(target) {\n    if (!isObject(target)) {\n        throw new Error('vm() target must be object or array.');\n    }\n    return createViewModel(target);\n}\nexport function attrs(target) {\n    if (!isObject(target) || isArray(target)) {\n        throw new Error('attrs() traget must be plain object.');\n    }\n    return createAttributes(target);\n}\nexport function watch(vm, propertyPath, handler) {\n    vm[$$].__watch(propertyPath, handler);\n}\nexport function unwatch(vm, propertyPath, handler) {\n    vm[$$].__unwatch(propertyPath, handler);\n}\n//# sourceMappingURL=proxy.js.map","export const MESSENGER_LISTENERS = Symbol('listeners');\nexport class Messenger {\n    constructor(templateListeners) {\n        this[MESSENGER_LISTENERS] = null;\n        if (templateListeners) {\n            for (const eventName in templateListeners) {\n                const handler = templateListeners[eventName];\n                this.__on(eventName, handler.fn, handler.opts);\n            }\n        }\n    }\n    __notify(eventName, ...args) {\n        if (!this[MESSENGER_LISTENERS])\n            return;\n        const listeners = this[MESSENGER_LISTENERS].get(eventName);\n        if (!listeners)\n            return;\n        listeners.forEach(handler => {\n            handler.fn(...args);\n        });\n    }\n    __on(eventName, eventListener, options) {\n        if (!this[MESSENGER_LISTENERS]) {\n            this[MESSENGER_LISTENERS] = new Map();\n        }\n        let listeners = this[MESSENGER_LISTENERS].get(eventName);\n        if (!listeners) {\n            this[MESSENGER_LISTENERS].set(eventName, listeners = []);\n        }\n        if (listeners.findIndex(it => {\n            return it.fn === eventListener;\n        }) >= 0) {\n            // eslint-disable-next-line no-console\n            console.warn('dulplicated messenger listener', eventName, eventListener);\n            return;\n        }\n        if (options && options.once) {\n            const onceListener = (...args) => {\n                eventListener(...args);\n                this.__off(eventName, eventListener);\n            };\n            listeners.push({\n                fn: onceListener,\n                opts: options\n            });\n        }\n        else {\n            listeners.push({\n                fn: eventListener,\n                opts: options\n            });\n        }\n    }\n    __off(eventName, eventListener) {\n        if (!this[MESSENGER_LISTENERS])\n            return;\n        if (!eventName) {\n            this[MESSENGER_LISTENERS].clear();\n            return;\n        }\n        const listeners = this[MESSENGER_LISTENERS].get(eventName);\n        if (!listeners)\n            return;\n        if (!eventListener) {\n            listeners.length = 0;\n            return;\n        }\n        const idx = listeners.findIndex(it => {\n            return it.fn === eventListener;\n        });\n        listeners.splice(idx, 1);\n    }\n}\n//# sourceMappingURL=messenger.js.map","import { uid, createElement } from '../util';\nfunction isHideCssExists() {\n    const $e = createElement('span', {\n        style: 'position:absolute;left:-10000px;',\n        class: 'jg-hide'\n    });\n    document.body.appendChild($e);\n    const exist = getComputedStyle($e).getPropertyValue('display') === 'none';\n    document.body.removeChild($e);\n    return exist;\n}\nclass ComponentStyleManager {\n    constructor() {\n        this.m = new Map();\n        this.s = 0;\n    }\n    create(sty) {\n        if (this.s === 0)\n            return;\n        const $style = createElement('style', {\n            type: 'text/css',\n            id: sty.dom\n        });\n        document.head.appendChild($style);\n        if ($style.styleSheet) {\n            $style.styleSheet.cssText = sty.css;\n        }\n        else {\n            $style.textContent = sty.css;\n        }\n    }\n    add(sty) {\n        if (!sty)\n            return;\n        const styleMap = this.m;\n        let info = styleMap.get(sty.id);\n        if (info) {\n            info.refs++;\n            return;\n        }\n        info = {\n            id: sty.id,\n            css: sty.css,\n            dom: `__${sty.id}__`,\n            refs: 1\n        };\n        styleMap.set(sty.id, info);\n        this.create(info);\n    }\n    attch() {\n        if (this.s !== 0) {\n            // eslint-disable-next-line no-console\n            console.warn('component styles already attached.');\n            return;\n        }\n        this.s = 1;\n        if (!isHideCssExists()) {\n            this.create({\n                dom: `__jgsty_${uid()}__`,\n                css: '.jg-hide{display:none!important}.jg-hide.jg-hide-enter,.jg-hide.jg-hide-leave{display:block!important}'\n            });\n        }\n        this.m.forEach(info => {\n            this.create(info);\n        });\n    }\n    remove(sty) {\n        if (!sty)\n            return;\n        const info = this.m.get(sty.id);\n        if (!info)\n            return;\n        info.refs--;\n        if (info.refs > 0) {\n            return;\n        }\n        this.m.delete(info.id);\n        if (this.s === 0) {\n            return;\n        }\n        document.head.removeChild(document.getElementById(info.dom));\n    }\n}\n// singleton\nexport const manager = new ComponentStyleManager();\n//# sourceMappingURL=style.js.map","import { isString, uid, isFunction } from '../util';\nimport { Messenger } from './messenger';\nconst DEFAULT_FILENAME = 'dist/locale.[locale].js';\n/**\n * convert i18n text template to function\n * @param {String} text i18n formatted text template\n */\nexport function compile(text) {\n    // eslint-disable-next-line no-new-func\n    return new Function('__ctx', `return \\`${text.replace(/`/g, '\\\\`').replace(/\\$\\{\\s*([\\w\\d._$]+)\\s*\\}/g, (m, n) => {\n        return '${ __ctx.' + n + ' }';\n    })}\\`;`);\n}\nfunction defaultFetchFn(locale, filename) {\n    return window.fetch(filename.replace('[locale]', locale)).then(res => res.text());\n}\nclass I18nService extends Messenger {\n    constructor() {\n        super();\n        this.__deps = null;\n        this.__data = null;\n        this.__cache = new Map();\n        this.__key = null;\n        this.__regLoc(window.JINGE_I18N_DATA);\n    }\n    get locale() {\n        return this.__data.locale;\n    }\n    /**\n     * Register i18n render depedent.\n     * This method will be called by compiler generated code, don't call it manully.\n     */\n    __regDep(idx, depent) {\n        if (!this.__deps)\n            this.__deps = [];\n        if (!this.__deps[idx])\n            throw new Error(`conflict at ${idx}`);\n        this.__deps[idx] = depent;\n    }\n    /**\n     * Register locale data, will be called in locale resource script.\n     * Usually you don't need call this method manully.\n     */\n    __regLoc(data) {\n        if (!data || this.__cache.has(data.locale)) {\n            return;\n        }\n        this.__cache.set(data.locale, data);\n        if (!this.__data) {\n            this.__data = data;\n        }\n    }\n    /**\n     * switch to another locale/language\n     * @param {string} locale locale to swtiched\n     * @param {string | Function} filename filename of locale script with full path, or function fetch locale script.\n     */\n    switch(locale, filename = DEFAULT_FILENAME) {\n        if (this.__data.locale === locale) {\n            return;\n        }\n        const data = this.__cache.get(locale);\n        if (!data) {\n            const key = uid();\n            this.__key = key;\n            (isFunction(filename) ? filename(locale) : defaultFetchFn(locale, filename)).then((code) => {\n                // eslint-disable-next-line no-new-func\n                (new Function('jinge', code))({\n                    i18n: this\n                });\n                if (this.__key !== key || this.__data.locale === locale) {\n                    /*\n                      * ignore if callback has been expired.\n                      * 使用闭包的技巧来检测当前回调是否已经过期，\n                      * 即，是否已经有新的 fetchFn 函数的调用。\n                      */\n                    return;\n                }\n                const data = this.__cache.get(locale);\n                this.__data = data;\n                this.__notify('i18n-change', this.locale);\n            });\n        }\n        else {\n            this.__data = data;\n            this.__notify('i18n-change', this.locale);\n        }\n    }\n    __t(key, params) {\n        const dict = this.__data.dictionary;\n        if (!(key in dict)) {\n            return 'i18n_missing';\n        }\n        let text = dict[key];\n        if (isString(text)) {\n            // text.startsWith(\"«\") means reference to another key\n            if (text.charCodeAt(0) === 171) {\n                text = dict[text.substring(1)];\n                if (isString(text)) {\n                    text = compile(text);\n                }\n            }\n            else {\n                text = compile(text);\n            }\n            dict[key] = text;\n        }\n        return text(params);\n    }\n    __r(key, type) {\n        const render = this.__data.render;\n        if (isFunction(render)) {\n            if (!this.__deps) {\n                throw new Error('missing render depedents');\n            }\n            this.__data.render = render(...this.__deps);\n        }\n        const renderDict = render[type];\n        if (!(key in renderDict)) {\n            throw new Error(`missing i18n ${type} for key: ${key}`);\n        }\n        let fn = renderDict[key];\n        if (isString(fn)) {\n            // if fn is string, it's a reference to another key.\n            renderDict[key] = fn = renderDict[fn];\n        }\n        return fn;\n    }\n    /**\n     * Bind listener to LOCALE_CHANGE event,\n     * return a function auto remove this listener\n     * @param {Function} handler a listener bind to change event\n     * @param {Boolean} immediate call listener immediately, default is false.\n     * @returns {Function} a function auto remove listener\n     */\n    watch(listener, immediate) {\n        this.__on('change', listener);\n        if (immediate) {\n            listener(this.locale);\n        }\n        return () => {\n            this.__off('change', listener);\n        };\n    }\n}\n/* Singleton */\nexport const i18n = new I18nService();\n/**\n * Compiler helper function, the first parameter will be convert to i18n dictionary key,\n * and the whole function will be transform to `i18nService._t(key, params)`\n *\n * But after i18n locale resource script had been written, compiler won't transform it,\n * the function will work as text parse util.\n *\n * @param {String|Object} text\n * @param {Object} params\n */\nexport function _t(text, params) {\n    return params ? compile(text)(params) : text;\n}\n//# sourceMappingURL=i18n.js.map","import { isObject, isArray, arrayRemove, registerEvent, isFunction, clearImmediate, setImmediate, appendChildren, replaceChildren } from '../util';\nimport { $$ } from '../vm/common';\nimport { createComponent, attrs as createAttrs } from '../vm/proxy';\nimport { Messenger, MESSENGER_LISTENERS } from './messenger';\nimport { manager as StyleManager } from './style';\nimport { i18n as i18nService } from './i18n';\nexport var ComponentStates;\n(function (ComponentStates) {\n    ComponentStates[ComponentStates[\"INITIALIZE\"] = 0] = \"INITIALIZE\";\n    ComponentStates[ComponentStates[\"RENDERED\"] = 1] = \"RENDERED\";\n    ComponentStates[ComponentStates[\"WILLDESTROY\"] = 2] = \"WILLDESTROY\";\n    ComponentStates[ComponentStates[\"DESTROIED\"] = 3] = \"DESTROIED\";\n})(ComponentStates || (ComponentStates = {}));\nexport var ContextStates;\n(function (ContextStates) {\n    ContextStates[ContextStates[\"UNTOUCH\"] = 0] = \"UNTOUCH\";\n    ContextStates[ContextStates[\"TOUCHED\"] = 1] = \"TOUCHED\";\n    ContextStates[ContextStates[\"UNTOUCH_FREEZED\"] = 2] = \"UNTOUCH_FREEZED\";\n    ContextStates[ContextStates[\"TOUCHED_FREEZED\"] = 3] = \"TOUCHED_FREEZED\";\n})(ContextStates || (ContextStates = {}));\nexport const __ = Symbol('__');\n/** Bellow is utility functions **/\nexport function isComponent(v) {\n    return __ in v;\n}\nexport function assertRenderResults(renderResults) {\n    if (!isArray(renderResults) || renderResults.length === 0) {\n        throw new Error('Render results of component is empty');\n    }\n    return renderResults;\n}\nconst PRIVATE = Symbol();\nexport class Component extends Messenger {\n    /**\n     * ATTENTION!!!\n     *\n     * Don't use constructor directly, use static factory method `create(attrs)` instead.\n     */\n    constructor(attrs) {\n        if (!isObject(attrs) || !($$ in attrs)) {\n            throw new Error('Attributes passed to Component constructor must be ViewModel. See https://[todo]');\n        }\n        const compilerAttrs = attrs[__] || {};\n        super(compilerAttrs.listeners);\n        if (compilerAttrs.private !== PRIVATE) {\n            // 保证无法用 new XXX() 的形式生成组件实例。\n            throw new Error(`Constructor is private. Use static method \"${(this.constructor.name)}.create()\" instead.`);\n        }\n        createComponent(this);\n        this[__] = {\n            passedAttrs: attrs,\n            context: compilerAttrs.context,\n            contextState: ContextStates.UNTOUCH,\n            slots: compilerAttrs.slots,\n            state: ComponentStates.INITIALIZE,\n            rootNodes: [],\n            nonRootCompNodes: [],\n            refs: null,\n            relatedRefs: null,\n            updateNextMap: null,\n            compStylePid: null,\n            deregDOM: null,\n            deregI18N: null\n        };\n    }\n    static create(attrs) {\n        attrs = attrs || createAttrs({});\n        if (!isObject(attrs) || !($$ in attrs)) {\n            attrs = createAttrs(attrs || {});\n        }\n        if (!(__ in attrs)) {\n            attrs[__] = {};\n        }\n        attrs[__].private = PRIVATE;\n        return (new this(attrs))[$$].proxy;\n    }\n    /**\n     * Helper function to add i18n LOCALE_CHANGE listener.\n     * Return deregister function which will remove event listener.\n     * If you do dot call deregister function, it will be auto called when component is destroied.\n     * @param {Function} listener listener bind to LOCALE_CHANGE event.\n     * @param {Boolean} immediate call listener immediately, useful for component property initialize\n     * @returns {Function} deregister function to remove listener\n     */\n    __i18nWatch(listener, immediate) {\n        let deregs = this[__].deregI18N;\n        if (!deregs) {\n            this[__].deregI18N = deregs = [];\n        }\n        const unwatcher = i18nService.watch(() => {\n            // bind component to listener's function context.\n            listener.call(this);\n        }, immediate);\n        const deregister = () => {\n            unwatcher();\n            arrayRemove(deregs, deregister);\n        };\n        deregs.push(deregister);\n        return deregister;\n    }\n    /**\n     * Helper function to add dom event listener.\n     * Return deregister function which will remove event listener.\n     * If you do dot call deregister function, it will be auto called when component is destroied.\n     * @param {Boolean|Object} capture\n     * @returns {Function} deregister function to remove listener\n     */\n    __domAddListener($el, eventName, listener, capture) {\n        let deregs = this[__].deregDOM;\n        if (!deregs) {\n            this[__].deregDOM = deregs = [];\n        }\n        const lisDeregister = registerEvent($el, eventName, $event => {\n            // bind component to listener's function context.\n            listener.call(this, $event);\n        }, capture);\n        const deregister = () => {\n            lisDeregister();\n            arrayRemove(deregs, deregister);\n        };\n        deregs.push(deregister);\n        return deregister;\n    }\n    __domPassListeners(ignoredEventNames, targetEl) {\n        if (this[__].state !== ComponentStates.RENDERED) {\n            throw new Error('domPassListeners must be applied to component which is rendered.');\n        }\n        const lis = this[MESSENGER_LISTENERS];\n        if (!lis || lis.size === 0) {\n            return;\n        }\n        if (ignoredEventNames && !isArray(ignoredEventNames)) {\n            targetEl = ignoredEventNames;\n            ignoredEventNames = null;\n        }\n        else if (!targetEl) {\n            targetEl = this.__firstDOM;\n        }\n        if (targetEl.nodeType !== Node.ELEMENT_NODE) {\n            return;\n        }\n        lis.forEach((handlers, eventName) => {\n            if (ignoredEventNames && ignoredEventNames.indexOf(eventName) >= 0) {\n                return;\n            }\n            handlers.forEach(handler => {\n                const { opts, fn } = handler;\n                this.__domAddListener(targetEl, eventName, (handler.opts && (handler.opts.stop || handler.opts.prevent)\n                    ? function ($evt) {\n                        opts.stop && $evt.stopPropagation();\n                        opts.prevent && $evt.preventDefault();\n                        // this.domAddListener 会将 this 变成当前组件。所以需要显式地使用 fn.call(this) 来传递组件。\n                        fn.call(this, $evt);\n                    } : fn), handler.opts);\n            });\n        });\n    }\n    /**\n     * Get rendered DOM Node which should be apply transition.\n     *\n     * 返回在 transition 动画时应该被应用到的 DOM 节点。\n     */\n    get __transitionDOM() {\n        const el = this[__].rootNodes[0];\n        return isComponent(el) ? el.__transitionDOM : el;\n    }\n    /**\n     * Get first rendered DOM Node after Component is rendered.\n     *\n     * 按从左往右从上到下的深度遍历，找到的第一个 DOM 节点。\n     */\n    get __firstDOM() {\n        const el = this[__].rootNodes[0];\n        return isComponent(el) ? el.__firstDOM : el;\n    }\n    /**\n     * Get last rendered DOM Node after Component is rendered.\n     *\n     * 按从右往左，从上到下的深度遍历，找到的第一个 DOM 节点（相对于从左到右的顺序是最后一个 DOM 节点）。\n     */\n    get __lastDOM() {\n        const rns = this[__].rootNodes;\n        const el = rns[rns.length - 1];\n        return isComponent(el) ? el.__lastDOM : el;\n    }\n    /**\n     * 对模板进行渲染的函数，也可能是渲染编译器传递进来的默认渲染函数。\n     * 如果子组件需要进行自定义的渲染行为，需要重载该函数。\n     */\n    __render() {\n        const Clazz = this.constructor;\n        let renderFn = Clazz.template; // jinge-loader 已经将 string 转成了 RenderFn，此处强制转换类型以绕开 typescript.\n        if (!renderFn && this[__].slots) {\n            renderFn = this[__].slots.default;\n        }\n        if (!isFunction(renderFn)) {\n            throw new Error(`Template of ${Clazz.name} not found. Forget static getter \"template\"?`);\n        }\n        StyleManager.add(Clazz.style); // jinge-loader 已经将 string 转成了 ComponentStyle，此处强制转换类型以绕开 typescript.\n        return renderFn(this);\n    }\n    /**\n     * Render Component to HTMLElement.\n     * This method is usually used to render the entire application.\n     * See the `bootstrap()` function in `./bootstrap.js`.\n     *\n     * By default, the target element will be replaced(that means deleted).\n     * But you can disable it by pass `replaceMode`=`false`,\n     * which means component append to target as it's children.\n     */\n    __renderToDOM(targetEl, replaceMode = true) {\n        if (this[__].state !== ComponentStates.INITIALIZE) {\n            throw new Error('component has already been rendered.');\n        }\n        const rr = assertRenderResults(this.__render());\n        StyleManager.attch();\n        if (replaceMode) {\n            replaceChildren(targetEl.parentNode, rr, targetEl);\n        }\n        else {\n            appendChildren(targetEl, rr);\n        }\n        this.__handleAfterRender();\n    }\n    __destroy(removeDOM = true) {\n        const comp = this[__];\n        if (comp.state > ComponentStates.WILLDESTROY)\n            return;\n        comp.state = ComponentStates.WILLDESTROY;\n        /*\n         * once component is being destroied,\n         *   we mark component and it's passed-attrs un-notifiable to ignore\n         *   possible messeges occurs in BEFORE_DESTROY lifecycle callback.\n         */\n        this[$$].__notifiable = false;\n        comp.passedAttrs[$$].__notifiable = false;\n        // notify before destroy lifecycle\n        // 需要注意，必须先 NOTIFY 向外通知销毁消息，再执行 BEFORE_DESTROY 生命周期函数。\n        //   因为在 BEFORE_DESTROY 里会销毁外部消息回调函数里可能会用到的属性等资源。\n        this.__notify('before-destroy');\n        this.__beforeDestroy();\n        // destroy children(include child component and html nodes)\n        this.__handleBeforeDestroy(removeDOM);\n        // clear messenger listeners.\n        super.__off();\n        // remove component style\n        StyleManager.remove(this.constructor.style);\n        // destroy attrs passed to constructor\n        comp.passedAttrs[$$].__destroy();\n        comp.passedAttrs = null;\n        // destroy view model\n        this[$$].__destroy();\n        // clear next tick update setImmediate\n        if (comp.updateNextMap) {\n            comp.updateNextMap.forEach(imm => {\n                clearImmediate(imm);\n            });\n            comp.updateNextMap = null;\n        }\n        // destroy related refs:\n        if (comp.relatedRefs) {\n            comp.relatedRefs.forEach(info => {\n                const refs = info.origin[__].refs;\n                if (!refs)\n                    return;\n                const rns = refs.get(info.ref);\n                if (isArray(rns)) {\n                    arrayRemove(rns, info.node || this);\n                }\n                else {\n                    refs.delete(info.ref);\n                }\n            });\n            comp.relatedRefs = null;\n        }\n        // clear all dom event listener and i18n watcher\n        if (comp.deregDOM) {\n            comp.deregDOM.forEach(deregFn => deregFn());\n            comp.deregDOM = null;\n        }\n        if (comp.deregI18N) {\n            comp.deregI18N.forEach(deregFn => deregFn());\n            comp.deregI18N = null;\n        }\n        // clear properties\n        comp.state = ComponentStates.DESTROIED;\n        // unlink all symbol properties. maybe unnecessary.\n        comp.rootNodes = comp.nonRootCompNodes =\n            comp.refs = comp.slots = comp.context = null;\n    }\n    __handleBeforeDestroy(removeDOM = false) {\n        this[__].nonRootCompNodes.forEach(component => {\n            // it's not necessary to remove dom when destroy non-root component,\n            // because those dom nodes will be auto removed when their parent dom is removed.\n            component.__destroy(false);\n        });\n        let $parent;\n        this[__].rootNodes.forEach(node => {\n            if (isComponent(node)) {\n                node.__destroy(removeDOM);\n            }\n            else if (removeDOM) {\n                if (!$parent) {\n                    $parent = node.parentNode;\n                }\n                $parent.removeChild(node);\n            }\n        });\n    }\n    __handleAfterRender() {\n        /*\n         * Set NOTIFIABLE=true to enable ViewModel notify.\n         * Don't forgot to add these code if you override HANDLE_AFTER_RENDER\n         */\n        this[__].passedAttrs[$$].__notifiable = true;\n        this[$$].__notifiable = true;\n        this[__].rootNodes.forEach(n => {\n            if (isComponent(n))\n                n.__handleAfterRender();\n        });\n        this[__].nonRootCompNodes.forEach(n => {\n            if (isComponent(n))\n                n.__handleAfterRender();\n        });\n        this[__].state = ComponentStates.RENDERED;\n        this[__].contextState = this[__].contextState === ContextStates.TOUCHED ? ContextStates.TOUCHED_FREEZED : ContextStates.UNTOUCH_FREEZED; // has been rendered, can't modify context\n        this.__afterRender();\n        this.__notify('after-render');\n    }\n    __updateIfNeed(handler, nextTick = true) {\n        if (this[__].state !== ComponentStates.RENDERED) {\n            return;\n        }\n        if (handler === false) {\n            return this.__update();\n        }\n        if (!isFunction(handler)) {\n            handler = this.__update;\n        }\n        if (!nextTick) {\n            handler.call(this);\n            return;\n        }\n        let ntMap = this[__].updateNextMap;\n        if (!ntMap)\n            ntMap = new Map();\n        if (ntMap.has(handler)) {\n            // already in queue.\n            return;\n        }\n        ntMap.set(handler, setImmediate(() => {\n            ntMap.delete(handler);\n            handler.call(this);\n        }));\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    __update(first) {\n        // by default, do nothing.\n    }\n    __setContext(key, value, forceOverride = false) {\n        if (this[__].contextState === ContextStates.UNTOUCH_FREEZED || this[__].contextState === ContextStates.TOUCHED_FREEZED) {\n            throw new Error('Can\\'t setContext after component has been rendered. Try put setContext code into constructor.');\n        }\n        if (this[__].contextState === ContextStates.UNTOUCH) {\n            // we copy context to make sure child component do not modify context passed from parent.\n            // we do not copy it by default until setContext function is called, because it unnecessary to waste memory if\n            // child component do not modify the context.\n            this[__].context = Object.assign({}, this[__].context);\n            this[__].contextState = ContextStates.TOUCHED; // has been copied.\n        }\n        if (key in this[__].context) {\n            // override exist may case hidden bug hard to debug.\n            // so we force programmer to pass third argument to\n            //   tell us he/she know what he/she is doing.\n            if (!forceOverride) {\n                throw new Error(`Contenxt with key: ${key.toString()} is exist. Pass third argument forceOverride=true to override it.`);\n            }\n        }\n        this[__].context[key] = value;\n    }\n    __getContext(key) {\n        return this[__].context ? this[__].context[key] : null;\n    }\n    /**\n     * This method is used for compiler generated code.\n     * Do not use it manually.\n     */\n    __setRef(ref, el, relatedComponent) {\n        let rns = this[__].refs;\n        if (!rns) {\n            this[__].refs = rns = new Map();\n        }\n        let elOrArr = rns.get(ref);\n        if (!elOrArr) {\n            rns.set(ref, el);\n        }\n        else if (isArray(elOrArr)) {\n            elOrArr.push(el);\n        }\n        else {\n            elOrArr = [elOrArr, el];\n            rns.set(ref, elOrArr);\n        }\n        const isComp = isComponent(el);\n        if (!isComp && this === relatedComponent) {\n            return;\n        }\n        /**\n         * 如果被 ref: 标记的元素（el）本身就是组件（Component）节点，\n         *   那么 el 自身就是关联组件，el 自身在被销毁时可以执行删除关联 refs 的操作；\n         * 如果 el 是 DOM 节点，则必须将它添加到关联组件（比如 <if>） relatedComponent 里，\n         *   在 relatedComponent 被销毁时执行关联 refs 的删除。\n         */\n        let rbs = (isComp ? el : relatedComponent)[__].relatedRefs;\n        if (!rbs) {\n            (isComp ? el : relatedComponent)[__].relatedRefs = rbs = [];\n        }\n        rbs.push({\n            origin: this,\n            ref,\n            node: isComp ? null : el\n        });\n    }\n    /**\n     * Get child node(or nodes) marked by 'ref:' attribute in template\n     */\n    __getRef(ref) {\n        if (this[__].state !== ComponentStates.RENDERED) {\n            // eslint-disable-next-line no-console\n            console.warn(`Warning: call __getRef before component '${this.constructor.name}' rendered will get nothing. see https://[TODO]`);\n        }\n        return this[__].refs ? this[__].refs.get(ref) : null;\n    }\n    __addStylePid(inheritIds, styleId) {\n        if (!inheritIds && !styleId)\n            return;\n        let ids = this[__].compStylePid;\n        if (!ids) {\n            ids = this[__].compStylePid = Object.create(null);\n        }\n        if (inheritIds) {\n            Object.assign(ids, inheritIds);\n        }\n        if (styleId) {\n            ids[styleId] = '';\n        }\n    }\n    /**\n     * lifecycle hook, called after rendered.\n     */\n    __afterRender() {\n        // lifecycle hook, default do nothing.\n    }\n    /**\n     * lifecycle hook, called before destroy.\n     */\n    __beforeDestroy() {\n        // lifecycle hook, default do nothing.\n    }\n}\n//# sourceMappingURL=component.js.map","export var TransitionStates;\n(function (TransitionStates) {\n    TransitionStates[TransitionStates[\"ENTERING\"] = 1] = \"ENTERING\";\n    TransitionStates[TransitionStates[\"ENTERED\"] = 2] = \"ENTERED\";\n    TransitionStates[TransitionStates[\"LEAVING\"] = 3] = \"LEAVING\";\n    TransitionStates[TransitionStates[\"LEAVED\"] = 4] = \"LEAVED\";\n})(TransitionStates || (TransitionStates = {}));\nexport function getDurationType(el) {\n    const cst = getComputedStyle(el);\n    if (cst.getPropertyValue('transition-duration') !== '0s') {\n        return 'transitionend';\n    }\n    else if (cst.getPropertyValue('animation-duration') !== '0s') {\n        return 'animationend';\n    }\n    return null;\n}\nfunction parseDuration(v) {\n    if (/ms$/.test(v)) {\n        return parseInt(v);\n    }\n    else if (/s$/.test(v)) {\n        return parseFloat(v) * 1000;\n    }\n    else {\n        return 0;\n    }\n}\nexport function getDuration(el) {\n    const cst = getComputedStyle(el);\n    let dur = cst.getPropertyValue('transition-duration');\n    if (dur !== '0s') {\n        return {\n            type: 'transitionend',\n            time: parseDuration(dur)\n        };\n    }\n    dur = cst.getPropertyValue('animation-duration');\n    if (dur !== '0s') {\n        return {\n            type: 'animationend',\n            time: parseDuration(dur)\n        };\n    }\n    return {\n        type: null,\n        time: 0\n    };\n}\n//# sourceMappingURL=transition.js.map","import {\n  $$ as __$$_cd786ab284ed\n} from '../vm/common';import { attrs } from '../vm';\nimport { __, isComponent, Component, assertRenderResults } from '../core/component';\nimport { TransitionStates, getDurationType } from '../core/transition';\nimport { createFragment, addEvent, setImmediate, removeEvent } from '../util';\nfunction createEl(renderFn, context, parentStyleIds) {\n    const el = Component.create(attrs({\n        [__]: {\n            context,\n            slots: {\n                default: renderFn\n            }\n        }\n    }));\n    if (parentStyleIds) {\n        el.__addStylePid(parentStyleIds);\n    }\n    return el;\n}\nfunction renderSwitch(component) {\n    const value = component._currentValue;\n    const acs = component[__].slots;\n    if (component.transition && acs) {\n        component._transitionMap = new Map();\n        for (const k in acs) {\n            component._transitionMap.set(k, [\n                k === value ? TransitionStates.ENTERED : TransitionStates.LEAVED,\n                null // element\n            ]);\n        }\n        component._previousValue = value;\n        component._onEndHandler = component.onTransitionEnd.bind(component);\n    }\n    const renderFn = acs ? acs[value] : null;\n    const roots = component[__].rootNodes;\n    if (!renderFn) {\n        roots.push(document.createComment('empty'));\n        return roots;\n    }\n    const el = createEl(renderFn, component[__].context, component[__].compStylePid);\n    roots.push(el);\n    return el.__render();\n}\nfunction doUpdate(component) {\n    var _a;\n    const roots = component[__].rootNodes;\n    const el = roots[0];\n    const isComp = isComponent(el);\n    const firstDOM = (isComp ? el.__firstDOM : el);\n    const parentDOM = (isComp ? firstDOM : el).parentNode;\n    const renderFn = (_a = component[__].slots) === null || _a === void 0 ? void 0 : _a[component._currentValue];\n    if (renderFn) {\n        const newEl = createEl(renderFn, component[__].context, component[__].compStylePid);\n        const nodes = assertRenderResults(newEl.__render());\n        parentDOM.insertBefore(nodes.length > 1 ? createFragment(nodes) : nodes[0], firstDOM);\n        roots[0] = newEl;\n    }\n    else {\n        roots[0] = document.createComment('empty');\n        parentDOM.insertBefore(roots[0], firstDOM);\n    }\n    if (isComp) {\n        el.__destroy();\n    }\n    else {\n        parentDOM.removeChild(firstDOM);\n    }\n    renderFn && roots[0].__handleAfterRender();\n    component.__notify('branch-switched', component._branch);\n}\nfunction cancelTs(t, tn, e, component) {\n    const el = t[1];\n    if (el.nodeType !== Node.ELEMENT_NODE) {\n        return;\n    }\n    const onEnd = component._onEndHandler;\n    el.classList.remove(tn + (e ? '-enter' : '-leave'));\n    el.classList.remove(tn + (e ? '-enter-active' : '-leave-active'));\n    removeEvent(el, 'transitionend', onEnd);\n    removeEvent(el, 'animationend', onEnd);\n    component.__notify('transition', e ? 'enter-cancelled' : 'leave-cancelled', el);\n}\nfunction startTs(t, tn, e, component) {\n    const el = t[1];\n    const onEnd = component._onEndHandler;\n    if (el.nodeType !== Node.ELEMENT_NODE) {\n        onEnd();\n        return;\n    }\n    const classOfStart = tn + (e ? '-enter' : '-leave');\n    const classOfActive = tn + (e ? '-enter-active' : '-leave-active');\n    el.classList.add(classOfStart);\n    // force render by calling getComputedStyle\n    getDurationType(el);\n    el.classList.add(classOfActive);\n    const tsEndName = getDurationType(el);\n    if (!tsEndName) {\n        onEnd();\n        return;\n    }\n    t[0] = e ? TransitionStates.ENTERING : TransitionStates.LEAVING;\n    addEvent(el, tsEndName, onEnd);\n    component.__notify('transition', e ? 'before-enter' : 'before-leave', el);\n    setImmediate(() => {\n        component.__notify('transition', e ? 'enter' : 'leave', el);\n    });\n}\nfunction updateSwitchWithTransition(component) {\n    const value = component._currentValue;\n    const pv = component._previousValue;\n    const tn = component.transition;\n    let pt = component._transitionMap.get(pv);\n    if (!pt) {\n        pt = [\n            pv === 'else' ? TransitionStates.LEAVED : TransitionStates.ENTERED,\n            null // element\n        ];\n        component._transitionMap.set(pv, pt);\n    }\n    // debugger;\n    if (pt[0] === TransitionStates.ENTERING) {\n        if (value === pv)\n            return;\n        cancelTs(pt, tn, true, component);\n        startTs(pt, tn, false, component);\n    }\n    else if (pt[0] === TransitionStates.LEAVING) {\n        if (value !== pv)\n            return;\n        cancelTs(pt, tn, false, component);\n        startTs(pt, tn, true, component);\n    }\n    else if (pt[0] === TransitionStates.ENTERED) {\n        pt[1] = component.__transitionDOM;\n        startTs(pt, tn, false, component);\n    }\n    else if (pt[0] === TransitionStates.LEAVED) {\n        pt[1] = component.__transitionDOM;\n        startTs(pt, tn, true, component);\n    }\n}\nfunction updateSwitch(component) {\n    if (!isComponent(component[__].rootNodes[0]) && (!component[__].slots || !component[__].slots[component._currentValue])) {\n        return;\n    }\n    if (component._transitionMap) {\n        updateSwitchWithTransition(component);\n        return;\n    }\n    doUpdate(component);\n}\nfunction updateSwitchOnTransitionEnd(component) {\n    // console.log('on end')\n    const value = component._currentValue;\n    const pv = component._previousValue;\n    const tn = component.transition;\n    const pt = component._transitionMap.get(pv);\n    const e = pt[0] === TransitionStates.ENTERING;\n    const el = pt[1];\n    if (el.nodeType === Node.ELEMENT_NODE) {\n        removeEvent(el, 'transitionend', component._onEndHandler);\n        removeEvent(el, 'animationend', component._onEndHandler);\n        el.classList.remove(tn + (e ? '-enter' : '-leave'));\n        el.classList.remove(tn + (e ? '-enter-active' : '-leave-active'));\n        component.__notify('transition', e ? 'after-enter' : 'after-leave');\n    }\n    pt[0] = e ? TransitionStates.ENTERED : TransitionStates.LEAVED;\n    if (e)\n        return;\n    doUpdate(component);\n    component._previousValue = value;\n    const ct = component._transitionMap.get(value);\n    if (!ct) {\n        return;\n    }\n    const fd = component.__transitionDOM;\n    if (fd.nodeType !== Node.ELEMENT_NODE) {\n        ct[0] = TransitionStates.ENTERED;\n        return;\n    }\n    ct[1] = fd;\n    startTs(ct, tn, true, component);\n}\nfunction destroySwitch(component) {\n    if (component._transitionMap) {\n        component._transitionMap.forEach(ts => {\n            const el = ts[1];\n            if (el) {\n                removeEvent(el, 'transitionend', component._onEndHandler);\n                removeEvent(el, 'animationend', component._onEndHandler);\n            }\n        });\n        component._transitionMap = null;\n    }\n}\nexport class IfComponent extends Component {\n    constructor(attrs) {\n      super(attrs);\n      const __vm_cd786ab284ed = this[__$$_cd786ab284ed].proxy;\n      __vm_cd786ab284ed._currentValue = 'default';\n      __vm_cd786ab284ed._onEndHandler = null;\n      __vm_cd786ab284ed._transitionMap = null;\n      __vm_cd786ab284ed._previousValue = null;\n      const fn_5_cd786ab284ed = () => {\n        __vm_cd786ab284ed.expect = attrs.expect;\n      };\n      fn_5_cd786ab284ed();\n      attrs[__$$_cd786ab284ed].__watch('expect', fn_5_cd786ab284ed);\n      const fn_6_cd786ab284ed = () => {\n        __vm_cd786ab284ed.transition = attrs.transition;\n      };\n      fn_6_cd786ab284ed();\n      attrs[__$$_cd786ab284ed].__watch('transition', fn_6_cd786ab284ed);\n    }\n    get expect() {\n        return this._currentValue === 'default';\n    }\n    set expect(value) {\n        const v = value ? 'default' : 'else';\n        if (this._currentValue === v)\n            return;\n        this._currentValue = v;\n        this.__updateIfNeed();\n    }\n    get _branch() {\n        return this.expect;\n    }\n    onTransitionEnd() {\n        updateSwitchOnTransitionEnd(this);\n    }\n    __render() {\n        return renderSwitch(this);\n    }\n    __update() {\n        updateSwitch(this);\n    }\n    __beforeDestroy() {\n        destroySwitch(this);\n    }\n}\nexport class SwitchComponent extends Component {\n    constructor(attrs) {\n      super(attrs);\n      const __vm_cd786ab284ed = this[__$$_cd786ab284ed].proxy;\n      __vm_cd786ab284ed._onEndHandler = null;\n      __vm_cd786ab284ed._transitionMap = null;\n      __vm_cd786ab284ed._previousValue = null;\n      __vm_cd786ab284ed._currentValue = null;\n      const fn_5_cd786ab284ed = () => {\n        __vm_cd786ab284ed.test = attrs.test;\n      };\n      fn_5_cd786ab284ed();\n      attrs[__$$_cd786ab284ed].__watch('test', fn_5_cd786ab284ed);\n      const fn_6_cd786ab284ed = () => {\n        __vm_cd786ab284ed.transition = attrs.transition;\n      };\n      fn_6_cd786ab284ed();\n      attrs[__$$_cd786ab284ed].__watch('transition', fn_6_cd786ab284ed);\n    }\n    get test() {\n        return this._currentValue;\n    }\n    set test(v) {\n        const acs = this[__].slots;\n        if (!acs || !(v in acs)) {\n            v = 'default';\n        }\n        if (this._currentValue === v)\n            return;\n        this._currentValue = v;\n        this.__updateIfNeed();\n    }\n    get _branch() {\n        return this.test;\n    }\n    onTransitionEnd() {\n        updateSwitchOnTransitionEnd(this);\n    }\n    __render() {\n        return renderSwitch(this);\n    }\n    __update() {\n        updateSwitch(this);\n    }\n    __beforeDestroy() {\n        destroySwitch(this);\n    }\n}\n//# sourceMappingURL=if.js.map","import { createElement, createTextNode } from '../util';\nimport { i18n as i18nService } from './i18n';\nimport { __ } from './component';\nexport function emptyRenderFn(component) {\n    const el = document.createComment('empty');\n    component[__].rootNodes.push(el);\n    return el;\n}\nexport function errorRenderFn(component) {\n    const el = createElement('span', {\n        style: 'color: red !important;'\n    });\n    el.textContent = 'template parsing failed! please check webpack log.';\n    component[__].rootNodes.push(el);\n    return el;\n}\nexport function textRenderFn(component, txtContent) {\n    const el = createTextNode(txtContent);\n    component[__].rootNodes.push(el);\n    return el;\n}\nexport function i18nRenderFn(component, key, isRoot = false) {\n    const el = createTextNode();\n    const fn = () => {\n        el.textContent = i18nService.__t(key);\n    };\n    fn();\n    component.__i18nWatch(fn);\n    isRoot && component[__].rootNodes.push(el);\n    return el;\n}\n//# sourceMappingURL=render_fns.js.map","import {  createElement as createElement_cd786ab284ed, __ as ___cd786ab284ed, createElementWithoutAttrs as createElementWithoutAttrs_cd786ab284ed, attrs as attrs_cd786ab284ed, textRenderFn as textRenderFn_cd786ab284ed, $$ as $$_cd786ab284ed, assertRenderResults as assertRenderResults_cd786ab284ed, setAttribute as setAttribute_cd786ab284ed, createTextNode as createTextNode_cd786ab284ed, setText as setText_cd786ab284ed } from 'jinge';\nimport { IfComponent as IfComponent_19c1b8dc4402undefined__as, SwitchComponent as SwitchComponent_19c1b8dc4402undefined__as } from 'jinge';\nexport default function(component) {\n  const vm_0 = component;\n  return [\n  (() => {\n    const el = createElement_cd786ab284ed(\n      \"h2\",\n      component[___cd786ab284ed].compStylePid,\n      \"Simple If\"\n    );\n    component[___cd786ab284ed].rootNodes.push(el);\n    return el;\n  })(),\n  (() => {\n    const el = createElement_cd786ab284ed(\n      \"div\",\n      component[___cd786ab284ed].compStylePid,\n      createElementWithoutAttrs_cd786ab284ed(\n        \"p\",\n        ...(() => {\n          const attrs = attrs_cd786ab284ed({\n            [___cd786ab284ed]: {\n              context: component[___cd786ab284ed].context,\n              slots: {\n                'default': function(component) {\n              return [\n              textRenderFn_cd786ab284ed(component, \"It's greater than 5.\")\n              ];\n            }\n            }\n            },\n            expect: null\n          });\n          const fn_0 = () => {\n            attrs.expect = vm_0.n > 5;\n          };\n          fn_0();\n          vm_0[$$_cd786ab284ed].__watch([\"n\"], fn_0, component[$$_cd786ab284ed]);\n          const el = IfComponent_19c1b8dc4402undefined__as.create(attrs);\n          component[___cd786ab284ed].nonRootCompNodes.push(el);\n          return assertRenderResults_cd786ab284ed(el.__render());\n        })(),\n        ...(() => {\n          const attrs = attrs_cd786ab284ed({\n            [___cd786ab284ed]: {\n              context: component[___cd786ab284ed].context,\n              slots: {\n                'default': function(component) {\n              return [\n              textRenderFn_cd786ab284ed(component, \"It's less or equal than 5.\")\n              ];\n            }\n            }\n            },\n            expect: null\n          });\n          const fn_0 = () => {\n            attrs.expect = vm_0.n <= 5;\n          };\n          fn_0();\n          vm_0[$$_cd786ab284ed].__watch([\"n\"], fn_0, component[$$_cd786ab284ed]);\n          const el = IfComponent_19c1b8dc4402undefined__as.create(attrs);\n          component[___cd786ab284ed].nonRootCompNodes.push(el);\n          return assertRenderResults_cd786ab284ed(el.__render());\n        })()\n      )\n    );\n    component[___cd786ab284ed].rootNodes.push(el);\n    return el;\n  })(),\n  (() => {\n    const el = createElement_cd786ab284ed(\n      \"h2\",\n      component[___cd786ab284ed].compStylePid,\n      \"Multiple Elements Under If\"\n    );\n    component[___cd786ab284ed].rootNodes.push(el);\n    return el;\n  })(),\n  (() => {\n    const el = createElement_cd786ab284ed(\n      \"div\",\n      component[___cd786ab284ed].compStylePid,\n      createElementWithoutAttrs_cd786ab284ed(\n        \"p\",\n        ...(() => {\n          const attrs = attrs_cd786ab284ed({\n            [___cd786ab284ed]: {\n              context: component[___cd786ab284ed].context,\n              slots: {\n                'default': function(component) {\n              return [\n              textRenderFn_cd786ab284ed(component, \"\\n  It's\\n  \"),\n              (() => {\n                const el = createElement_cd786ab284ed(\n                  \"span\",\n                  component[___cd786ab284ed].compStylePid,\n                  \"greater than \"\n                );\n                const fn_0 = () => {\n                  setAttribute_cd786ab284ed(el, \"style\", 'color: ' + (vm_0.n >= 8 ? 'red' : 'blue'));\n                };\n                fn_0();\n                vm_0[$$_cd786ab284ed].__watch([\"n\"], fn_0, component[$$_cd786ab284ed]);\n                component[___cd786ab284ed].rootNodes.push(el);\n                return el;\n              })(),\n              (() => {\n                const el = createElement_cd786ab284ed(\n                  \"span\",\n                  component[___cd786ab284ed].compStylePid,\n                  \"5.\"\n                );\n                component[___cd786ab284ed].rootNodes.push(el);\n                return el;\n              })()\n              ];\n            }\n            }\n            },\n            expect: null\n          });\n          const fn_0 = () => {\n            attrs.expect = vm_0.n > 5;\n          };\n          fn_0();\n          vm_0[$$_cd786ab284ed].__watch([\"n\"], fn_0, component[$$_cd786ab284ed]);\n          const el = IfComponent_19c1b8dc4402undefined__as.create(attrs);\n          component[___cd786ab284ed].nonRootCompNodes.push(el);\n          return assertRenderResults_cd786ab284ed(el.__render());\n        })()\n      )\n    );\n    component[___cd786ab284ed].rootNodes.push(el);\n    return el;\n  })(),\n  (() => {\n    const el = createElement_cd786ab284ed(\n      \"h2\",\n      component[___cd786ab284ed].compStylePid,\n      \"If and Else\"\n    );\n    component[___cd786ab284ed].rootNodes.push(el);\n    return el;\n  })(),\n  (() => {\n    const el = createElement_cd786ab284ed(\n      \"div\",\n      component[___cd786ab284ed].compStylePid,\n      createElementWithoutAttrs_cd786ab284ed(\n        \"p\",\n        ...(() => {\n          const attrs = attrs_cd786ab284ed({\n            [___cd786ab284ed]: {\n              context: component[___cd786ab284ed].context,\n              slots: {\n                'default': function(component) {\n              return [\n              textRenderFn_cd786ab284ed(component, \"\\n      It's greater than \"),\n              (() => {\n                const el = createElement_cd786ab284ed(\n                  \"span\",\n                  component[___cd786ab284ed].compStylePid,\n                  \"5\"\n                );\n                component[___cd786ab284ed].rootNodes.push(el);\n                return el;\n              })()\n              ];\n            },\n                'else': function(component) {\n              return [\n              textRenderFn_cd786ab284ed(component, \"\\n      It's less or equal than \"),\n              (() => {\n                const el = createElement_cd786ab284ed(\n                  \"span\",\n                  component[___cd786ab284ed].compStylePid,\n                  \"5\"\n                );\n                component[___cd786ab284ed].rootNodes.push(el);\n                return el;\n              })()\n              ];\n            }\n            }\n            },\n            expect: null\n          });\n          const fn_0 = () => {\n            attrs.expect = vm_0.n > 5;\n          };\n          fn_0();\n          vm_0[$$_cd786ab284ed].__watch([\"n\"], fn_0, component[$$_cd786ab284ed]);\n          const el = IfComponent_19c1b8dc4402undefined__as.create(attrs);\n          component[___cd786ab284ed].nonRootCompNodes.push(el);\n          return assertRenderResults_cd786ab284ed(el.__render());\n        })()\n      ),\n      createElementWithoutAttrs_cd786ab284ed(\n        \"p\",\n        ...(() => {\n          const attrs = attrs_cd786ab284ed({\n            [___cd786ab284ed]: {\n              context: component[___cd786ab284ed].context,\n              listeners: {\n                \"branch-switched\": [function(...args) {vm_0.log('if updated', ...args)}, null]\n            },\n              slots: {\n                'default': function(component) {\n              return [\n              (() => {\n                const el = createElement_cd786ab284ed(\n                  \"span\",\n                  component[___cd786ab284ed].compStylePid,\n                  \"It's greater than 5.\"\n                );\n                component[___cd786ab284ed].rootNodes.push(el);\n                return el;\n              })()\n              ];\n            },\n                'else': function(component) {\n              return [\n              (() => {\n                const el = createElement_cd786ab284ed(\n                  \"span\",\n                  component[___cd786ab284ed].compStylePid,\n                  \"It's less or equal than 5.\"\n                );\n                component[___cd786ab284ed].rootNodes.push(el);\n                return el;\n              })()\n              ];\n            }\n            }\n            },\n            expect: null\n          });\n          const fn_0 = () => {\n            attrs.expect = vm_0.n > 5;\n          };\n          fn_0();\n          vm_0[$$_cd786ab284ed].__watch([\"n\"], fn_0, component[$$_cd786ab284ed]);\n          const el = IfComponent_19c1b8dc4402undefined__as.create(attrs);\n          component[___cd786ab284ed].nonRootCompNodes.push(el);\n          return assertRenderResults_cd786ab284ed(el.__render());\n        })()\n      )\n    );\n    component[___cd786ab284ed].rootNodes.push(el);\n    return el;\n  })(),\n  (() => {\n    const el = createElement_cd786ab284ed(\n      \"h2\",\n      component[___cd786ab284ed].compStylePid,\n      \"Use class-name instead of If\"\n    );\n    component[___cd786ab284ed].rootNodes.push(el);\n    return el;\n  })(),\n  (() => {\n    const el = createElement_cd786ab284ed(\n      \"div\",\n      component[___cd786ab284ed].compStylePid,\n      createElementWithoutAttrs_cd786ab284ed(\n        \"p\",\n        (() => {\n          const el = createElementWithoutAttrs_cd786ab284ed(\n            \"span\",\n            \"It's greater than 5.\"\n          );\n          const fn_0 = () => {\n            setAttribute_cd786ab284ed(el, \"class\", vm_0.n <= 5 ? 'hide' : '');\n          };\n          fn_0();\n          vm_0[$$_cd786ab284ed].__watch([\"n\"], fn_0, component[$$_cd786ab284ed]);\n          return el;\n        })(),\n        (() => {\n          const el = createElementWithoutAttrs_cd786ab284ed(\n            \"span\",\n            \"It's less or equal than 5.\"\n          );\n          const fn_0 = () => {\n            setAttribute_cd786ab284ed(el, \"class\", vm_0.n > 5 ? 'hide' : '');\n          };\n          fn_0();\n          vm_0[$$_cd786ab284ed].__watch([\"n\"], fn_0, component[$$_cd786ab284ed]);\n          return el;\n        })()\n      )\n    );\n    component[___cd786ab284ed].rootNodes.push(el);\n    return el;\n  })(),\n  (() => {\n    const el = createElement_cd786ab284ed(\n      \"h2\",\n      component[___cd786ab284ed].compStylePid,\n      \"Switch-Case\"\n    );\n    component[___cd786ab284ed].rootNodes.push(el);\n    return el;\n  })(),\n  (() => {\n    const el = createElement_cd786ab284ed(\n      \"div\",\n      component[___cd786ab284ed].compStylePid,\n      createElementWithoutAttrs_cd786ab284ed(\n        \"p\",\n        ...(() => {\n          const attrs = attrs_cd786ab284ed({\n            [___cd786ab284ed]: {\n              context: component[___cd786ab284ed].context,\n              listeners: {\n                \"branch-switched\": [function(...args) {vm_0.log('switch updated', ...args)}, null]\n            },\n              slots: {\n                '0': function(component) {\n              return [\n              textRenderFn_cd786ab284ed(component, \"零\")\n              ];\n            },\n                '3': function(component) {\n              return [\n              textRenderFn_cd786ab284ed(component, \"三\")\n              ];\n            },\n                '8': function(component) {\n              return [\n              (() => {\n                const el = createElement_cd786ab284ed(\n                  \"p\",\n                  component[___cd786ab284ed].compStylePid,\n                  \"八\"\n                );\n                component[___cd786ab284ed].rootNodes.push(el);\n                return el;\n              })()\n              ];\n            },\n                'default': function(component) {\n              return [\n              (() => {\n                const el = createTextNode_cd786ab284ed();\n                const fn_0 = () => {\n                  setText_cd786ab284ed(el, vm_0.n);\n                };\n                fn_0();\n                vm_0[$$_cd786ab284ed].__watch([\"n\"], fn_0, component[$$_cd786ab284ed]);\n                component[___cd786ab284ed].rootNodes.push(el);\n                return el;\n              })(),\n              ...(() => {\n                const attrs = attrs_cd786ab284ed({\n                  [___cd786ab284ed]: {\n                    context: component[___cd786ab284ed].context,\n                    slots: {\n                      'default': function(component) {\n                    return [\n                    textRenderFn_cd786ab284ed(component, \" > 5\")\n                    ];\n                  }\n                  }\n                  },\n                  expect: null\n                });\n                const fn_0 = () => {\n                  attrs.expect = vm_0.n > 5;\n                };\n                fn_0();\n                vm_0[$$_cd786ab284ed].__watch([\"n\"], fn_0, component[$$_cd786ab284ed]);\n                const el = IfComponent_19c1b8dc4402undefined__as.create(attrs);\n                el.__addStylePid(component[___cd786ab284ed].compStylePid);\n                component[___cd786ab284ed].rootNodes.push(el);\n                return assertRenderResults_cd786ab284ed(el.__render());\n              })()\n              ];\n            }\n            }\n            },\n            test: null\n          });\n          const fn_0 = () => {\n            attrs.test = vm_0.n;\n          };\n          fn_0();\n          vm_0[$$_cd786ab284ed].__watch([\"n\"], fn_0, component[$$_cd786ab284ed]);\n          const el = SwitchComponent_19c1b8dc4402undefined__as.create(attrs);\n          component[___cd786ab284ed].nonRootCompNodes.push(el);\n          return assertRenderResults_cd786ab284ed(el.__render());\n        })()\n      )\n    );\n    component[___cd786ab284ed].rootNodes.push(el);\n    return el;\n  })()\n  ];\n}","export function bootstrap(ComponentClazz, dom, attrs) {\n    ComponentClazz.create(attrs).__renderToDOM(dom, dom !== document.body);\n}\n//# sourceMappingURL=bootstrap.js.map","import {\n  $$ as __$$_cd786ab284ed\n} from 'jinge';import {\n  Component,\n  bootstrap\n} from 'jinge';\n\nimport _tpl from './app.html';\n\nclass App extends Component {\n  static get template() {\n    return _tpl;\n  }\n  constructor(args) {\n    super(args);\n    const __vm_cd786ab284ed = this[__$$_cd786ab284ed].proxy;\n    __vm_cd786ab284ed.n = 0;\n    setInterval(() => {\n      __vm_cd786ab284ed.n = Math.random() * 10 | 0;\n      console.log(__vm_cd786ab284ed.n);\n    }, 1000);\n  }\n  log(...args) {\n    console.log(...args);\n  }\n}\n\nbootstrap(App, document.getElementById('root-app'));\n"],"sourceRoot":""}