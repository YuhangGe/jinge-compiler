!function(t){var n={};function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:o})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)e.d(o,r,function(n){return t[n]}.bind(null,r));return o},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=0)}([function(t,n,e){"use strict";function o(t){return typeof t}function r(t){return"object"===o(t)}function i(t){return"string"===o(t)}function s(t){return Array.isArray(t)}function c(t,n){return t instanceof n}function u(t){return Object.create(t||null)}function l(t,n){return t.indexOf(n)}e.r(n);const h="default",f="empty";function a(t){return window.Symbol(t)}function d(t){throw t&&console.error(t),new Error("assert failed!")}function p(t,n,e=0){return t.startsWith(n,e)}const g=a(),m=a(),w=a(),b=a(),y=a(),x=a(),E=a(),v=a();function k(t,n,e=!1){const o=s(n)?n:n.split(".");return 0===o.length?null:function t(n,e,o,r){const i=e.length-1;if(i<0)return null;const s=""+e[o];if(p(s,"_"))return console.error('WARN: property name startsWith char "_" is private/once-used property, ignored get/set listener.'),null;let c=n[s];if(!c){if(!r)return null;c=n[s]=u(),Object.assign(c,{[x]:null,[E]:[],[v]:u()})}return i===o?c:t(c[v],e,o+1,r)}(t[y],o,0,e)}function O(t,n,e){const o=k(t,n,!0);var r,i;l(r=o[E],i=e)>=0||r.push(i)}function _(t,n,e){const o=k(t,n);o&&(e?function(t,n){const e=l(t,n);e<0||t.splice(e,1)}(o[E],e):o[E].length=0)}function C(t){!function(t){for(const n in t){const e=t[n];if(!(x in e))return;e[x]&&(j(e[x]),e[x]=null),e[E].length=0,C(e[v]),e[v]=null,t[n]=null}}(t[y])}const M=window.setImmediate||window.setTimeout,j=window.clearImmediate||window.clearTimeout;function D(t,n){const e=k(t,n);e&&function t(n){n[x]&&(j(n[x]),n[x]=null),n[E].length>0&&(n[x]=M(()=>{n[x]=null,n[E].forEach(t=>t())}));const e=n[v];for(const n in e)t(e[n])}(e)}const S=a(),A=[];function $(t){return null!==t&&r(t)&&S in t}function P(t){return i(t)&&!p(t,"_")}function N(t,n,e){const o=t[S];for(let t=0;t<o.length;t++)if(o[t][0]===n&&o[t][1]===e)return;o.push([n,e])}function T(t,n,e){const o=t[S];for(let t=0;t<o.length;t++)if(o[t][0]===n&&o[t][1]===e)return void o.splice(t,1)}function R(t,n){g in t&&t[g](n),t[S].forEach(t=>{const[e,o]=t;R(e,s(n)?[o,...n]:[o,n])})}function V(t,n,e){if(!P(n))return t[n]=e,!0;const r=o(e),i=$(e);if(null!==e&&"object"===r&&!i)throw new Error("public property of ViewModel target must also be ViewModel");const s=t[n];return $(s)&&T(s,t,n),t[n]=e,i&&N(e,t,n),R(t,n),!0}const B={set:V},F={push:2,pop:2,shift:2,unshift:2,splice:3,reverse:2,sort:2,fill:2,slice:1,concat:1,map:1},I={get(t,n){if(n in F){const e=F[n],o=t[n];return function(...n){const r=o.call(t,...n);return(2&e)>0&&t[S].forEach(t=>R(t[0],t[1])),(1&e)>0&&s(r)&&!(S in r)?J(r):r}}return t[n]},set:function(t,n,e){return"length"===n?function(t,n){if("number"!==o(e=n)||Number.isNaN(e)||!Number.isFinite(e))throw new Error("bad argument. array length must be validate number.");var e;const r=t.length;if(r>n)for(let e=n;e<r;e++){const n=t[e];$(n)&&T(n,t,e)}return t.length=n,r!==n&&t[S].forEach(t=>R(t[0],t[1])),!0}(t,e):V(t,n,e)}};function W(t,n){const e=t[n];null===e||"object"!==o(e)||S in e||(c(e,Boolean)||c(e,RegExp)?e[S]=A:(t[n]=J(e),N(e,t,n)))}function z(t,n,e){return t[S]=[],e&&function(t){y in t||(t[y]={},t[m]=((n,e)=>O(t,n,e)),t[w]=((n,e)=>_(t,n,e)),t[g]=(n=>D(t,n)),t[b]=(()=>C(t)))}(t),new Proxy(t,n?I:B)}function J(t,n=!1){if(null===t)return t;if(!r(t))return t;if(S in t)return t;if(!c(t,Boolean)&&!c(t,RegExp)){if(s(t)){for(let n=0;n<t.length;n++)W(t,n);return z(t,!0,n)}for(const n in t)P(n)&&W(t,n);return z(t,!1,n)}t[S]=A}function L(t){return new Proxy(t,B)}const U=a();class q{constructor(){this[U]=null}notify(t,...n){!function(t,n,...e){if(!t)return;const o=t.get(n);o&&o.forEach(t=>t(...e))}(this[U],t,...n)}on(t,n){const e=this;e[U]||(e[U]=new Map),function(t,n,e){let o=t.get(n);o||(o=[],t.set(n,o)),o.indexOf(e)<0&&o.push(e)}(e[U],t,n)}off(t,n){!function(t,n,e){if(!t)return;if(!n)return t.forEach(t=>t.length=0),void t.clear();const o=t.get(n);if(!o)return;if(!e)return void(o.length=0);const r=o.indexOf(e);r<0||o.splice(r,1)}(this[U],t,n)}clear(t){var n,e;n=this[U],e=t,n&&(e?n.delete(e):n.clear())}}function G(t){return t.parentNode}function H(t,n,...e){const o=document.createElement(t);if(n)for(const t in n)r=o,i=t,s=n[t],r.setAttribute(i,s);var r,i,s;return e.forEach(t=>ot(o,t)),o}function K(t,...n){return H(t,null,...n)}function Q(t){const n=document.createDocumentFragment();return t&&t.forEach(t=>ot(n,t)),n}function X(t){return document.createTextNode(t)}let Y=0;function Z(t){return document.createComment(t+(Y++).toString())}function tt(t){return s(t)?0===t.length?null:1===t.length?t[0]:Q(t):t}function nt(t,n,e){(n=tt(n))&&t.insertBefore(n,e)}function et(t,n){t.removeChild(n)}function ot(t,...n){n.forEach(n=>{if(s(n))return n.forEach(n=>ot(t,n));i(n)&&(n=X(n)),t.appendChild(n)})}function rt(t,n,e,o=!1){t.addEventListener(n,e,o)}a();const it=a(),st=a(),ct=a(),ut=a(),lt=a(),ht=a(),ft=a(),at=a(),dt=a(),pt=a(),gt=a(),mt=a(),wt=a(),bt=a(),yt=a(),xt=a(),Et=a(),vt=a(),kt=0,Ot=1,_t=2,Ct=4,Mt=["initialize","rendered","willdestroy","destroied"];function jt(t){At(t)&&(t[at].forEach(jt),t[dt].forEach(jt),t[vt]=Ot,t[ft]=-1,t.afterRender())}function Dt(t,n){let e=t[n];return e||(e=t[n]=new Map),e}class St extends q{static get template(){return null}constructor(t){if(!(null!==t&&r(t)&&S in t))throw new Error("First argument passed to Component constructor must be ViewModel with Messenger interface. See https://[todo]");super(),this[S]=A,this[y]={},this[ht]=t[ht],this[ft]=0,this[ct]=t[ct],this[vt]=kt,this[at]=[],this[dt]=[],this[pt]=null,this[wt]=null,this[mt]=null}[m](t,n,e){O(this,t,n),e&&At(e)&&e!==this&&e[bt](this,t,n)}[bt](t,n,e){const o=Dt(this,wt);let r=o.get(t);r||(r=[],o.set(t,r)),r.push([n,e])}[w](t,n){return _(this,t,n)}[b](){C(this)}[g](t){return D(this,t)}[ut](){throw new Error("abstract method")}[it](){let t=this.constructor.template;return!t&&this[ct]&&(t=this[ct][h]),"function"!==o(t)&&d(),t(this)}[st](t){var n,e,o;c(t,Node)||d(),this[vt]!==kt&&d(),n=G(t),e=this[it](),o=t,(e=tt(e))&&n.replaceChild(e,o),jt(this)}[lt](t=!0){this[vt]>_t||(this[vt]=_t,this.beforeDestroy(),super.clear(),this[b](),function(t){function n(n,e){const o=t[n];o&&(o.forEach((t,n)=>{t.forEach(t=>e(n,t)),t.length=0}),o.clear())}n(wt,(t,n)=>{t[w](n[0],n[1])}),n(mt,(t,n)=>{t[pt].delete(n)})}(this),this[dt].forEach(t=>{t[lt](!1)}),this[at].forEach(t=>{At(t)&&t[lt](!1)}),this[vt]=Ct,this[wt]=this[dt]=this[pt]=this[ct]=this[ht]=null,t&&function t(n,e){n[at].forEach(n=>{At(n)?t(n,e):(e||(e=G(n)),et(e,n))}),n[at]=null}(this))}[Et](){this[vt]===Ot&&this[xt]()}[xt](){throw new Error("abstract method")}[yt](){return Mt[this[vt]]}setContext(t,n,e=!1){if(this[ft]<0)throw new Error("Can't setContext after component has been rendered. Try put setContext code into constructor.");var o;if(0===this[ft]&&(this[ht]?this[ht]=(o=this[ht])?Object.assign({},o):null:this[ht]={},this[ft]=1),t in this[ht]&&!e)throw new Error(`Contenxt with id: ${t} is exist. Pass third argument forceOverride=true to override it.`);this[ht][t]=n}getContext(t){return this[ht]?this[ht][t]:null}[gt](t,n,e){const o=Dt(this,pt);if(o.has(t))throw new Error(`ref name '${t}' of component '${this.constructor.name}' is dulplicated.`);if(o[t]=n,e===this)return;const r=Dt(e,mt);let i=r.get(this);i||(i=[],r.set(this,i)),i.push(t)}getChild(t){return this[vt]!==Ot&&console.error(`Warning: call getChild before component '${this.constructor.name}' is rendered will get nothing, try put getChild into afterRender lifecycle hook.`),this[pt]?this[pt][t]:null}afterRender(){}beforeDestroy(){}}function At(t){return c(t,St)}function $t(t){if(!s(t)||0===t.length)throw new Error("Render results of component is empty");return t}function Pt(t){const n=t[at];return n&&0!==n.length||d(),At(n[0])?Pt(n[0]):n[0]}const Nt=a("length"),Tt=a("keys"),Rt=a("key"),Vt="index",Bt="each",Ft=[];class It extends St{constructor(t,n,e){super(t);const o=L(this);return o.each=n,o.index=e,o}[it](){const t=this[ct][h];return t||d(),t(this)}}function Wt(t,n,e,o){return new It(J({[ht]:o,[ct]:{[h]:e}}),t,n)}function zt(t,n,e,o,r){const i=Wt(t,n,e,r);return o.push(i),i[it]()}function Jt(t,n){if(null!==t&&r(t)&&!(S in t))throw new Error(`loop item [${n}] of <for> component must be ViewModel.`)}function Lt(t,n,e,o){const r=o===Bt?t:o(t);return e.has(r)&&console.error(`loop items [${n}] and [${e.get(r)}] of <for> component both have key '${r}', dulplicated key may cause update error.`),e.set(r,n),r}function Ut(t,n,e,o,r,i){const s=[],c=new Map;return t.forEach((t,u)=>{Jt(t,u),r!==Vt&&o.push(Lt(t,u,c,r)),s.push(...zt(t,u,n,e,i))}),s}function qt(t,n){n[at].forEach(n=>{At(n)?qt(t,n):ot(t,n)})}class Gt extends St{constructor(t){const n=t._key||Vt;if(n&&!/^(index|each(.[\w\d$_]+)*)$/.test(n))throw new Error('Value of "_key" attribute of <for> component is invalidate. See https://[todo]');super(t);const e=L(this),o=()=>{e.loop=t.loop};return o(),t[m]("loop",o),e[Rt]=n,e[Nt]=0,e[Tt]=null,n!==Vt&&n!==Bt&&(e[Rt]=new Function(Bt,`return ${n}`)),e}get loop(){return this._l}set loop(t){this._l=t,this[Et]()}[it](){const t=this[at],n=this[ct]?this[ct][h]:null;if(!n)return t.push(Z(f)),t;const e=this.loop,o=this[Rt];return o!==Vt&&(this[Tt]=[]),s(e)&&0!==e.length?(this[Nt]=e.length,Ut(e,n,t,this[Tt],o,this[ht])):(t.push(Z(f)),t)}[xt](){const t=this[ct]?this[ct][h]:null;if(!t)return;const n=Array.isArray(this.loop)?this.loop:Ft,e=this[at],o=n.length,r=this[Nt];if(0===o&&0===r)return;const i=this[Rt];if(0===o&&r>0){const t=Pt(e[0]),n=Z(f);nt(G(t),n,t);for(let t=0;t<r;t++)e[t][lt]();return e.length=1,e[0]=n,i!==Vt&&(this[Tt].length=0),void(this[Nt]=0)}this[Nt]=o;const s=this[ht],c=G(0===r?e[0]:Pt(e[0]));if(0===r&&(et(c,e[0]),e.length=0),i===Vt){let i=null;for(let c=0;c<o;c++)if(c<r){const t=e[c];n[c]!==t.each&&(t.each=n[c])}else i||(i=Q()),ot(i,...zt(n[c],c,t,e,s));if(i&&ot(c,i),o>=r)return;for(let t=o;t<r;t++)e[t][lt]();return void e.splice(o)}const u=this[Tt];if(0===r){return void ot(c,Q(Ut(n,t,e,u,i)))}const l=new Map;u.forEach((t,n)=>{l.set(t,n)});const a=[],p=new Map;n.forEach((t,n)=>{Jt(t,n),a.push(Lt(t,n,p,i))});let g=0,m=0;const w=[],b=new Uint8Array(r);for(;g<r||m<o;){for(;g<r;)if(0!==b[g])g++;else{if(p.has(u[g])&&p.get(u[g])>=m)break;e[g][lt](),g++}if(g>=r){let e=null;for(;m<o;m++){const o=Wt(n[m],m,t,s);e||(e=Q()),ot(e,...o[it]()),w.push(o)}e&&ot(c,e);break}const i=u[g];let h=null;for(;m<o;){const o=a[m];if(o===i)break;let r=null;if(l.has(o)){const t=l.get(o);t>g&&0===b[t]&&(r=e[t],b[t]=1)}h||(h=Q()),r?(qt(h,r),r.index!==m&&(r.index=m),r.each!==n[m]&&(r.each=n[m])):ot(h,...(r=Wt(n[m],m,t,s))[it]()),w.push(r),m++}m>=o&&d("unimpossible?!");const f=e[g];h&&nt(c,h,Pt(f)),f.index!==m&&(f.index=m),f.each!==n[m]&&(f.each=n[m]),w.push(f),g++,m++}this[at]=w,this[Tt]=a}}function Ht(t,n){return t?n in t?t[n]:t[h]:null}function Kt(t,n){return new St(J({[ht]:n,[ct]:{[h]:t}},!0))}function Qt(t,n,e,o){const r=Ht(t,e);if(!r)return n.push(Z(f)),n;const i=Kt(r,o);return n.push(i),i[it]()}function Xt(t,n,e,o){const r=Ht(t,e);if(!r){const t=n[0];if(At(t)){const e=Pt(t),o=G(e),r=Z(f);n[0]=r,nt(o,r,e),t[lt]()}return}const i=n[0];let s,c;const u=At(i);u?c=G(s=Pt(i)):(s=i,c=G(i));const l=Kt(r,o);n[0]=l,nt(c,l[it](),s),u?i[lt]():et(c,s),jt(l)}class Yt extends St{constructor(t){super(t);const n=L(this),e=()=>{n.expect=!!t.expect};return e(),t[m]("expect",e),n}get expect(){return this._e}set expect(t){this._e!==t&&(this._e=t,this[Et]())}[it](){const t=this[ct];return t&&(t[!1]=t.else),Qt(t,this[at],this.expect,this[ht])}[xt](){Xt(this[ct],this[at],this.expect,this[ht])}}var Zt=function(t){const n=t;return[(()=>{const n=K("h2","Simple Todos");return t[at].push(n),n})(),(()=>{const e=K("div",K("table",K("thead",K("tr",K("th",(()=>{const e=H("input",{id:"xx",type:"checkbox"}),o=()=>e.disabled=!(0!==n.todos.length);n[m]("todos.length",o,t),o();const r=()=>e.checked=!!n.allDone;return n[m]("allDone",r,t),r(),rt(e,"click",function(...t){n.toggleAllDone()}),e})()),K("th","Title"),K("th","Operate"))),K("tbody",...(()=>{const e=J({[ht]:t[ht],loop:null,[ct]:{[h]:function(t){const e=t;return[(()=>{const o=K("tr",K("td",(()=>{const o=H("input",{type:"checkbox"}),r=()=>o.checked=!!e.each.done;return e[m]("each.done",r,t),r(),rt(o,"click",function(...t){n.toggleDone(e.each)}),o})()),K("td",(()=>{const n=X(""),o=()=>(function(t,n){t.textContent=n})(n,e.each.title);return e[m]("each.title",o,t),o(),n})()),K("td",(()=>{const t=K("button","Modify");return rt(t,"click",function(...t){n.modify(e.each)}),t})(),(()=>{const t=K("button","Delete");return rt(t,"click",function(...t){n.remove(e.each)}),t})()));return t[at].push(o),o})()]}}},!0),o=()=>e.loop=J(n.todos);n[m]("todos",o,t),o();const r=new Gt(e);return t[dt].push(r),$t(r[it](t))})(),...(()=>{const e=J({[ht]:t[ht],expect:null,[ct]:{[h]:function(t){return[(()=>{const n=K("tr",H("td",{class:"emp",colspan:"3"},"no todo, please add."));return t[at].push(n),n})()]}}},!0),o=()=>e.expect=J(0===n.todos.length);n[m]("todos.length",o,t),o();const r=new Yt(e);return t[dt].push(r),$t(r[it](t))})())));return t[at].push(e),e})(),(()=>{const e=H("div",{class:"ctrl"},(()=>{const t=K("button","Add");return rt(t,"click",function(...t){n.add()}),t})(),(()=>{const t=K("button","Clear");return rt(t,"click",function(...t){n.clear()}),t})());return t[at].push(e),e})()]};function tn(t,n=!1){return J({title:t,done:n})}!function(t,n){if(n===document.body)throw new Error("bootstrap dom cannot be document.body");const e=new t(J({},!0));At(e)||d(),e[st](n)}(class extends St{static get template(){return Zt}constructor(t){super(t);const n=L(this);return n.todos=J(function(){let t=localStorage.getItem("jinge-simple-todos");if(!t)return null;try{return t=JSON.parse(t),Array.isArray(t)?t:null}catch{return null}}()||[tn("test")]),n.allDone=n.todos.length>0&&!n.todos.find(t=>!t.done),n}toggleAllDone(){this.todos.forEach(t=>t.done=!this.allDone),this.update()}toggleDone(t){t.done=!t.done,this.update()}remove(t){const n=this.todos.indexOf(t);n>=0&&this.todos.splice(n,1),this.update()}modify(t){const n=t.title;let e=prompt("Please enter title",n);e&&(e=e.trim())&&(t.title=e,this.update())}add(){const t=prompt("Please enter title of new todo");t&&t.trim()&&(this.todos.push(tn(t)),this.update())}clear(){0!==this.todos.length&&confirm("Sure to clear all todos?")&&(this.todos.length=0,this.update())}update(){this.allDone=this.todos.length>0&&!this.todos.find(t=>!t.done)}},document.getElementById("root-app"))}]);
//# sourceMappingURL=bundle.min.js.map