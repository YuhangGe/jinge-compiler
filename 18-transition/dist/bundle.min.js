!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="dist",n(n.s=0)}([function(t,e,n){"use strict";function r(t){return typeof t}function o(t){return null!==t&&"object"===r(t)}function s(t){return"string"===r(t)}function i(t){return"number"===r(t)&&!Number.isNaN(t)&&Number.isFinite(t)}function c(t){return"undefined"===r(t)}function l(t){return Array.isArray(t)}function a(t){return"function"===r(t)}function u(t,e){const n=t.indexOf(e);return!(n<0)&&(t.splice(n,1),!0)}n.r(e);let d=0;function _(){return Date.now().toString(32)+"-"+Math.floor(16777215*Math.random()).toString(32)+"-"+(d++).toString(32)}let h,f,p=0,E=1,m=!1;function g(t){h.delete(t)}function y(t){if(m)return void setTimeout(y,0,t);const e=h.get(t);if(e){m=!0;try{e()}finally{g(t),m=!1}}}if(c(window.setImmediate)){h=new Map;const t="setImmediate$"+(p++).toString(32)+"$";window.addEventListener("message",e=>{e.source===window&&s(e.data)&&e.data.startsWith(t)&&y(Number(e.data.slice(t.length)))},!1),f=function(e){window.postMessage(t+e,"*")}}const w=window.setImmediate||function(t){if(!a(t)||arguments.length>1)throw new Error("setImmediate require callback function.");return h.set(E,t),f(E),E++},N=window.clearImmediate||g;function v(t,e){s(e)||(e=JSON.stringify(e)),t.textContent=e}function b(t=""){return document.createTextNode(s(t)?t:JSON.stringify(t))}function D(t){const e=document.createDocumentFragment();return t&&t.forEach(t=>{e.appendChild(s(t)?document.createTextNode(t):t)}),e}function x(t,e){t.appendChild(D(e))}function O(t,e,n){if(e)if(o(e))for(const n in e)O(t,n,e[n]);else c(n)||null===n?function t(e,n){if(n){if(!o(n))return e.removeAttribute(n);for(const r in n)t(e,r)}}(t,e):t.setAttribute(e,n)}function T(t,e,n){if(e)for(const n in e)n&&!c(e[n])&&O(t,n,e[n]);return x(t,n),t}function R(t,e,...n){return T(document.createElement(t),e,n)}function S(t,...e){return R(t,null,...e)}function M(t,e,n,r){c(r)&&(r=!!e.startsWith("touch")&&{capture:!1,passive:!0}),t.addEventListener(e,n,r)}function I(t,e,n){t.removeEventListener(e,n)}const L=Symbol("$$");function P(t){const e=t.constructor;return e===RegExp||e===Date||e===Boolean}function C(t){return o(t)&&L in t}function A(t){return s(t)&&95!==t.charCodeAt(0)}function V(t){return s(t)?t:null===t?"null":c(t)?"undefined":t.toString()}function H(t){return s(t)?t.indexOf(".")>0?t.split("."):[t]:l(t)?t:[t]}function j(t,e,n){t.__parents||(t.__parents=[]),t.__parents.push({core:e,prop:n})}function U(t,e,n){if(!t.__parents)return;const r=t.__parents.findIndex(t=>t.core===e&&t.prop===n);r>=0&&t.__parents.splice(r,1)}function k(t,e,n,r){if(!t.__parents)return;const o=t.__parents.find(t=>t.core===e&&t.prop===n);o&&(o.prop+=r)}const $=new Map;function F(t){const e=$.get(t);e&&(N(e.immediate),$.delete(t))}function G(t,e,n){const r=e.__handlers;r&&r.forEach(e=>{n?e(t):function(t,e){if($.has(t))return;const n=w(()=>{const e=$.get(t);try{t(e.propertyPath)}finally{$.delete(t)}});$.set(t,{immediate:n,propertyPath:e})}(e,t)});const o=e.__listeners;o&&o.forEach(e=>{G(t,e,n)})}function Z(t){const e=t.__listeners;e&&(e.forEach(t=>Z(t)),t.__listeners=null);const n=t.__handlers;n&&(n.forEach(F),t.__handlers=null),t.__parent=null}class W{constructor(t){this.__notifiable=!0,this.__parents=null,this.__listeners=null,this.__related=null,this.__setters=null,this.target=t,this.proxy=null,Object.defineProperty(t,L,{value:this,writable:!1,configurable:!0,enumerable:!1})}__watch(t,e,n){const r=(t=H(t)).indexOf("**");if(r>=0&&r!==t.length-1)throw new Error('wizard "**" must be last element in path.');const o=function t(e,n,r=0){const o=V(n[r]);e.__listeners||(e.__listeners=new Map);let s=e.__listeners.get(o);return s||(s={__parent:e,__property:o,__handlers:null,__listeners:null},e.__listeners.set(o,s)),n.length-1===r?s:t(s,n,r+1)}(this,t);o.__handlers||(o.__handlers=[]),o.__handlers.indexOf(e)<0&&o.__handlers.push(e),n&&n!==this&&n.__addRelated(this,t,e)}__unwatch(t,e,n){if(!t)return void Z(this);const r=function t(e,n,r=0){var o;const s=V(n[r]);if(!s)return null;const i=null===(o=e.__listeners)||void 0===o?void 0:o.get(s);return i?n.length-1===r?i:t(i,n,r+1):null}(this,H(t));if(!r)return;const o=r.__handlers;o&&(e?(F(e),u(o,e)):(o.forEach(F),o.length=0),function(t){if(t&&t.__handlers&&t.__handlers.length>0||t.__listeners&&t.__listeners.size>0)return null;const e=t.__parent,n=t.__property;t.__parent=null,e.__listeners.delete(n)}(r),n&&n!==this&&n.__rmRelated(this,t,e))}__notify(t,e=!1){if(!this.__notifiable)return;t=H(t),this.__listeners&&function t(e,n,r,o=0){const s=e.__listeners;if(!s)return;const i=V(n[o]);if(!i)return;let c=s.get(i);c&&(n.length-1===o?G(n,c,r):t(c,n,r,o+1)),c=s.get("*"),c&&(n.length-1===o?G(n,c,!0):t(c,n,r,o+1)),c=s.get("**"),c&&G(n,c,!0)}(this,t,e);const n=this.__parents;n&&n.forEach(n=>{const r=n.core;r?r.__notify([n.prop].concat(t),e):console.error("dev-warn-unexpected: parent of ViewModelCore has been destroied but not unlink.")})}__destroy(){this.__notifiable=!1,this.__parents=null,Z(this),this.proxy=null,this.__related&&(this.__related.forEach((t,e)=>{t.forEach(t=>{e.__unwatch(t.prop,t.handler)})}),this.__related=null);const t=this.target,e=this.__setters;e&&(e.forEach((e,n)=>{if(null===e)return;const r=t[n];o(r)&&L in r&&U(r[L],this,n)}),this.__setters=null),Object.getOwnPropertyNames(t).forEach(e=>{const n=t[e];o(n)&&L in n&&U(n[L],this,e)}),delete t[L],this.target=null}__addRelated(t,e,n){this.__related||(this.__related=new Map);let r=this.__related.get(t);r||this.__related.set(t,r=[]),r.push({prop:e,handler:n})}__rmRelated(t,e,n){if(!this.__related)return;const r=this.__related.get(t);if(!r)return;const o=l(e),s=r.findIndex(t=>n===t.handler&&(o?function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}(e,t.prop):e===t.prop));s>=0&&r.splice(s,1)}}function B(t,e){t[L].__notify(e)}function J(t,e,n,r,s=!0){if(!A(e))return t[e]=n,!0;const i=t[e];if(i===n&&!c(n))return!0;let l=o(n)&&!P(n);if(l&&(l=L in n,s&&!l))throw new Error(`public property "${e.toString()}" of ViewModel must also be ViewModel`);return o(i)&&L in i&&U(i[L],t[L],e),r(t,e,n),l&&j(n[L],t[L],e),B(t,e),!0}function Y(t,e,n){t[e]=n}function z(t,e,n){const r=function(t,e){let n=t[L].__setters;if(n||(t[L].__setters=n=new Map),n.has(e))return n.get(e);{let r,o=t.constructor,s=Object.getOwnPropertyDescriptor(o.prototype,e);if(s)return r=a(s.set)?s.set:null,n.set(e,r),r;for(o=Object.getPrototypeOf(o);o&&o.prototype;){if(s=Object.getOwnPropertyDescriptor(o.prototype,e),s)return r=a(s.set)?s.set:null,n.set(e,r),r;o=Object.getPrototypeOf(o)}return n.set(e,null),null}}(t,e);r?r.call(t[L].proxy,n):t[e]=n}function q(t,e,n){return!(L in t)||J(t,e,n,Y)}function K(t,e,n){return!(L in t)||J(t,e,n,Y,!1)}function Q(t,e,n){return L in t?J(t,e,n,z):(console.warn(`call setter "${e.toString()}" after destroied, resources such as setInterval maybe not released before destroy. component:`,t),!0)}function X(t,e,n){let r=e;for(e>n&&(r=n,n=e);r<n;r++)B(t,r)}const tt={set:q},et={get(t,e){if("then"===e||"catch"===e){const n=t[e];return function(...e){return n.call(t,...e)}}return t[e]},set:q};function nt(t,e,n){return t.forEach((e,n)=>{C(e)&&j(e[L],t[L],n)}),t[e](n),t.forEach((e,n)=>{C(e)&&U(e[L],t[L],n)}),X(t,0,t.length),t[L].proxy}function rt(t,e=!1){const n=lt(t,!0);return t.forEach((n,r)=>{C(n)?j(n[L],t[L],r):e&&(t[r]=ut(n))}),n}function ot(t,e){t.forEach((n,r)=>{C(n)&&k(n[L],t[L],r,e)})}function st(t,e){if(o(t)){if(L in t)return!0;throw new Error(`argument passed to Array.${e} must be ViewModel if the array is ViewModel`)}return!1}const it={splice(t,e,n,...r){e<0&&(e=0),r.forEach((n,r)=>{st(n,"splice")&&j(n[L],t[L],e+r)});for(let r=0;r<n&&!(e+r>=t.length);r++){const n=t[e+r];C(n)&&U(n[L],t[L],e+r)}const o=r.length-n;if(0!==o)for(let r=e+n;r<t.length;r++){const e=t[r];C(e)&&k(e[L],t[L],r,o)}const s=rt(t.splice(e,n,...r));if(0!==o){B(t,"length");for(let n=e;n<t.length;n++)B(t,n)}return s},shift(t){if(0===t.length)return t.shift();ot(t,-1);const e=t.shift();C(e)&&U(e[L],t[L],-1),B(t,"length");for(let e=0;e<t.length+1;e++)B(t,e);return e},unshift(t,...e){if(0===e.length)return t.unshift();e.forEach((e,n)=>{st(e,"unshift")&&j(e[L],t[L],n)}),ot(t,e.length);const n=t.unshift(...e);B(t,"length");for(let e=0;e<t.length;e++)B(t,e);return n},pop(t){if(0===t.length)return t.pop();const e=t.pop();return C(e)&&U(e[L],t[L],t.length),B(t,"length"),B(t,t.length),e},push(t,...e){if(0===e.length)return t.push();e.forEach((e,n)=>{st(e,"push")&&j(e[L],t[L],t.length+n)});const n=t.push(...e);B(t,"length");for(let n=t.length-1-e.length;n<t.length;n++)B(t,n);return n},fill:(t,e)=>(st(e,"fill"),t.forEach((n,r)=>{(n!==e||c(n))&&(C(n)&&U(n[L],t[L],r),t[r]=e,C(e)&&j(e[L],t[L],r),B(t,r))}),t[L].proxy),reverse:t=>nt(t,"reverse"),sort:(t,e)=>nt(t,"sort",e),concat:(t,e)=>(st(e,"concat"),rt(t.concat(e))),filter:(t,e)=>rt(t.filter(e)),slice:(t,e,n)=>rt(t.slice(e,n)),map:(t,e)=>rt(t.map(e),!0)},ct={get(t,e){if(e in it){const n=it[e];return function(...e){return n(t,...e)}}return t[e]},set:function(t,e,n){return!(L in t)||("length"===e?function(t,e){if(!i(e))throw new Error("bad argument. array length must be validate number.");const n=t.length;if(n>e)for(let r=e;r<n;r++){const e=t[r];C(e)&&U(e[L],t[L],r)}return t.length=e,n!==e&&(B(t,"length"),X(t,n,e)),!0}(t,n):J(t,e,n,Y))}};function lt(t,e){return new W(t).proxy=new Proxy(t,e?ct:o(n=t)&&a(n.then)?et:tt);var n}function at(t,e,n){o(e)&&!P(e)&&(L in e||(t[n]=e=ut(e)),j(e[L],t[L],n))}function ut(t){if(o(t)){if(P(t)||L in t)return t;const e=l(t),n=lt(t,e);if(e)for(let e=0;e<t.length;e++)at(t,t[e],e);else for(const e in t)A(e)&&at(t,t[e],e);return n}return t}function dt(t){if(!o(t))throw new Error("vm() target must be object or array.");return ut(t)}function _t(t){if(!o(t)||l(t))throw new Error("attrs() traget must be plain object.");return function(t){const e=new W(t);return e.__notifiable=!1,e.proxy=new Proxy(t,{set:K})}(t)}const ht=Symbol("listeners");class ft{constructor(t){if(this[ht]=null,t)for(const e in t){const n=t[e];this.__on(e,n.fn,n.opts)}}__notify(t,...e){if(!this[ht])return;const n=this[ht].get(t);n&&n.forEach(t=>{t.fn(...e)})}__on(t,e,n){this[ht]||(this[ht]=new Map);let r=this[ht].get(t);if(r||this[ht].set(t,r=[]),r.findIndex(t=>t.fn===e)>=0)console.warn("dulplicated messenger listener",t,e);else if(n&&n.once){const o=(...n)=>{e(...n),this.__off(t,e)};r.push({fn:o,opts:n})}else r.push({fn:e,opts:n})}__off(t,e){if(!this[ht])return;if(!t)return void this[ht].clear();const n=this[ht].get(t);if(!n)return;if(!e)return void(n.length=0);const r=n.findIndex(t=>t.fn===e);n.splice(r,1)}}const pt=new class{constructor(){this.m=new Map,this.s=0}create(t){if(0===this.s)return;const e=R("style",{type:"text/css",id:t.dom});document.head.appendChild(e),e.styleSheet?e.styleSheet.cssText=t.css:e.textContent=t.css}add(t){if(!t)return;const e=this.m;let n=e.get(t.id);n?n.refs++:(n={id:t.id,css:t.css,dom:`__${t.id}__`,refs:1},e.set(t.id,n),this.create(n))}attch(){0===this.s?(this.s=1,function(){const t=R("span",{style:"position:absolute;left:-10000px;",class:"jg-hide"});document.body.appendChild(t);const e="none"===getComputedStyle(t).getPropertyValue("display");return document.body.removeChild(t),e}()||this.create({dom:`__jgsty_${_()}__`,css:".jg-hide{display:none!important}.jg-hide.jg-hide-enter,.jg-hide.jg-hide-leave{display:block!important}"}),this.m.forEach(t=>{this.create(t)})):console.warn("component styles already attached.")}remove(t){if(!t)return;const e=this.m.get(t.id);e&&(e.refs--,e.refs>0||(this.m.delete(e.id),0!==this.s&&document.head.removeChild(document.getElementById(e.dom))))}};function Et(t){return new Function("__ctx",`return \`${t.replace(/`/g,"\\`").replace(/\$\{\s*([\w\d._$]+)\s*\}/g,(t,e)=>"${ __ctx."+e+" }")}\`;`)}const mt=new class extends ft{constructor(){super(),this.__deps=null,this.__data=null,this.__cache=new Map,this.__key=null,this.__regLoc(window.JINGE_I18N_DATA)}get locale(){return this.__data.locale}__regDep(t,e){if(this.__deps||(this.__deps=[]),!this.__deps[t])throw new Error("conflict at "+t);this.__deps[t]=e}__regLoc(t){t&&!this.__cache.has(t.locale)&&(this.__cache.set(t.locale,t),this.__data||(this.__data=t))}switch(t,e="dist/locale.[locale].js"){if(this.__data.locale===t)return;const n=this.__cache.get(t);if(n)this.__data=n,this.__notify("i18n-change",this.locale);else{const n=_();this.__key=n,(a(e)?e(t):function(t,e){return window.fetch(e.replace("[locale]",t)).then(t=>t.text())}(t,e)).then(e=>{if(new Function("jinge",e)({i18n:this}),this.__key!==n||this.__data.locale===t)return;const r=this.__cache.get(t);this.__data=r,this.__notify("i18n-change",this.locale)})}}__t(t,e){const n=this.__data.dictionary;if(!(t in n))return"i18n_missing";let r=n[t];return s(r)&&(171===r.charCodeAt(0)?(r=n[r.substring(1)],s(r)&&(r=Et(r))):r=Et(r),n[t]=r),r(e)}__r(t,e){const n=this.__data.render;if(a(n)){if(!this.__deps)throw new Error("missing render depedents");this.__data.render=n(...this.__deps)}const r=n[e];if(!(t in r))throw new Error(`missing i18n ${e} for key: ${t}`);let o=r[t];return s(o)&&(r[t]=o=r[o]),o}watch(t,e){return this.__on("change",t),e&&t(this.locale),()=>{this.__off("change",t)}}};var gt,yt;!function(t){t[t.INITIALIZE=0]="INITIALIZE",t[t.RENDERED=1]="RENDERED",t[t.WILLDESTROY=2]="WILLDESTROY",t[t.DESTROIED=3]="DESTROIED"}(gt||(gt={})),function(t){t[t.UNTOUCH=0]="UNTOUCH",t[t.TOUCHED=1]="TOUCHED",t[t.UNTOUCH_FREEZED=2]="UNTOUCH_FREEZED",t[t.TOUCHED_FREEZED=3]="TOUCHED_FREEZED"}(yt||(yt={}));const wt=Symbol("__");function Nt(t){return wt in t}function vt(t){if(!l(t)||0===t.length)throw new Error("Render results of component is empty");return t}class bt extends ft{constructor(t){if(!o(t)||!(L in t))throw new Error("Attributes passed to Component constructor must be ViewModel. See https://[todo]");const e=t[wt]||{};super(e.listeners),function(t){if(L in t)throw new Error("component has alreay been wrapped.");const e=new W(t);e.__notifiable=!1,e.proxy=new Proxy(t,{set:Q})}(this),this[wt]={passedAttrs:t,context:e.context,contextState:yt.UNTOUCH,slots:e.slots,state:gt.INITIALIZE,rootNodes:[],nonRootCompNodes:[],refs:null,relatedRefs:null,updateNextMap:null,compStylePid:null,deregDOM:null,deregI18N:null}}static create(t){return o(t=t||_t({}))&&L in t||(t=_t(t||{})),new this(t)[L].proxy}__i18nWatch(t,e){let n=this[wt].deregI18N;n||(this[wt].deregI18N=n=[]);const r=mt.watch(()=>{t.call(this)},e),o=()=>{r(),u(n,o)};return n.push(o),o}__domAddListener(t,e,n,r){let o=this[wt].deregDOM;o||(this[wt].deregDOM=o=[]);const s=function(t,e,n,r){return M(t,e,n,r),function(){I(t,e,n)}}(t,e,t=>{n.call(this,t)},r),i=()=>{s(),u(o,i)};return o.push(i),i}__domPassListeners(t,e){if(this[wt].state!==gt.RENDERED)throw new Error("domPassListeners must be applied to component which is rendered.");const n=this[ht];n&&0!==n.size&&(t&&!l(t)?(e=t,t=null):e||(e=this.__firstDOM),e.nodeType===Node.ELEMENT_NODE&&n.forEach((n,r)=>{t&&t.indexOf(r)>=0||n.forEach(t=>{const{opts:n,fn:o}=t;this.__domAddListener(e,r,t.opts&&(t.opts.stop||t.opts.prevent)?function(t){n.stop&&t.stopPropagation(),n.prevent&&t.preventDefault(),o.call(this,t)}:o,t.opts)})}))}get __transitionDOM(){const t=this[wt].rootNodes[0];return Nt(t)?t.__transitionDOM:t}get __firstDOM(){const t=this[wt].rootNodes[0];return Nt(t)?t.__firstDOM:t}get __lastDOM(){const t=this[wt].rootNodes,e=t[t.length-1];return Nt(e)?e.__lastDOM:e}__render(){const t=this.constructor;let e=t.template;if(!e&&this[wt].slots&&(e=this[wt].slots.default),!a(e))throw new Error(`Template of ${t.name} not found. Forget static getter "template"?`);return pt.add(t.style),e(this)}__renderToDOM(t,e=!0){if(this[wt].state!==gt.INITIALIZE)throw new Error("component has already been rendered.");const n=vt(this.__render());var r,o,s;pt.attch(),e?(r=t.parentNode,o=n,s=t,r.replaceChild(D(o),s)):x(t,n),this.__handleAfterRender()}__destroy(t=!0){const e=this[wt];e.state>gt.WILLDESTROY||(e.state=gt.WILLDESTROY,this[L].__notifiable=!1,e.passedAttrs[L].__notifiable=!1,this.__notify("before-destroy"),this.__beforeDestroy(),this.__handleBeforeDestroy(t),super.__off(),pt.remove(this.constructor.style),e.passedAttrs[L].__destroy(),e.passedAttrs=null,this[L].__destroy(),e.updateNextMap&&(e.updateNextMap.forEach(t=>{N(t)}),e.updateNextMap=null),e.relatedRefs&&(e.relatedRefs.forEach(t=>{const e=t.origin[wt].refs;if(!e)return;const n=e.get(t.ref);l(n)?u(n,t.node||this):e.delete(t.ref)}),e.relatedRefs=null),e.deregDOM&&(e.deregDOM.forEach(t=>t()),e.deregDOM=null),e.deregI18N&&(e.deregI18N.forEach(t=>t()),e.deregI18N=null),e.state=gt.DESTROIED,e.rootNodes=e.nonRootCompNodes=e.refs=e.slots=e.context=null)}__handleBeforeDestroy(t=!1){let e;this[wt].nonRootCompNodes.forEach(t=>{t.__destroy(!1)}),this[wt].rootNodes.forEach(n=>{Nt(n)?n.__destroy(t):t&&(e||(e=n.parentNode),e.removeChild(n))})}__handleAfterRender(){this[wt].passedAttrs[L].__notifiable=!0,this[L].__notifiable=!0,this[wt].rootNodes.forEach(t=>{Nt(t)&&t.__handleAfterRender()}),this[wt].nonRootCompNodes.forEach(t=>{Nt(t)&&t.__handleAfterRender()}),this[wt].state=gt.RENDERED,this[wt].contextState=this[wt].contextState===yt.TOUCHED?yt.TOUCHED_FREEZED:yt.UNTOUCH_FREEZED,this.__afterRender(),this.__notify("after-render")}__updateIfNeed(t,e=!0){if(this[wt].state!==gt.RENDERED)return;if(!1===t)return this.__update();if(a(t)||(t=this.__update),!e)return void t.call(this);let n=this[wt].updateNextMap;n||(n=this[wt].updateNextMap=new Map),n.has(t)||n.set(t,w(()=>{n.delete(t),t.call(this)}))}__update(t){}__setContext(t,e,n=!1){if(this[wt].contextState===yt.UNTOUCH_FREEZED||this[wt].contextState===yt.TOUCHED_FREEZED)throw new Error("Can't setContext after component has been rendered. Try put setContext code into constructor.");if(this[wt].contextState===yt.UNTOUCH&&(this[wt].context=Object.assign({},this[wt].context),this[wt].contextState=yt.TOUCHED),t in this[wt].context&&!n)throw new Error(`Contenxt with key: ${t.toString()} is exist. Pass third argument forceOverride=true to override it.`);this[wt].context[t]=e}__getContext(t){return this[wt].context?this[wt].context[t]:null}__setRef(t,e,n){let r=this[wt].refs;r||(this[wt].refs=r=new Map);let o=r.get(t);o?l(o)?o.push(e):(o=[o,e],r.set(t,o)):r.set(t,e);const s=Nt(e);if(!s&&this===n)return;let i=(s?e:n)[wt].relatedRefs;i||((s?e:n)[wt].relatedRefs=i=[]),i.push({origin:this,ref:t,node:s?null:e})}__getRef(t){return this[wt].state!==gt.RENDERED&&console.warn(`Warning: call __getRef before component '${this.constructor.name}' rendered will get nothing. see https://[TODO]`),this[wt].refs?this[wt].refs.get(t):null}__addStylePid(t,e){if(!t&&!e)return;let n=this[wt].compStylePid;n||(n=this[wt].compStylePid=Object.create(null)),t&&Object.assign(n,t),e&&(n[e]="")}__afterRender(){}__beforeDestroy(){}}var Dt;function xt(t){const e=getComputedStyle(t);return"0s"!==e.getPropertyValue("transition-duration")?"transitionend":"0s"!==e.getPropertyValue("animation-duration")?"animationend":null}bt[wt]=!0,function(t){t[t.ENTERING=1]="ENTERING",t[t.ENTERED=2]="ENTERED",t[t.LEAVING=3]="LEAVING",t[t.LEAVED=4]="LEAVED"}(Dt||(Dt={}));class Ot extends bt{constructor(t){if(!t||!o(t.class))throw new Error('<toggle-class> component require "class" attribute to be Object.');super(t);const e=this[L].proxy,n=()=>{e.domClass=t.class};n(),t[L].__watch("class",n);const r=()=>{e.transition=!!t.transition};r(),t[L].__watch("transition",r),e._t=null,e._i=-1,e[L].__watch("domClass.**",()=>{e.__updateIfNeed()})}__render(){const t=super.__render();return this.__update(!0),t}__beforeDestroy(){this._t=null}__update(t){const e=this.transition?this.__transitionDOM:null;if(e&&e.nodeType!==Node.ELEMENT_NODE)return;this.transition&&!this._t&&(this._t=new Map);const n=this.domClass;Object.keys(n).forEach(r=>{const o=n[r];if(!this.transition)return void function t(e,n,r){Nt(e)?e[wt].rootNodes.forEach(e=>t(e,n,r)):n?e.classList.add(r):e.classList.remove(r)}(this,!!o,r);if(t)return this._t.set(r,[o?Dt.ENTERED:Dt.LEAVED,null]),void(o?e.classList.add(r):e.classList.remove(r));const s=this._t.get(r);if(!s)return void console.error("Unsupport <toogle-class> attribute. see https://todo");const i=s[0];if(o&&i<=Dt.ENTERED||!o&&i>=Dt.LEAVING)return;i===(o?Dt.LEAVING:Dt.ENTERING)&&(e.classList.remove(r+(o?"-leave-active":"-enter-active")),e.classList.remove(r+(o?"-leave":"-enter")),I(e,"transitionend",s[1]),I(e,"animationend",s[1]),s[1]=null,this.__notify("transition",o?"leave-cancelled":"enter-cancelled",r,e));const c=r+(o?"-enter":"-leave"),l=r+(o?"-enter-active":"-leave-active");e.classList.add(c),xt(e),e.classList.add(l);const a=xt(e);if(!a)return e.classList.remove(c),e.classList.remove(l),s[0]=o?Dt.ENTERED:Dt.LEAVED,void(o?e.classList.add(r):e.classList.remove(r));const u=()=>{I(e,"transitionend",u),I(e,"animationend",u),e.classList.remove(c),e.classList.remove(l),s[1]=null,s[0]=o?Dt.ENTERED:Dt.LEAVED,o?e.classList.add(r):e.classList.remove(r),this.__notify("transition",o?"after-enter":"after-leave",r,e)};s[0]=o?Dt.ENTERING:Dt.LEAVING,s[1]=u,M(e,a,u),this.__notify("transition",o?"before-enter":"before-leave",r,e),w(()=>{this.__notify("transition",o?"enter":"leave",r,e)})})}}class Tt extends Ot{constructor(t){t.class=dt({"jg-hide":t.test}),t[L].__watch("test",()=>{t.class["jg-hide"]!==t.test&&(t.class["jg-hide"]=t.test)}),super(t)}}function Rt(t,e,n){const r=new bt(_t({[wt]:{context:e,slots:{default:t}}}));return n&&r.__addStylePid(n),r[L].proxy}function St(t){const e=t._currentValue,n=t[wt].slots;if(t.transition&&n){t._transitionMap=new Map;for(const r in n)t._transitionMap.set(r,[r===e?Dt.ENTERED:Dt.LEAVED,null]);t._previousValue=e,t._onEndHandler=t.onTransitionEnd.bind(t)}const r=n?n[e]:null,o=t[wt].rootNodes;if(!r)return o.push(document.createComment("empty")),o;const s=Rt(r,t[wt].context,t[wt].compStylePid);return o.push(s),s.__render()}function Mt(t){var e;const n=t[wt].rootNodes,r=n[0],o=Nt(r),s=o?r.__firstDOM:r,i=(o?s:r).parentNode,c=null===(e=t[wt].slots)||void 0===e?void 0:e[t._currentValue];if(c){const e=Rt(c,t[wt].context,t[wt].compStylePid),r=vt(e.__render());i.insertBefore(r.length>1?D(r):r[0],s),n[0]=e}else n[0]=document.createComment("empty"),i.insertBefore(n[0],s);o?r.__destroy():i.removeChild(s),c&&n[0].__handleAfterRender(),t.__notify("branch-switched",t._branch)}function It(t,e,n,r){const o=t[1];if(o.nodeType!==Node.ELEMENT_NODE)return;const s=r._onEndHandler;o.classList.remove(e+(n?"-enter":"-leave")),o.classList.remove(e+(n?"-enter-active":"-leave-active")),I(o,"transitionend",s),I(o,"animationend",s),r.__notify("transition",n?"enter-cancelled":"leave-cancelled",o)}function Lt(t,e,n,r){const o=t[1],s=r._onEndHandler;if(o.nodeType!==Node.ELEMENT_NODE)return void s();const i=e+(n?"-enter":"-leave"),c=e+(n?"-enter-active":"-leave-active");o.classList.add(i),xt(o),o.classList.add(c);const l=xt(o);l?(t[0]=n?Dt.ENTERING:Dt.LEAVING,M(o,l,s),r.__notify("transition",n?"before-enter":"before-leave",o),w(()=>{r.__notify("transition",n?"enter":"leave",o)})):s()}function Pt(t){(Nt(t[wt].rootNodes[0])||t[wt].slots&&t[wt].slots[t._currentValue])&&(t._transitionMap?function(t){const e=t._currentValue,n=t._previousValue,r=t.transition;let o=t._transitionMap.get(n);if(o||(o=["else"===n?Dt.LEAVED:Dt.ENTERED,null],t._transitionMap.set(n,o)),o[0]===Dt.ENTERING){if(e===n)return;It(o,r,!0,t),Lt(o,r,!1,t)}else if(o[0]===Dt.LEAVING){if(e!==n)return;It(o,r,!1,t),Lt(o,r,!0,t)}else o[0]===Dt.ENTERED?(o[1]=t.__transitionDOM,Lt(o,r,!1,t)):o[0]===Dt.LEAVED&&(o[1]=t.__transitionDOM,Lt(o,r,!0,t))}(t):Mt(t))}function Ct(t){const e=t._currentValue,n=t._previousValue,r=t.transition,o=t._transitionMap.get(n),s=o[0]===Dt.ENTERING,i=o[1];if(i.nodeType===Node.ELEMENT_NODE&&(I(i,"transitionend",t._onEndHandler),I(i,"animationend",t._onEndHandler),i.classList.remove(r+(s?"-enter":"-leave")),i.classList.remove(r+(s?"-enter-active":"-leave-active")),t.__notify("transition",s?"after-enter":"after-leave")),o[0]=s?Dt.ENTERED:Dt.LEAVED,s)return;Mt(t),t._previousValue=e;const c=t._transitionMap.get(e);if(!c)return;const l=t.__transitionDOM;l.nodeType===Node.ELEMENT_NODE?(c[1]=l,Lt(c,r,!0,t)):c[0]=Dt.ENTERED}function At(t){t._transitionMap&&(t._transitionMap.forEach(e=>{const n=e[1];n&&(I(n,"transitionend",t._onEndHandler),I(n,"animationend",t._onEndHandler))}),t._transitionMap=null)}class Vt extends bt{constructor(t){super(t);const e=this[L].proxy;e._currentValue="default",e._onEndHandler=null,e._transitionMap=null,e._previousValue=null;const n=()=>{e.expect=t.expect};n(),t[L].__watch("expect",n);const r=()=>{e.transition=t.transition};r(),t[L].__watch("transition",r)}get expect(){return"default"===this._currentValue}set expect(t){const e=t?"default":"else";this._currentValue!==e&&(this._currentValue=e,this.__updateIfNeed())}get _branch(){return this.expect}onTransitionEnd(){Ct(this)}__render(){return St(this)}__update(){Pt(this)}__beforeDestroy(){At(this)}}class Ht extends bt{constructor(t){super(t);const e=this[L].proxy;e._onEndHandler=null,e._transitionMap=null,e._previousValue=null,e._currentValue=null;const n=()=>{e.test=t.test};n(),t[L].__watch("test",n);const r=()=>{e.transition=t.transition};r(),t[L].__watch("transition",r)}get test(){return this._currentValue}set test(t){const e=this[wt].slots;e&&t in e||(t="default"),this._currentValue!==t&&(this._currentValue=t,this.__updateIfNeed())}get _branch(){return this.test}onTransitionEnd(){Ct(this)}__render(){return St(this)}__update(){Pt(this)}__beforeDestroy(){At(this)}}var jt,Ut,kt,$t=function(t){const e=t;return[(()=>{const e=R("h1",t[wt].compStylePid,"Transition Demo");return t[wt].rootNodes.push(e),e})(),(()=>{const e=R("p",t[wt].compStylePid,"Jinge framework only provide basic transition/animation supports.");return t[wt].rootNodes.push(e),e})(),(()=>{const e=R("p",t[wt].compStylePid,"TODO: implement advance transtion/animation supports");return t[wt].rootNodes.push(e),e})(),(()=>{const e=R("h3",t[wt].compStylePid,"Toggle className");return t[wt].rootNodes.push(e),e})(),(()=>{const n=R("div",t[wt].compStylePid,S("p",...(()=>{const n=_t({[wt]:{context:t[wt].context,listeners:{transition:{fn:function(...t){e.handleTransition(...t)},opts:null}},slots:{default:function(t){return[(()=>{const e=R("div",Object.assign({class:"ts"},t[wt].compStylePid),"Hello, World");return t[wt].rootNodes.push(e),e})()]}}},class:null,transition:!0}),r=()=>{n.class=dt({fade:e.fade,slide:e.slide})};r(),e[L].__watch(["fade"],r,t[L]),e[L].__watch(["slide"],r,t[L]);const o=Ot.create(n);return t[wt].nonRootCompNodes.push(o),vt(o.__render())})()),(()=>{const t=S("button","Fade");return M(t,"click",(function(...t){e.fade=!e.fade})),t})(),(()=>{const t=S("button","Slide");return M(t,"click",(function(...t){e.slide=!e.slide})),t})(),(()=>{const t=S("button","Both");return M(t,"click",(function(...t){e.fade=!e.fade,e.slide=!e.slide})),t})());return t[wt].rootNodes.push(n),n})(),(()=>{const e=R("h3",t[wt].compStylePid,"Hide/Show");return t[wt].rootNodes.push(e),e})(),(()=>{const n=R("div",t[wt].compStylePid,(()=>{const n=S("button",(()=>{const n=b(),r=()=>{v(n,e.show?"Hide":"Show")};return r(),e[L].__watch(["show"],r,t[L]),n})());return M(n,"click",(function(...t){e.show=!e.show})),n})(),...(()=>{const n=_t({[wt]:{context:t[wt].context,slots:{default:function(t){return[(()=>{const e=R("p",t[wt].compStylePid,"Hello, World");return t[wt].rootNodes.push(e),e})()]}}},test:null,transition:!0}),r=()=>{n.test=!e.show};r(),e[L].__watch(["show"],r,t[L]);const o=Tt.create(n);return t[wt].nonRootCompNodes.push(o),vt(o.__render())})());return t[wt].rootNodes.push(n),n})(),(()=>{const e=R("h3",t[wt].compStylePid,"If");return t[wt].rootNodes.push(e),e})(),(()=>{const n=R("div",t[wt].compStylePid,(()=>{const n=S("button",(()=>{const n=b(),r=()=>{v(n,e.show2?"Hide":"Show")};return r(),e[L].__watch(["show2"],r,t[L]),n})());return M(n,"click",(function(...t){e.show2=!e.show2})),n})(),...(()=>{const n=_t({[wt]:{context:t[wt].context,listeners:{transition:{fn:function(...t){e.log(...t)},opts:null}},slots:{default:function(t){return[(()=>{const e=R("p",t[wt].compStylePid,"Hello, World");return t[wt].rootNodes.push(e),e})()]}}},expect:null,transition:"slide-fade"}),r=()=>{n.expect=e.show2};r(),e[L].__watch(["show2"],r,t[L]);const o=Vt.create(n);return t[wt].nonRootCompNodes.push(o),vt(o.__render())})());return t[wt].rootNodes.push(n),n})(),(()=>{const e=R("h3",t[wt].compStylePid,"If/Else");return t[wt].rootNodes.push(e),e})(),(()=>{const n=R("div",t[wt].compStylePid,(()=>{const t=S("button","Toggle");return M(t,"click",(function(...t){e.show3=!e.show3})),t})(),...(()=>{const n=_t({[wt]:{context:t[wt].context,listeners:{"branch-switched":{fn:function(...t){e.log("if updated",...t)},opts:null}},slots:{default:function(t){return[(()=>{const e=R("p",t[wt].compStylePid,"Hello, A!");return t[wt].rootNodes.push(e),e})()]},else:function(t){return[(()=>{const e=R("p",t[wt].compStylePid,"Hello, B!");return t[wt].rootNodes.push(e),e})()]}}},expect:null,transition:"slide-fade"}),r=()=>{n.expect=e.show3};r(),e[L].__watch(["show3"],r,t[L]);const o=Vt.create(n);return t[wt].nonRootCompNodes.push(o),vt(o.__render())})());return t[wt].rootNodes.push(n),n})(),(()=>{const e=R("h3",t[wt].compStylePid,"Switch");return t[wt].rootNodes.push(e),e})(),(()=>{const n=R("div",t[wt].compStylePid,(()=>{const n=S("button","Increment ",(()=>{const n=b(),r=()=>{v(n,e.si)};return r(),e[L].__watch(["si"],r,t[L]),n})());return M(n,"click",(function(...t){e.si=e.si?e.si+1:1})),n})(),(()=>{const n=S("button","Decrement ",(()=>{const n=b(),r=()=>{v(n,e.si)};return r(),e[L].__watch(["si"],r,t[L]),n})());return M(n,"click",(function(...t){e.si=e.si?e.si-1:0})),n})(),...(()=>{const n=_t({[wt]:{context:t[wt].context,listeners:{"branch-switched":{fn:function(...t){e.log("switch updated",...t)},opts:null}},slots:{1:function(t){return[(()=>{const e=R("p",t[wt].compStylePid,"Hello, A!");return t[wt].rootNodes.push(e),e})()]},2:function(t){return[(()=>{const e=R("p",t[wt].compStylePid,"Hello, B!");return t[wt].rootNodes.push(e),e})()]},default:function(t){return[(()=>{const n=R("p",t[wt].compStylePid,"Hello, ",(()=>{const n=b(),r=()=>{v(n,e.si)};return r(),e[L].__watch(["si"],r,t[L]),n})());return t[wt].rootNodes.push(n),n})()]}}},test:null,transition:"slide-fade"}),r=()=>{n.test=e.si};r(),e[L].__watch(["si"],r,t[L]);const o=Ht.create(n);return t[wt].nonRootCompNodes.push(o),vt(o.__render())})());return t[wt].rootNodes.push(n),n})(),(()=>{const e=R("h3",t[wt].compStylePid,"For");return t[wt].rootNodes.push(e),e})(),(()=>{const e=R("p",t[wt].compStylePid,"Not supported!");return t[wt].rootNodes.push(e),e})(),(()=>{const e=R("p",t[wt].compStylePid,"TODO: implement transition for component: <for>");return t[wt].rootNodes.push(e),e})()]};jt=class extends bt{static get template(){return $t}log(...t){console.log(...t)}constructor(t){super(t);const e=this[L].proxy;e.fade=!1,e.slide=!0,e.show=!0,e.si=0}handleTransition(t,e,n){console.log(t,e,n.className)}handleIfTransition(t,e){console.log(t,e.className)}},Ut=document.getElementById("root-app"),jt.create(kt).__renderToDOM(Ut,Ut!==document.body)}]);