{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/util/type.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/util/array.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/util/common.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/util/setimm.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/util/dom.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/vm/common.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/vm/notify.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/vm/node.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/vm/core.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/vm/proxy.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/core/messenger.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/core/style.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/core/i18n.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/core/component.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/core/transition.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/components/for.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/components/parameter.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/core/bootstrap.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/core/render_fns.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-router/lib/common.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-router/node_modules/path-to-regexp/dist.es2015/index.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-router/lib/components/view.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-router/lib/components/redirect.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-router/lib/router.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-router/lib/components/link.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-router/lib/components/router.js","webpack:///./app.html","webpack:///./components/footer_a.js","webpack:///./components/footer_b.js","webpack:///./components/hello_2.js","webpack:///./components/hello_1.js","webpack:///./components/about.js","webpack:///./components/hello.html","webpack:///./components/hello.js","webpack:///./components/people.js","webpack:///./components/person.js","webpack:///./index.js","webpack:///./api.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","installedModules","0","__webpack_require__","exports","module","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","script","document","createElement","charset","timeout","nc","setAttribute","src","p","jsonpScriptSrc","error","Error","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","message","name","request","undefined","setTimeout","head","appendChild","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","window","oldJsonpFunction","slice","s","typeOf","v","isObject","isString","isNumber","Number","isNaN","isFinite","isUndefined","isArray","Array","isFunction","arrayRemove","array","item","idx","indexOf","splice","arrayPushIfNotExist","UID_INC","uid","Date","now","toString","Math","floor","random","warning","warn","args","tasksByHandle","registerImmediate","autoIncrement","nextHandle","currentlyRunningATask","clearImmediateFallback","handle","delete","runIfPresent","callback","setImmediate","Map","messagePrefix","addEventListener","source","startsWith","postMessage","arguments","set","clearImmediate","setText","$element","text","JSON","stringify","textContent","createTextNode","createFragment","children","f","createDocumentFragment","forEach","appendChildren","$parent","$ele","attrName","attrValue","attrN","removeAttribute","_createEl","$el","attrs","an","tag","createElementWithoutAttrs","insertAfter","newNode","referenceNode","rn","nextSibling","insertBefore","addEvent","eventName","handler","capture","passive","removeEvent","removeEventListener","registerEvent","$$","isInnerObj","clazz","constructor","RegExp","Boolean","isViewModel","isPublicProperty","charCodeAt","getPropertyName","parsePropertyPath","propertyPath","split","addParent","child","parent","__parents","core","prop","removeParent","findIndex","shiftParent","delta","find","it","handleTasks","handleCancel","immediate","loopHandle","node","handlers","__handlers","has","imm","arg","handleOnce","listeners","__listeners","loopClearNode","sn","__parent","this","__notifiable","__related","__setters","proxy","writable","configurable","related","dbStarIdx","loopCreateNode","parentNode","level","propertyName","__property","__addRelated","loopGetNode","_a","size","deleteNode","__rmRelated","loopNotify","vm","parents","ps","__notify","concat","hooks","origin","hook","__unwatch","sfm","fn","getOwnPropertyNames","isPropArray","arr1","arr2","arrayEqual","notifyPropChanged","__propSetHandler","setFn","assertVM","oldVal","newValIsVM","__objectPropSetFn","__componentPropSetFn","setterFn","obj","map","desc","getOwnPropertyDescriptor","getPrototypeOf","getSetterFnIfPropIsSetter","objectPropSetHandler","attrsPropSetHandler","componentPropSetHandler","arrayNotifyItems","idxStart","idxEnd","ObjectProxyHandler","PromiseProxyHandler","_arrayReverseSort","wrapSubArray","arr","wrapEachItem","rtn","wrapProxy","createViewModel","_arrayShiftOrUnshiftProp","el","_argAssert","ArrayFns","delCount","unshift","pop","fill","reverse","sort","filter","si","ei","ArrayProxyHandler","oldLen","arrayLengthSetHandler","isArr","Proxy","then","wrapProp","k","watch","__watch","unwatch","MESSENGER_LISTENERS","templateListeners","__on","opts","eventListener","options","once","__off","prepend","clear","manager","sty","$style","id","dom","styleSheet","cssText","css","styleMap","info","refs","$e","style","class","body","exist","getComputedStyle","getPropertyValue","removeChild","isHideCssExists","getElementById","TextFnCache","compile","Function","replace","defaultFetchFn","url","fetch","res","mergeDictOrRender","main","async","loadChunks","i18n","fetchFn","activeChunks","__activeChunks","__chunks","ac","cn","chunks","code","_assert","__data","super","__deps","__cache","__key","__regLoc","JINGE_I18N_DATA","locale","depent","deps","__renders","render","components","attributes","chunkName","mainData","dictionary","filename","params","dict","substring","renderFactory","renderDict","listener","ComponentStates","ContextStates","__","isComponent","assertRenderResults","renderResults","wrapAttrs","vmCore","createAttributes","compilerAttrs","component","createComponent","passedAttrs","context","contextState","UNTOUCH","slots","state","INITIALIZE","rootNodes","nonRootCompNodes","relatedRefs","upNextMap","compStyle","deregDOM","deregI18N","deregs","unwatcher","deregister","lisDeregister","$event","ignoredEventNames","targetEl","RENDERED","lis","__firstDOM","nodeType","Node","ELEMENT_NODE","__domAddListener","stop","prevent","$evt","stopPropagation","preventDefault","__transitionDOM","rns","__lastDOM","Clazz","renderFn","template","default","add","replaceMode","rr","__render","oldNode","attch","replaceChild","__handleAfterRender","removeDOM","comp","WILLDESTROY","__beforeDestroy","__handleBeforeDestroy","remove","__destroy","ref","deregFn","DESTROIED","TOUCHED","TOUCHED_FREEZED","UNTOUCH_FREEZED","__afterRender","nextTick","__update","ntMap","first","forceOverride","assign","relatedComponent","elOrArr","isComp","rbs","TransitionStates","index","isLast","__vm_792732ac1261","each","_e","isFirst","createEl","itemRenderFn","parentCompomentStyles","appendRenderEach","roots","_prepareKey","keyMap","keyName","renderItems","items","keys","result","tmpKeyMap","loopAppend","updateEl","_parseIndexPath","test","loop","_l","kn","_keyName","_length","_keys","_waitingUpdate","propCount","propPath","__updateIfNeed","_updateItem","createComment","oldEl","newKey","$fd","newEl","newItems","nl","ol","fd","$cmt","ctx","parentComponentStyles","firstEl","$f","$le","oldKeys","oldKeyMap","newKeys","newKeyMap","oi","ni","$lastS","newRoots","oldTags","Uint8Array","cei","$n","oldKey","$nes","reuseEl","oldIdx","bootstrap","ComponentClazz","app","__renderToDOM","emptyRenderFn","textRenderFn","txtContent","VIEW_NAME_PATH","isParamsOrQuerySame","dst","encodeParamsOrQuery","encodeURIComponent","join","parse","str","tokens","char","count","pattern","j","TypeError","lexer","prefixes","defaultPattern","escapeString","delimiter","path","tryConsume","mustConsume","nextType","consumeText","prefix","suffix","modifier","name_1","pattern_1","reFlags","flags","encode","x","_b","validate","matches","token","optional","repeat","segment","typeOfMessage","String","tokensToFunction","match","re","decode","pathname","exec","_loop_1","regexpToFunction","pathToRegexp","sensitive","stringToRegexp","strict","start","_c","end","_d","endsWith","route","_i","tokens_1","mod","endToken","isEndDelimited","tokensToRegexp","groups","regexpToRegexp","paths","parts","arrayToRegexp","removeMoreThanOne","_name","_router","__getContext","parentNamePath","_path","__setContext","resolving","_asyncKey","__regView","from","to","__routeShouldLeave","errRenderFn","$cursor","current","routeMatchItem","asyncKey","$pa","loadingRenderFn","loadingEl","_routePath","parentResolves","reduce","pv","resolveDefs","define","currentResolves","resolveOrFn","query","_renderErr","CompClazz","ex","__deregView","normPath","getPathnameAndSearch","destination","__map","baseHref","rs","_p","p2r","toPath","search","__mode","__started","__dereg","__routes","__views","__guard","before","after","__info","_pathname","__asyncKey","__base","guardFn","viewNamePath","viewComponent","viewName","_updateView","catch","_onErr","addRoute","container","hasChild","_route","decodeURIComponent","redirect","cr","isHashMode","_onHashChange","_onStateChange","hash","location","qi","_update","segments","trim","fromEntries","seg","pair","parseQuery","newMatchPath","matchRoutePath","routes","parentPath","last","newRouteInfo","go","sameLevel","oldIt","newIt","viewsToUpdate","getViewsToUpdate","views","resetLv","curLv","lv","vn","vtp","shouldUpdated","_shouldUpdateView","_search","_url","history","replaceState","beforeEachGuardFns","routeDef","onLeave","onEnter","afterEachGuardFns","rp","checkQuery","pathAndSearch","pushState","open","fn_2_792732ac1261","fn_3_792732ac1261","fn_4_792732ac1261","fn_5_792732ac1261","fn_6_792732ac1261","className","fn_7_792732ac1261","fn_8_792732ac1261","active","_tag","_el","_dereg","_queryWatched","_clickHandler","_onClick","_routerChangedHandler","_onRouterChanged","vm_0","__ac","fn_0","isActive","_udef","fn_1","_updateActive","_target","_updateTarget","_active","classList","_to","_updateHrefAndActive","defaultPrevented","metaKey","ctrlKey","tagName","_updateHref","href","includes","router","rd","register","checked","newTab","personId","vm_1","_routes","qa","_oqc","_onQueryChange","_query","a","b","confirm","log","_people","people","_0","_person","company","email","address","someConst","someFn","someFnPromise","person","footer","getPersonById"],"mappings":"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","file":"bundle.min.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t};\n\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"\" + ({}[chunkId]||chunkId) + \".bundle.min.js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"dist/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","export function typeOf(v) {\n    return typeof v;\n}\nexport function isObject(v) {\n    return v !== null && typeOf(v) === 'object';\n}\nexport function isString(v) {\n    return typeOf(v) === 'string';\n}\nexport function isNumber(v) {\n    return typeOf(v) === 'number' && !Number.isNaN(v) && Number.isFinite(v);\n}\nexport function isUndefined(v) {\n    return typeOf(v) === 'undefined';\n}\nexport function isArray(v) {\n    return Array.isArray(v);\n}\nexport function isBoolean(v) {\n    return typeof v === 'boolean' || (v instanceof Boolean);\n}\nexport function isFunction(v) {\n    return typeOf(v) === 'function';\n}\nexport function isPromise(obj) {\n    return isObject(obj) && isFunction(obj.then);\n}\n//# sourceMappingURL=type.js.map","export function arrayRemove(array, item) {\n    const idx = array.indexOf(item);\n    if (idx < 0)\n        return false;\n    array.splice(idx, 1);\n    return true;\n}\nexport function arrayPushIfNotExist(array, item) {\n    const idx = array.indexOf(item);\n    if (idx >= 0)\n        return;\n    array.push(item);\n}\nexport function arrayEqual(arr1, arr2) {\n    if (arr1.length !== arr2.length)\n        return false;\n    for (let i = 0; i < arr1.length; i++) {\n        if (arr1[i] !== arr2[i])\n            return false;\n    }\n    return true;\n}\n//# sourceMappingURL=array.js.map","let UID_INC = 0;\nexport function uid() {\n    return Date.now().toString(32) + '-' + Math.floor(Math.random() * 0xffffff).toString(32) + '-' + (UID_INC++).toString(32);\n}\nlet warning = true;\nexport function warn(...args) {\n    // eslint-disable-next-line no-console\n    warning && console.warn(...args);\n}\nexport function disableWarning() {\n    warning = false;\n}\n//# sourceMappingURL=common.js.map","/**\n * setImmediate polyfill only for modern browsers\n * Copied from https://github.com/YuzuJS/setImmediate/blob/master/setImmediate.js\n * Simplified by Yuhang-Ge<abeyuhang@gmail.com>\n */\nimport { isUndefined, isFunction, isString } from './type';\nlet autoIncrement = 0;\nlet nextHandle = 1; // Spec says greater than zero\nlet tasksByHandle;\nlet currentlyRunningATask = false;\nlet registerImmediate;\nfunction setImmediateFallback(callback) {\n    if (!isFunction(callback) || arguments.length > 1) {\n        throw new Error('setImmediate require callback function.');\n    }\n    tasksByHandle.set(nextHandle, callback);\n    registerImmediate(nextHandle);\n    // console.log('siiii', callback);\n    return nextHandle++;\n}\nfunction clearImmediateFallback(handle) {\n    tasksByHandle.delete(handle);\n}\nfunction runIfPresent(handle) {\n    // From the spec: 'Wait until any invocations of this algorithm started before this one have completed.'\n    // So if we're currently running a task, we'll need to delay this invocation.\n    if (currentlyRunningATask) {\n        // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n        // 'too much recursion' error.\n        setTimeout(runIfPresent, 0, handle);\n        return;\n    }\n    const callback = tasksByHandle.get(handle);\n    // console.log('stttt', handle, callback);\n    if (!callback)\n        return;\n    currentlyRunningATask = true;\n    try {\n        callback();\n    }\n    finally {\n        clearImmediateFallback(handle);\n        currentlyRunningATask = false;\n    }\n}\nif (isUndefined(window.setImmediate)) {\n    tasksByHandle = new Map();\n    const messagePrefix = 'setImmediate$' + (autoIncrement++).toString(32) + '$';\n    window.addEventListener('message', event => {\n        if (event.source === window &&\n            isString(event.data) &&\n            event.data.startsWith(messagePrefix)) {\n            runIfPresent(Number(event.data.slice(messagePrefix.length)));\n        }\n    }, false);\n    registerImmediate = function (handle) {\n        window.postMessage(messagePrefix + handle, '*');\n    };\n}\nexport const setImmediate = window.setImmediate || setImmediateFallback;\nexport const clearImmediate = window.clearImmediate || clearImmediateFallback;\n//# sourceMappingURL=setimm.js.map","import { isString, isUndefined, isObject } from './type';\nexport function setText($element, text) {\n    if (!isString(text)) {\n        text = JSON.stringify(text);\n    }\n    $element.textContent = text;\n}\nexport function createTextNode(text = '') {\n    return document.createTextNode(isString(text) ? text : JSON.stringify(text));\n}\nexport function createFragment(children) {\n    const f = document.createDocumentFragment();\n    children && children.forEach(n => {\n        f.appendChild(isString(n) ? document.createTextNode(n) : n);\n    });\n    return f;\n}\nexport function appendChildren($parent, children) {\n    $parent.appendChild(createFragment(children));\n}\nexport function replaceChildren($parent, children, oldNode) {\n    $parent.replaceChild(createFragment(children), oldNode);\n}\nexport function removeAttribute($ele, attrName) {\n    if (!attrName)\n        return;\n    if (isObject(attrName)) {\n        for (const attrN in attrName) {\n            removeAttribute($ele, attrN);\n        }\n        return;\n    }\n    return $ele.removeAttribute(attrName);\n}\nexport function setAttribute($ele, attrName, attrValue) {\n    if (!attrName)\n        return;\n    if (isObject(attrName)) {\n        for (const attrN in attrName) {\n            setAttribute($ele, attrN, attrName[attrN]);\n        }\n        return;\n    }\n    if (isUndefined(attrValue) || attrValue === null) {\n        removeAttribute($ele, attrName);\n    }\n    else {\n        $ele.setAttribute(attrName, attrValue);\n    }\n}\nfunction _createEl($el, attrs, children) {\n    if (attrs) {\n        for (const an in attrs) {\n            if (an && !isUndefined(attrs[an])) {\n                setAttribute($el, an, attrs[an]);\n            }\n        }\n    }\n    appendChildren($el, children);\n    return $el;\n}\nexport function createElement(tag, attrs, ...children) {\n    return _createEl(document.createElement(tag), attrs, children);\n}\nexport function createElementWithoutAttrs(tag, ...children) {\n    return createElement(tag, null, ...children);\n}\nexport function createSVGElement(tag, attrs, ...children) {\n    return _createEl(document.createElementNS('http://www.w3.org/2000/svg', tag), attrs, children);\n}\nexport function createSVGElementWithoutAttrs(tag, ...children) {\n    return createSVGElement(tag, null, ...children);\n}\nexport function createElementWithChild(tag, attrs, child) {\n    const $e = createElement(tag, attrs);\n    $e.appendChild(child);\n    return $e;\n}\nexport function insertAfter($parent, newNode, referenceNode) {\n    const rn = referenceNode.nextSibling;\n    if (!rn) {\n        $parent.appendChild(newNode);\n    }\n    else {\n        $parent.insertBefore(newNode, rn);\n    }\n}\n// export function hasClass($ele: Element, className: string): boolean {\n//   return $ele.classList.contains(className);\n// }\n// export function toggleClass($ele: Element, className: string, force?: boolean): boolean {\n//   return $ele.classList.toggle(className, force);\n// }\n// export function addClass($ele: Element, className: string): boolean {\n//   return toggleClass($ele, className, true);\n// }\n// export function removeClass($ele: Element, className: string): boolean {\n//   return toggleClass($ele, className, false);\n// }\n// export function replaceClass($ele: Element, oldClass: string, newClass: string): void {\n//   return $ele.classList.replace(oldClass, newClass);\n// }\nexport function addEvent($element, eventName, handler, capture) {\n    isUndefined(capture) && (capture = eventName.startsWith('touch') ? {\n        capture: false,\n        passive: true\n    } : false);\n    $element.addEventListener(eventName, handler, capture);\n}\nexport function removeEvent($element, eventName, handler) {\n    $element.removeEventListener(eventName, handler);\n}\n/**\n * Add event to DOM element, similar as addEventListener,\n * but return deregister function which will call removeEventListener.\n *\n * @returns {Function} deregister function which will removeEventListener\n */\nexport function registerEvent($element, eventName, handler, capture) {\n    addEvent($element, eventName, handler, capture);\n    return function deregister() {\n        removeEvent($element, eventName, handler);\n    };\n}\n//# sourceMappingURL=dom.js.map","import { isString, isUndefined, isObject, isArray, } from '../util';\nexport const $$ = Symbol('$$');\nexport function isInnerObj(v) {\n    const clazz = v.constructor;\n    return clazz === RegExp || clazz === Date || clazz === Boolean;\n}\nexport function isViewModel(v) {\n    return isObject(v) && ($$ in v);\n}\nexport function isPublicProperty(v) {\n    return isString(v) && v.charCodeAt(0) !== 95;\n}\n/**\n * @internal\n */\nexport function getPropertyName(v) {\n    if (isString(v)) {\n        return v;\n    }\n    if (v === null) {\n        return 'null';\n    }\n    if (isUndefined(v)) {\n        return 'undefined';\n    }\n    return v.toString();\n}\n/**\n * @internal\n */\nexport function parsePropertyPath(propertyPath) {\n    return isString(propertyPath) ? (propertyPath.indexOf('.') > 0 ? propertyPath.split('.') : [propertyPath]) : (isArray(propertyPath) ? propertyPath : [propertyPath]);\n}\n/**\n * @internal\n */\nexport function addParent(child, parent, property) {\n    if (!child.__parents) {\n        child.__parents = [];\n    }\n    child.__parents.push({\n        core: parent,\n        prop: property\n    });\n}\n/**\n * @internal\n */\nexport function removeParent(child, parent, property) {\n    if (!child.__parents) {\n        return;\n    }\n    const idx = child.__parents.findIndex(item => {\n        return item.core === parent && item.prop === property;\n    });\n    if (idx >= 0) {\n        child.__parents.splice(idx, 1);\n    }\n}\n/**\n * @internal\n */\nexport function shiftParent(child, parent, property, delta) {\n    if (!child.__parents)\n        return;\n    const item = child.__parents.find(it => {\n        return it.core === parent && it.prop === property;\n    });\n    if (item) {\n        item.prop += delta;\n    }\n}\n//# sourceMappingURL=common.js.map","import { setImmediate, clearImmediate } from '../util';\nimport { getPropertyName } from './common';\nconst handleTasks = new Map();\n/**\n * @internal\n */\nexport function handleCancel(handler) {\n    const t = handleTasks.get(handler);\n    if (t) {\n        clearImmediate(t.immediate);\n        handleTasks.delete(handler);\n    }\n}\n/**\n * @internal\n */\nexport function handleOnce(handler, propertyPath) {\n    if (handleTasks.has(handler)) {\n        return;\n    }\n    const imm = setImmediate(() => {\n        const arg = handleTasks.get(handler);\n        try {\n            handler(arg.propertyPath);\n        }\n        finally {\n            handleTasks.delete(handler);\n        }\n    });\n    handleTasks.set(handler, {\n        immediate: imm,\n        propertyPath: propertyPath\n    });\n}\n/**\n * @internal\n */\nexport function loopHandle(propertyPath, node, immediate) {\n    const handlers = node.__handlers;\n    handlers && handlers.forEach(handler => {\n        if (immediate) {\n            handler(propertyPath);\n        }\n        else {\n            handleOnce(handler, propertyPath);\n        }\n    });\n    const listeners = node.__listeners;\n    listeners && listeners.forEach(c => {\n        loopHandle(propertyPath, c, immediate);\n    });\n}\n/**\n * @internal\n */\nexport function loopNotify(vm, propertyPath, immediate, level = 0) {\n    const listeners = vm.__listeners;\n    if (!listeners) {\n        return;\n    }\n    const propertyName = getPropertyName(propertyPath[level]);\n    if (!propertyName) {\n        return;\n    }\n    let node = listeners.get(propertyName);\n    if (node) {\n        if (propertyPath.length - 1 === level) {\n            // loopHandle(props, node, config[CFG_VM_DEBUG] ? null : imms);\n            loopHandle(propertyPath, node, immediate);\n        }\n        else {\n            loopNotify(node, propertyPath, immediate, level + 1);\n        }\n    }\n    node = listeners.get('*');\n    if (node) {\n        if (propertyPath.length - 1 === level) {\n            loopHandle(propertyPath, node, true);\n        }\n        else {\n            loopNotify(node, propertyPath, immediate, level + 1);\n        }\n    }\n    node = listeners.get('**');\n    if (node) {\n        loopHandle(propertyPath, node, true);\n    }\n}\n//# sourceMappingURL=notify.js.map","import { getPropertyName } from './common';\nimport { handleCancel } from './notify';\n/**\n * @internal\n */\nexport function loopCreateNode(parentNode, propertyPath, level = 0) {\n    const propertyName = getPropertyName(propertyPath[level]);\n    if (!parentNode.__listeners) {\n        parentNode.__listeners = new Map();\n    }\n    let node = parentNode.__listeners.get(propertyName);\n    if (!node) {\n        node = {\n            __parent: parentNode,\n            __property: propertyName,\n            __handlers: null,\n            __listeners: null\n        };\n        parentNode.__listeners.set(propertyName, node);\n    }\n    if (propertyPath.length - 1 === level) {\n        return node;\n    }\n    else {\n        return loopCreateNode(node, propertyPath, level + 1);\n    }\n}\n/**\n * @internal\n */\nexport function loopGetNode(parentNode, propertyPath, level = 0) {\n    var _a;\n    const propertyName = getPropertyName(propertyPath[level]);\n    if (!propertyName) {\n        return null;\n    }\n    const node = (_a = parentNode.__listeners) === null || _a === void 0 ? void 0 : _a.get(propertyName);\n    if (!node) {\n        return null;\n    }\n    if (propertyPath.length - 1 === level) {\n        return node;\n    }\n    else {\n        return loopGetNode(node, propertyPath, level + 1);\n    }\n}\n/**\n * @internal\n */\nexport function deleteNode(node) {\n    if ((node && node.__handlers && node.__handlers.length > 0) ||\n        (node.__listeners && node.__listeners.size > 0)) {\n        return null;\n    }\n    /**\n     * if one node don't have any listener or child, delete it.\n     */\n    const parent = node.__parent;\n    const property = node.__property;\n    node.__parent = null; // unlink parent.\n    parent.__listeners.delete(property);\n    return parent;\n}\n/**\n * @internal\n */\nexport function loopClearNode(node) {\n    const listeners = node.__listeners;\n    if (listeners) {\n        // loop clear all child nodes\n        listeners.forEach(sn => loopClearNode(sn));\n        node.__listeners = null;\n    }\n    // destroy all handlers\n    const handlers = node.__handlers;\n    if (handlers) {\n        // clear handler waiting to execute\n        handlers.forEach(handleCancel);\n        node.__handlers = null;\n    }\n    // unlink parent\n    node.__parent = null;\n}\n//# sourceMappingURL=node.js.map","import { arrayRemove, isArray, arrayEqual, isObject } from '../util';\nimport { parsePropertyPath, $$, removeParent, } from './common';\nimport { loopCreateNode, loopGetNode, loopClearNode, deleteNode } from './node';\nimport { handleCancel, loopNotify } from './notify';\nexport class ViewModelCoreImpl {\n    /**\n     * Don't use the constructor. Use createViewModel instead.\n     */\n    constructor(target) {\n        this.__notifiable = true;\n        this.__parents = null;\n        this.__listeners = null;\n        this.__related = null;\n        this.__setters = null;\n        this.target = target;\n        this.proxy = null;\n        Object.defineProperty(target, $$, {\n            value: this,\n            writable: false,\n            configurable: true,\n            enumerable: false\n        });\n    }\n    __watch(propertyPath, handler, related) {\n        propertyPath = parsePropertyPath(propertyPath);\n        const dbStarIdx = propertyPath.indexOf('**');\n        if (dbStarIdx >= 0 && dbStarIdx !== propertyPath.length - 1) {\n            /**\n             * 'a.b.**' is good.\n             * 'a.b.**.c' is bad.\n             */\n            throw new Error('wizard \"**\" must be last element in path.');\n        }\n        const node = loopCreateNode(this, propertyPath);\n        if (!node.__handlers) {\n            node.__handlers = [];\n        }\n        if (node.__handlers.indexOf(handler) < 0) {\n            node.__handlers.push(handler);\n        }\n        if (related && related !== this) {\n            /**\n             * If some child of this component is passed as argument(ie.\n             * use arg:pass attribute) like ng-tranclude in angular 1.x,\n             * the child may contain some messenger listeners not belong to\n             * this component but belong to outer parent.\n             *\n             * When destroy this component, we should also remove messenger listeners\n             *   belong to outer parent to prevent memory leak.\n             * To implement this goal, we maitain VM_RELATED_LISTENERS.\n             * When render view-tree, any messenger listeners belong to outer\n             * parent, will be also linked under VM_RELATED_LISTENERS, then\n             * when we destroy this component, the listeners can also be clear.\n             *\n             * For examle:\n             *\n             * <!-- outer parent: RootApp -->\n             * <div>\n             * <if expect=\"show\">\n             * <Tooltip>\n             * <argument arg:pass=\"default\">\n             * <p>hello, world. my name is ${name}</p>\n             * </argument>\n             * </Tooltip>\n             * </if>\n             * </div>\n             *\n             * when the `show` variable changed from true to false, the\n             * Tooltip component will be destroy. The messenger listener belong\n             * to the outer parent RootApp which watch `name` variable should\n             * also be removed.\n             */\n            related.__addRelated(this, propertyPath, handler);\n        }\n    }\n    __unwatch(propertyPath, handler, related) {\n        if (!propertyPath) {\n            loopClearNode(this);\n            return;\n        }\n        const node = loopGetNode(this, parsePropertyPath(propertyPath));\n        if (!node) {\n            return;\n        }\n        const handlers = node.__handlers;\n        if (!handlers) {\n            return;\n        }\n        if (!handler) { // remove all if second parameter is not provided\n            handlers.forEach(handleCancel);\n            handlers.length = 0;\n        }\n        else {\n            handleCancel(handler);\n            arrayRemove(handlers, handler);\n        }\n        deleteNode(node);\n        if (related && related !== this) {\n            related.__rmRelated(this, propertyPath, handler);\n        }\n    }\n    __notify(propertyPath, immediate = false) {\n        if (!this.__notifiable) {\n            return;\n        }\n        propertyPath = parsePropertyPath(propertyPath);\n        if (this.__listeners) {\n            loopNotify(this, propertyPath, immediate);\n        }\n        const parents = this.__parents;\n        parents && parents.forEach(ps => {\n            const vm = ps.core;\n            if (!vm) {\n                // eslint-disable-next-line no-console\n                console.error('dev-warn-unexpected: parent of ViewModelCore has been destroied but not unlink.');\n                return;\n            }\n            vm.__notify([ps.prop].concat(propertyPath), immediate);\n        });\n    }\n    __destroy() {\n        this.__notifiable = false;\n        this.__parents = null;\n        // clear listeners\n        loopClearNode(this);\n        // unlink wrapper proxy\n        this.proxy = null;\n        if (this.__related) {\n            this.__related.forEach((hooks, origin) => {\n                hooks.forEach(hook => {\n                    origin.__unwatch(hook.prop, hook.handler);\n                });\n            });\n            this.__related = null;\n        }\n        const target = this.target;\n        /*\n         * 解除 ViewModel 之间的 VM_PARENTS 关联。\n         * 使用 getOwnPropertyNames 可以获取所有属性，但无法获取 setter 函数定义的属性。\n         */\n        const sfm = this.__setters;\n        if (sfm) {\n            sfm.forEach((fn, prop) => {\n                if (fn === null) {\n                    return;\n                }\n                const v = target[prop];\n                if (!isObject(v) || !($$ in v)) {\n                    return;\n                }\n                removeParent(v[$$], this, prop);\n            });\n            this.__setters = null;\n        }\n        Object.getOwnPropertyNames(target).forEach(prop => {\n            const v = target[prop];\n            if (!isObject(v) || !($$ in v)) {\n                return;\n            }\n            removeParent(v[$$], this, prop);\n        });\n        // unlink vm target\n        delete target[$$];\n        this.target = null;\n    }\n    __addRelated(origin, propertyPath, handler) {\n        if (!this.__related)\n            this.__related = new Map();\n        let hook = this.__related.get(origin);\n        if (!hook) {\n            this.__related.set(origin, hook = []);\n        }\n        hook.push({\n            prop: propertyPath,\n            handler\n        });\n    }\n    __rmRelated(origin, propertyPath, handler) {\n        if (!this.__related)\n            return;\n        const hook = this.__related.get(origin);\n        if (!hook)\n            return;\n        const isPropArray = isArray(propertyPath);\n        const i = hook.findIndex(it => {\n            return handler === it.handler &&\n                (isPropArray\n                    ? arrayEqual(propertyPath, it.prop)\n                    : propertyPath === it.prop);\n        });\n        if (i >= 0) {\n            hook.splice(i, 1);\n        }\n    }\n}\n//# sourceMappingURL=core.js.map","import { isNumber, isArray, isObject, isFunction, isPromise, isUndefined, warn } from '../util';\nimport { addParent, isViewModel, removeParent, shiftParent, isPublicProperty, isInnerObj, $$ } from './common';\nimport { ViewModelCoreImpl } from './core';\n/**\n * check if property named \"prop\" is setter of instance \"obj\",\n * if it's setter, return setter function, otherwise return null.\n * @param {Object} obj\n * @param {String} prop\n *\n * 检测名称为 \"prop\" 的属性是否是 setter，如果是，返回该 setter 函数，\n * 否则，返回 null。\n * 由于 obj 可能是有继承关系的类的实例，因此需要向上检测继承的类的 prototype。\n */\nfunction getSetterFnIfPropIsSetter(obj, prop) {\n    let map = obj[$$].__setters;\n    if (!map) {\n        obj[$$].__setters = map = new Map();\n    }\n    if (!map.has(prop)) {\n        let clazz = obj.constructor;\n        let desc = Object.getOwnPropertyDescriptor(clazz.prototype, prop);\n        let fn;\n        if (desc) {\n            fn = isFunction(desc.set) ? desc.set : null;\n            map.set(prop, fn);\n            return fn;\n        }\n        // lookup to check parent classes\n        clazz = Object.getPrototypeOf(clazz);\n        while (clazz && clazz.prototype) {\n            desc = Object.getOwnPropertyDescriptor(clazz.prototype, prop);\n            if (desc) {\n                fn = isFunction(desc.set) ? desc.set : null;\n                map.set(prop, fn);\n                return fn;\n            }\n            clazz = Object.getPrototypeOf(clazz);\n        }\n        map.set(prop, null);\n        return null;\n    }\n    else {\n        return map.get(prop);\n    }\n}\nfunction notifyPropChanged(vm, prop) {\n    vm[$$].__notify(prop);\n}\nfunction __propSetHandler(target, prop, value, setFn, assertVM = true) {\n    if (!isPublicProperty(prop)) {\n        /**\n         * 如果不强制转成 string，typescript 会报：Type 'symbol' cannot be used as an index type\n         */\n        target[prop] = value;\n        return true;\n    }\n    const oldVal = target[prop];\n    if (oldVal === value && !isUndefined(value)) {\n        return true;\n    }\n    let newValIsVM = isObject(value) && !isInnerObj(value);\n    if (newValIsVM) {\n        newValIsVM = $$ in value;\n        if (assertVM && !newValIsVM) {\n            throw new Error(`public property \"${prop.toString()}\" of ViewModel must also be ViewModel`);\n        }\n    }\n    // console.log(`'${prop}' changed from ${store[prop]} to ${value}`);\n    if (isObject(oldVal) && ($$ in oldVal)) {\n        removeParent(oldVal[$$], target[$$], prop);\n    }\n    setFn(target, prop, value);\n    if (newValIsVM) {\n        addParent(value[$$], target[$$], prop);\n    }\n    notifyPropChanged(target, prop);\n    return true;\n}\nfunction __objectPropSetFn(target, prop, value) {\n    target[prop] = value;\n}\nfunction __componentPropSetFn(target, prop, value) {\n    /**\n     * we must ensure `this` in setter function to be `Proxy`\n     *\n     * 首先判断当前赋值的变量名，是否对应了一个 setter 函数，\n     * 如果是 setter 函数，则应该显式地调用，\n     *   并将 `this` 设置为该 target 的包装 Proxy，\n     *   这样才能保正 setter 函数中其它赋值语句能触发 notify。\n     * 如果不是 setter 函数，则简单地使用 target\\[prop\\] 赋值即可。\n     */\n    const setterFn = getSetterFnIfPropIsSetter(target, prop);\n    if (setterFn) {\n        setterFn.call(target[$$].proxy, value);\n    }\n    else {\n        target[prop] = value;\n    }\n}\nfunction objectPropSetHandler(target, prop, value) {\n    if (!($$ in target)) {\n        // ViewModel has been destroied.\n        return true;\n    }\n    return __propSetHandler(target, prop, value, __objectPropSetFn);\n}\nfunction attrsPropSetHandler(target, prop, value) {\n    if (!($$ in target)) {\n        // ViewModel has been destroied.\n        return true;\n    }\n    return __propSetHandler(target, prop, value, __objectPropSetFn, false);\n}\nfunction componentPropSetHandler(target, prop, value) {\n    if (!($$ in target)) {\n        warn(`call setter \"${prop.toString()}\" after destroied, resources such as setInterval maybe not released before destroy. component:`, target);\n        return true;\n    }\n    return __propSetHandler(target, prop, value, __componentPropSetFn);\n}\nfunction arrayNotifyItems(target, idxStart, idxEnd) {\n    let i = idxStart;\n    if (idxStart > idxEnd) {\n        i = idxEnd;\n        idxEnd = idxStart;\n    }\n    for (; i < idxEnd; i++) {\n        // console.log('npc', i);\n        notifyPropChanged(target, i);\n    }\n}\nfunction arrayLengthSetHandler(target, value) {\n    if (!isNumber(value)) {\n        throw new Error('bad argument. array length must be validate number.');\n    }\n    const oldLen = target.length;\n    if (oldLen > value) {\n        for (let i = value; i < oldLen; i++) {\n            const v = target[i];\n            if (isViewModel(v)) {\n                removeParent(v[$$], target[$$], i);\n            }\n        }\n    }\n    target.length = value;\n    // console.log('set .length from', oldLen, 'to', value);\n    if (oldLen !== value) {\n        notifyPropChanged(target, 'length');\n        arrayNotifyItems(target, oldLen, value);\n    }\n    return true;\n}\nfunction arrayPropSetHandler(target, prop, value) {\n    if (!($$ in target)) {\n        return true;\n    }\n    if (prop === 'length') {\n        return arrayLengthSetHandler(target, value);\n    }\n    /**\n     * 即便是 arr[0] 这样的取值，在 Proxy 的 set 里面，传递的 property 也是 string 类型，即 \"0\"。\n     * 因此，对数组也使用和对象一致的 objectPropSetHandler 来处理。\n     */\n    return __propSetHandler(target, prop, value, __objectPropSetFn);\n}\nconst ObjectProxyHandler = {\n    set: objectPropSetHandler\n};\nconst PromiseProxyHandler = {\n    get(target, prop) {\n        if (prop === 'then' || prop === 'catch') {\n            const v = target[prop];\n            return function (...args) {\n                return v.call(target, ...args);\n            };\n        }\n        else {\n            return target[prop];\n        }\n    },\n    set: objectPropSetHandler\n};\nfunction _arrayReverseSort(target, fn, arg) {\n    target.forEach((it, i) => {\n        if (isViewModel(it)) {\n            addParent(it[$$], target[$$], i);\n        }\n    });\n    target[fn](arg);\n    target.forEach((it, i) => {\n        if (isViewModel(it)) {\n            removeParent(it[$$], target[$$], i);\n        }\n    });\n    arrayNotifyItems(target, 0, target.length);\n    // return wrapper proxy to ensure `arr.reverse() === arr`\n    return target[$$].proxy;\n}\nfunction wrapSubArray(arr, wrapEachItem = false) {\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    const rtn = wrapProxy(arr, true);\n    // handleVMDebug(arr);\n    arr.forEach((it, i) => {\n        if (isViewModel(it)) {\n            addParent(it[$$], arr[$$], i);\n        }\n        else if (wrapEachItem) {\n            // eslint-disable-next-line @typescript-eslint/no-use-before-define\n            arr[i] = createViewModel(it);\n        }\n    });\n    return rtn;\n}\nfunction _arrayShiftOrUnshiftProp(arr, delta) {\n    arr.forEach((el, i) => {\n        if (!isViewModel(el))\n            return;\n        shiftParent(el[$$], arr[$$], i, delta);\n    });\n}\nfunction _argAssert(arg, fn) {\n    if (isObject(arg)) {\n        if (!($$ in arg)) {\n            throw new Error(`argument passed to Array.${fn} must be ViewModel if the array is ViewModel`);\n        }\n        else {\n            return true;\n        }\n    }\n    else {\n        return false;\n    }\n}\nconst ArrayFns = {\n    splice(target, idx, delCount, ...args) {\n        if (idx < 0)\n            idx = 0;\n        args.forEach((arg, i) => {\n            if (_argAssert(arg, 'splice')) {\n                addParent(arg[$$], target[$$], idx + i);\n            }\n        });\n        for (let i = 0; i < delCount; i++) {\n            if (idx + i >= target.length)\n                break;\n            const el = target[idx + i];\n            if (isViewModel(el)) {\n                removeParent(el[$$], target[$$], idx + i);\n            }\n        }\n        const delta = args.length - delCount;\n        if (delta !== 0) {\n            for (let i = idx + delCount; i < target.length; i++) {\n                const el = target[i];\n                if (!isViewModel(el)) {\n                    continue;\n                }\n                shiftParent(el[$$], target[$$], i, delta);\n            }\n        }\n        const rtn = wrapSubArray(target.splice(idx, delCount, ...args));\n        if (delta !== 0) {\n            notifyPropChanged(target, 'length');\n            for (let i = idx; i < target.length; i++) {\n                notifyPropChanged(target, i);\n            }\n        }\n        return rtn;\n    },\n    shift(target) {\n        if (target.length === 0)\n            return target.shift();\n        _arrayShiftOrUnshiftProp(target, -1);\n        const el = target.shift();\n        if (isViewModel(el)) {\n            removeParent(el[$$], target[$$], -1);\n        }\n        notifyPropChanged(target, 'length');\n        for (let i = 0; i < target.length + 1; i++) {\n            notifyPropChanged(target, i);\n        }\n        return el;\n    },\n    unshift(target, ...args) {\n        if (args.length === 0)\n            return target.unshift();\n        args.forEach((arg, i) => {\n            if (_argAssert(arg, 'unshift')) {\n                addParent(arg[$$], target[$$], i);\n            }\n        });\n        _arrayShiftOrUnshiftProp(target, args.length);\n        const rtn = target.unshift(...args);\n        notifyPropChanged(target, 'length');\n        for (let i = 0; i < target.length; i++) {\n            notifyPropChanged(target, i);\n        }\n        return rtn;\n    },\n    pop(target) {\n        if (target.length === 0) {\n            return target.pop();\n        }\n        const el = target.pop();\n        if (isViewModel(el)) {\n            removeParent(el[$$], target[$$], target.length);\n        }\n        notifyPropChanged(target, 'length');\n        notifyPropChanged(target, target.length);\n        return el;\n    },\n    push(target, ...args) {\n        if (args.length === 0)\n            return target.push();\n        args.forEach((arg, i) => {\n            if (_argAssert(arg, 'push')) {\n                addParent(arg[$$], target[$$], target.length + i);\n            }\n        });\n        const rtn = target.push(...args);\n        notifyPropChanged(target, 'length');\n        for (let i = target.length - 1 - args.length; i < target.length; i++) {\n            notifyPropChanged(target, i);\n        }\n        return rtn;\n    },\n    fill(target, v) {\n        _argAssert(v, 'fill');\n        target.forEach((it, i) => {\n            if (it === v && !isUndefined(it)) {\n                return;\n            }\n            if (isViewModel(it)) {\n                removeParent(it[$$], target[$$], i);\n            }\n            target[i] = v;\n            if (isViewModel(v)) {\n                addParent(v[$$], target[$$], i);\n            }\n            notifyPropChanged(target, i);\n        });\n        return target[$$].proxy;\n    },\n    reverse(target) {\n        return _arrayReverseSort(target, 'reverse');\n    },\n    sort(target, fn) {\n        return _arrayReverseSort(target, 'sort', fn);\n    },\n    concat(target, arr) {\n        _argAssert(arr, 'concat');\n        return wrapSubArray(target.concat(arr));\n    },\n    filter(target, fn) {\n        return wrapSubArray(target.filter(fn));\n    },\n    slice(target, si, ei) {\n        return wrapSubArray(target.slice(si, ei));\n    },\n    map(target, fn) {\n        return wrapSubArray(target.map(fn), true);\n    }\n};\nconst ArrayProxyHandler = {\n    get(target, prop) {\n        if (prop in ArrayFns) {\n            const fn = ArrayFns[prop];\n            return function (...args) {\n                return fn(target, ...args);\n            };\n        }\n        else {\n            return target[prop];\n        }\n    },\n    set: arrayPropSetHandler\n};\nfunction wrapProxy(target, isArr) {\n    const vmCore = new ViewModelCoreImpl(target);\n    return vmCore.proxy = new Proxy(target, isArr ? ArrayProxyHandler : (isPromise(target) ? PromiseProxyHandler : ObjectProxyHandler));\n}\nfunction wrapProp(parent, child, property) {\n    // const v = vm[property];\n    if (!isObject(child) || isInnerObj(child)) {\n        return;\n    }\n    if (!($$ in child)) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        parent[property] = child = createViewModel(child);\n    }\n    addParent(child[$$], parent[$$], property);\n}\n/**\n * @internal\n */\nexport function createViewModel(target) {\n    if (isObject(target)) {\n        // directly return if alreay is ViewModel or inner object(Date/RegExp/Boolean).\n        if (isInnerObj(target) || ($$ in target)) {\n            return target;\n        }\n        const isArr = isArray(target);\n        const rtn = wrapProxy(target, isArr);\n        if (isArr) {\n            for (let i = 0; i < target.length; i++) {\n                wrapProp(target, target[i], i);\n            }\n        }\n        else {\n            for (const k in target) {\n                if (isPublicProperty(k)) {\n                    wrapProp(target, target[k], k);\n                }\n            }\n        }\n        return rtn;\n    }\n    else {\n        return target;\n    }\n}\n/**\n * @internal\n */\nexport function createAttributes(attributes) {\n    const vmCore = new ViewModelCoreImpl(attributes);\n    // 初始化时默认的 notifiable 为 false，\n    // 待 RENDER 结束后才修改为 true，用于避免无谓的消息通知。\n    vmCore.__notifiable = false;\n    return (vmCore.proxy = new Proxy(attributes, {\n        set: attrsPropSetHandler\n    }));\n}\n// function handleVMDebug(vm) {\n//   if (!config[CFG_VM_DEBUG]) {\n//     return;\n//   }\n//   let _di = window._VM_DEBUG;\n//   if (!_di) {\n//     _di = window._VM_DEBUG = {\n//       id: 0, vms: []\n//     };\n//   }\n//   vm[VM_DEBUG_ID] = _di.id++;\n//   // if (isComponent(vm) && !(VM_DEBUG_NAME in vm)) {\n//   //   vm[VM_DEBUG_NAME] = `<${vm.constructor.name}>`;\n//   // }\n//   _di.vms.push(vm);\n// }\n/**\n * @internal\n */\nexport function createComponent(component) {\n    if ($$ in component) {\n        throw new Error('component has alreay been wrapped.');\n    }\n    // handleVMDebug(component);\n    const vmCore = new ViewModelCoreImpl(component);\n    // 初始化时 Component 默认的 VM_NOTIFIABLE 为 false，\n    // 待 RENDER 结束后才修改为 true，用于避免无谓的消息通知。\n    vmCore.__notifiable = false;\n    return vmCore.proxy = new Proxy(component, {\n        set: componentPropSetHandler\n    });\n}\nexport function vm(target) {\n    if (!isObject(target)) {\n        throw new Error('vm() target must be object or array.');\n    }\n    return createViewModel(target);\n}\nexport function watch(vm, propertyPath, handler) {\n    vm[$$].__watch(propertyPath, handler);\n}\nexport function unwatch(vm, propertyPath, handler) {\n    vm[$$].__unwatch(propertyPath, handler);\n}\n//# sourceMappingURL=proxy.js.map","import { warn } from '../util';\nexport const MESSENGER_LISTENERS = Symbol('listeners');\nexport class Messenger {\n    constructor(templateListeners) {\n        this[MESSENGER_LISTENERS] = null;\n        if (templateListeners) {\n            for (const eventName in templateListeners) {\n                const handler = templateListeners[eventName];\n                this.__on(eventName, handler.fn, handler.opts);\n            }\n        }\n    }\n    __notify(eventName, ...args) {\n        if (!this[MESSENGER_LISTENERS])\n            return;\n        const listeners = this[MESSENGER_LISTENERS].get(eventName);\n        if (!listeners)\n            return;\n        listeners.forEach(handler => {\n            handler.fn(...args);\n        });\n    }\n    __on(eventName, eventListener, options) {\n        if (!this[MESSENGER_LISTENERS]) {\n            this[MESSENGER_LISTENERS] = new Map();\n        }\n        let listeners = this[MESSENGER_LISTENERS].get(eventName);\n        if (!listeners) {\n            this[MESSENGER_LISTENERS].set(eventName, listeners = []);\n        }\n        if (listeners.findIndex(it => {\n            return it.fn === eventListener;\n        }) >= 0) {\n            warn('dulplicated messenger listener', eventName, eventListener);\n            return;\n        }\n        let fn = eventListener;\n        if (options && options.once) {\n            fn = (...args) => {\n                eventListener(...args);\n                this.__off(eventName, eventListener);\n            };\n        }\n        if (options && options.prepend) {\n            listeners.unshift({\n                fn, opts: options\n            });\n        }\n        else {\n            listeners.push({\n                fn, opts: options\n            });\n        }\n    }\n    __off(eventName, eventListener) {\n        if (!this[MESSENGER_LISTENERS])\n            return;\n        if (!eventName) {\n            this[MESSENGER_LISTENERS].clear();\n            return;\n        }\n        const listeners = this[MESSENGER_LISTENERS].get(eventName);\n        if (!listeners)\n            return;\n        if (!eventListener) {\n            listeners.length = 0;\n            return;\n        }\n        const idx = listeners.findIndex(it => {\n            return it.fn === eventListener;\n        });\n        listeners.splice(idx, 1);\n    }\n}\n//# sourceMappingURL=messenger.js.map","import { uid, createElement } from '../util';\nfunction isHideCssExists() {\n    const $e = createElement('span', {\n        style: 'position:absolute;left:-10000px;',\n        class: 'jg-hide'\n    });\n    document.body.appendChild($e);\n    const exist = getComputedStyle($e).getPropertyValue('display') === 'none';\n    document.body.removeChild($e);\n    return exist;\n}\nclass ComponentStyleManager {\n    constructor() {\n        this.m = new Map();\n        this.s = 0;\n    }\n    create(sty) {\n        if (this.s === 0)\n            return;\n        const $style = createElement('style', {\n            type: 'text/css',\n            id: sty.dom\n        });\n        document.head.appendChild($style);\n        if ($style.styleSheet) {\n            $style.styleSheet.cssText = sty.css;\n        }\n        else {\n            $style.textContent = sty.css;\n        }\n    }\n    add(sty) {\n        if (!sty)\n            return;\n        const styleMap = this.m;\n        let info = styleMap.get(sty.id);\n        if (info) {\n            info.refs++;\n            return;\n        }\n        info = {\n            id: sty.id,\n            css: sty.css,\n            dom: `__${sty.id}__`,\n            refs: 1\n        };\n        styleMap.set(sty.id, info);\n        this.create(info);\n    }\n    attch() {\n        if (this.s !== 0) {\n            return;\n        }\n        this.s = 1;\n        if (!isHideCssExists()) {\n            this.create({\n                dom: `__jgsty_${uid()}__`,\n                css: '.jg-hide{display:none!important}.jg-hide.jg-hide-enter,.jg-hide.jg-hide-leave{display:block!important}'\n            });\n        }\n        this.m.forEach(info => {\n            this.create(info);\n        });\n    }\n    remove(sty) {\n        if (!sty)\n            return;\n        const info = this.m.get(sty.id);\n        if (!info)\n            return;\n        info.refs--;\n        if (info.refs > 0) {\n            return;\n        }\n        this.m.delete(info.id);\n        if (this.s === 0) {\n            return;\n        }\n        document.head.removeChild(document.getElementById(info.dom));\n    }\n}\n// singleton\nexport const manager = new ComponentStyleManager();\n//# sourceMappingURL=style.js.map","import { isString, uid, isFunction, isBoolean, isObject, arrayPushIfNotExist, arrayRemove } from '../util';\nimport { Messenger } from './messenger';\nconst TextFnCache = new Map();\n/**\n * convert i18n text template to function\n * @param {String} text i18n formatted text template\n */\nexport function compile(text) {\n    let fn = TextFnCache.get(text);\n    if (!fn) {\n        fn = new Function('__ctx', `return \\`${text.replace(/`/g, '\\\\`').replace(/\\$\\{\\s*([\\w\\d._$]+)\\s*\\}/g, (m, n) => {\n            return '${ __ctx.' + n + ' }';\n        })}\\`;`);\n        TextFnCache.set(text, fn);\n    }\n    return fn;\n}\nfunction defaultFetchFn(url) {\n    return window.fetch(url).then(res => res.text());\n}\nfunction mergeDictOrRender(main, chunk) {\n    for (const k in chunk) {\n        if (!(k in main)) {\n            main[k] = chunk[k];\n        }\n    }\n}\nasync function loadChunks(i18n, data, fetchFn) {\n    let activeChunks = i18n.__activeChunks;\n    if (!activeChunks || activeChunks.length === 0) {\n        return;\n    }\n    // get unloaded active chunks\n    activeChunks = !data.__chunks ? activeChunks : activeChunks.filter(ac => {\n        return data.__chunks.indexOf(ac) < 0;\n    });\n    if (activeChunks.length === 0) {\n        return;\n    }\n    await Promise.all(activeChunks.map(cn => {\n        return fetchFn(data.chunks[cn]).then(code => {\n            (new Function('jinge', code))({\n                i18n\n            });\n        });\n    }));\n}\nfunction _assert(s) {\n    if (!s.__data)\n        throw new Error('i18n data not found. Forgot to load i18n resource script?');\n}\nclass I18nService extends Messenger {\n    constructor() {\n        super();\n        this.__deps = null;\n        this.__data = null;\n        this.__cache = new Map();\n        this.__key = null;\n        this.__regLoc(window.JINGE_I18N_DATA);\n    }\n    get locale() {\n        _assert(this);\n        return this.__data.locale;\n    }\n    /**\n     * Register i18n render depedent.\n     * This method will be called by compiler generated code, don't call it manully.\n     */\n    __regDep(idx, depent) {\n        const deps = this.__deps || (this.__deps = []);\n        if (deps[idx]) {\n            if (deps[idx] !== depent)\n                throw new Error(`conflict at ${idx}`);\n            return;\n        }\n        deps[idx] = depent;\n    }\n    /**\n     * Register locale data, will be called in locale resource script.\n     * Usually you don't need call this method manully.\n     */\n    __regLoc(data) {\n        if (!data || this.__cache.has(data.locale)) {\n            return;\n        }\n        if (!data.__renders)\n            data.__renders = [];\n        if (isFunction(data.render)) {\n            data.__renders.push(data.render);\n            data.render = {\n                components: {},\n                attributes: {}\n            };\n        }\n        this.__cache.set(data.locale, data);\n        if (!this.__data) {\n            this.__data = data;\n        }\n    }\n    /**\n     * register i18n chunk resource data.\n     * Usually you don't need call this method manully.\n     */\n    __regChu(chunkName, data) {\n        const mainData = this.__cache.get(data.locale);\n        if (!mainData) {\n            throw new Error('main resource not load.');\n        }\n        if (!mainData.__chunks)\n            mainData.__chunks = [];\n        arrayPushIfNotExist(mainData.__chunks, chunkName);\n        mergeDictOrRender(mainData.dictionary, data.dictionary);\n        mainData.__renders.push(data.render);\n        data.render = null;\n        // const mainRender = instanceRenders(mainData, this.__deps);\n        // const render = instanceRenders(data, this.__deps);\n        // mergeDictOrRender(mainRender.components, render.components);\n        // mergeDictOrRender(mainRender.attributes, render.attributes);\n    }\n    /**\n     * switch to another locale/language\n     */\n    async switch(locale, fetchFn = defaultFetchFn) {\n        if (this.__data.locale === locale) {\n            return;\n        }\n        const key = uid();\n        this.__key = key;\n        this.__notify('before-change', this.locale, locale);\n        let data = this.__cache.get(locale);\n        if (!data) {\n            const code = await fetchFn(this.__data.filename.replace('[locale]', locale));\n            (new Function('jinge', code))({\n                i18n: this\n            });\n            if (this.__key !== key) {\n                /*\n                  * ignore if callback has been expired.\n                  * 使用闭包的技巧来检测当前回调是否已经过期，\n                  * 即，是否已经有新的 fetchFn 函数的调用。\n                  */\n                return;\n            }\n            data = this.__cache.get(locale);\n        }\n        this.__data = data;\n        await loadChunks(this, data, fetchFn);\n        if (this.__key !== key) {\n            return;\n        }\n        this.__notify('change', this.locale);\n    }\n    __t(key, params) {\n        _assert(this);\n        const dict = this.__data.dictionary;\n        if (!(key in dict)) {\n            return 'i18n_missing';\n        }\n        let text = dict[key];\n        if (isString(text)) {\n            // text.startsWith(\"«\") means reference to another key\n            if (text.charCodeAt(0) === 171) {\n                text = dict[text.substring(1)];\n                if (isString(text)) {\n                    text = compile(text);\n                }\n            }\n            else {\n                text = compile(text);\n            }\n            dict[key] = text;\n        }\n        return text(params);\n    }\n    __r(key, type) {\n        _assert(this);\n        const __renders = this.__data.__renders;\n        const render = this.__data.render;\n        if (__renders && __renders.length > 0) {\n            if (!this.__deps)\n                throw new Error('missing deps');\n            __renders.forEach(renderFactory => {\n                const r = renderFactory(...this.__deps);\n                mergeDictOrRender(render.components, r.components);\n                mergeDictOrRender(render.attributes, r.attributes);\n            });\n            __renders.length = 0;\n        }\n        const renderDict = render[type];\n        if (!(key in renderDict)) {\n            throw new Error(`missing ${type} key: ${key}`);\n        }\n        let fn = renderDict[key];\n        if (isString(fn)) {\n            // if fn is string, it's a reference to another key.\n            renderDict[key] = fn = renderDict[fn];\n        }\n        return fn;\n    }\n    watch(listener, opts) {\n        let immediate = false;\n        let prepend = false;\n        if (isBoolean(opts)) {\n            immediate = opts;\n        }\n        else if (isObject(opts)) {\n            immediate = opts.immediate;\n            prepend = opts.prepend;\n        }\n        this.__on('change', listener, {\n            prepend\n        });\n        if (immediate) {\n            listener(this.locale);\n        }\n        return () => {\n            this.__off('change', listener);\n        };\n    }\n    /**\n     * 加载指定名称的 chunk 对应的多语言资源包，并将该 chunk 变为活动（active）状态。\n     * 所有活动状态的 chunk 在使用 i18n.switch 切换语言时，会自动加载其对应的语言资源包。\n     *\n     * 使用示例：\n     *\n     * ````js\n     * async function someLazyLoadFn() {\n     *   // first load i18n chunk resource\n     *   await i18n.active('chunk-name');\n     *   // then load webapck chunk\n     *   await import(\n     *    // webpackChunkName: \"chunk-name\"\n     *    './path-to-module'\n     *   )\n     * }\n     * ````\n     */\n    async active(chunkName, fetchFn = defaultFetchFn) {\n        if (!this.__data.chunks || !this.__data.chunks[chunkName]) {\n            throw new Error('unknown chunk name.');\n        }\n        const activeChunks = this.__activeChunks || (this.__activeChunks = []);\n        arrayPushIfNotExist(activeChunks, chunkName);\n        await loadChunks(this, this.__data, fetchFn);\n    }\n    /**\n     * 通知 i18n 服务 chunk 已经不再是活动的 chunk。这样使用 i18n.switch 切换语言时，\n     * i18n 服务不会加载该 chunk 的目标语言资源包，可以避免不必要的网络加载。\n     */\n    deactive(chunkName) {\n        if (!this.__activeChunks)\n            return;\n        arrayRemove(this.__activeChunks, chunkName);\n    }\n}\n/* Singleton */\nexport const i18n = new I18nService();\n/**\n * Compiler helper function, the first parameter will be convert to i18n dictionary key,\n * and the whole function will be transform to `i18nService._t(key, params)`\n *\n * But after i18n locale resource script had been written, compiler won't transform it,\n * the function will work as text parse util.\n *\n * @param {String|Object} text\n * @param {Object} params\n */\nexport function _t(text, params) {\n    return params ? compile(text)(params) : text;\n}\n//# sourceMappingURL=i18n.js.map","var _a;\nimport { isObject, isArray, arrayRemove, registerEvent, isFunction, clearImmediate, setImmediate, appendChildren, replaceChildren, warn } from '../util';\nimport { $$ } from '../vm/common';\nimport { createComponent, createAttributes } from '../vm/proxy';\nimport { Messenger, MESSENGER_LISTENERS } from './messenger';\nimport { manager as StyleManager } from './style';\nimport { i18n as i18nService } from './i18n';\nexport var ComponentStates;\n(function (ComponentStates) {\n    ComponentStates[ComponentStates[\"INITIALIZE\"] = 0] = \"INITIALIZE\";\n    ComponentStates[ComponentStates[\"RENDERED\"] = 1] = \"RENDERED\";\n    ComponentStates[ComponentStates[\"WILLDESTROY\"] = 2] = \"WILLDESTROY\";\n    ComponentStates[ComponentStates[\"DESTROIED\"] = 3] = \"DESTROIED\";\n})(ComponentStates || (ComponentStates = {}));\nexport var ContextStates;\n(function (ContextStates) {\n    ContextStates[ContextStates[\"UNTOUCH\"] = 0] = \"UNTOUCH\";\n    ContextStates[ContextStates[\"TOUCHED\"] = 1] = \"TOUCHED\";\n    ContextStates[ContextStates[\"UNTOUCH_FREEZED\"] = 2] = \"UNTOUCH_FREEZED\";\n    ContextStates[ContextStates[\"TOUCHED_FREEZED\"] = 3] = \"TOUCHED_FREEZED\";\n})(ContextStates || (ContextStates = {}));\nexport const __ = Symbol('__');\n/** Bellow is utility functions **/\nexport function isComponent(v) {\n    return __ in v;\n}\nexport function assertRenderResults(renderResults) {\n    if (!isArray(renderResults) || renderResults.length === 0) {\n        throw new Error('Render results of component is empty');\n    }\n    return renderResults;\n}\nfunction wrapAttrs(target) {\n    if (!isObject(target) || isArray(target)) {\n        throw new Error('attrs() traget must be plain object.');\n    }\n    return createAttributes(target);\n}\nexport { wrapAttrs as attrs };\nexport class Component extends Messenger {\n    /**\n     * ATTENTION!!!\n     *\n     * Don't use constructor directly, use static factory method `create(attrs)` instead.\n     */\n    constructor(attrs) {\n        if (!isObject(attrs) || !($$ in attrs)) {\n            throw new Error('Attributes passed to Component constructor must be ViewModel. See https://[todo]');\n        }\n        const compilerAttrs = attrs[__] || {};\n        super(compilerAttrs.listeners);\n        createComponent(this);\n        this[__] = {\n            passedAttrs: attrs,\n            context: compilerAttrs.context || null,\n            contextState: ContextStates.UNTOUCH,\n            slots: compilerAttrs.slots,\n            state: ComponentStates.INITIALIZE,\n            rootNodes: [],\n            nonRootCompNodes: [],\n            refs: null,\n            relatedRefs: null,\n            upNextMap: null,\n            compStyle: compilerAttrs.compStyle || null,\n            deregDOM: null,\n            deregI18N: null\n        };\n    }\n    static create(attrs) {\n        attrs = attrs || wrapAttrs({});\n        if (!isObject(attrs) || !($$ in attrs)) {\n            attrs = wrapAttrs(attrs || {});\n        }\n        return (new this(attrs))[$$].proxy;\n    }\n    __i18nWatch(listener, opts) {\n        let deregs = this[__].deregI18N;\n        if (!deregs) {\n            this[__].deregI18N = deregs = [];\n        }\n        const unwatcher = i18nService.watch(() => {\n            // bind component to listener's function context.\n            listener.call(this);\n        }, opts);\n        const deregister = () => {\n            unwatcher();\n            arrayRemove(deregs, deregister);\n        };\n        deregs.push(deregister);\n        return deregister;\n    }\n    /**\n     * Helper function to add dom event listener.\n     * Return deregister function which will remove event listener.\n     * If you do dot call deregister function, it will be auto called when component is destroied.\n     * @param {Boolean|Object} capture\n     * @returns {Function} deregister function to remove listener\n     */\n    __domAddListener($el, eventName, listener, capture) {\n        let deregs = this[__].deregDOM;\n        if (!deregs) {\n            this[__].deregDOM = deregs = [];\n        }\n        const lisDeregister = registerEvent($el, eventName, $event => {\n            // bind component to listener's function context.\n            listener.call(this, $event);\n        }, capture);\n        const deregister = () => {\n            lisDeregister();\n            arrayRemove(deregs, deregister);\n        };\n        deregs.push(deregister);\n        return deregister;\n    }\n    __domPassListeners(ignoredEventNames, targetEl) {\n        if (this[__].state !== ComponentStates.RENDERED) {\n            throw new Error('domPassListeners must be applied to component which is rendered.');\n        }\n        const lis = this[MESSENGER_LISTENERS];\n        if (!lis || lis.size === 0) {\n            return;\n        }\n        if (ignoredEventNames && !isArray(ignoredEventNames)) {\n            targetEl = ignoredEventNames;\n            ignoredEventNames = null;\n        }\n        else if (!targetEl) {\n            targetEl = this.__firstDOM;\n        }\n        if (targetEl.nodeType !== Node.ELEMENT_NODE) {\n            return;\n        }\n        lis.forEach((handlers, eventName) => {\n            if (ignoredEventNames && ignoredEventNames.indexOf(eventName) >= 0) {\n                return;\n            }\n            handlers.forEach(handler => {\n                const { opts, fn } = handler;\n                this.__domAddListener(targetEl, eventName, (handler.opts && (handler.opts.stop || handler.opts.prevent)\n                    ? function ($evt) {\n                        opts.stop && $evt.stopPropagation();\n                        opts.prevent && $evt.preventDefault();\n                        // this.domAddListener 会将 this 变成当前组件。所以需要显式地使用 fn.call(this) 来传递组件。\n                        fn.call(this, $evt);\n                    } : fn), handler.opts);\n            });\n        });\n    }\n    /**\n     * Get rendered DOM Node which should be apply transition.\n     *\n     * 返回在 transition 动画时应该被应用到的 DOM 节点。\n     */\n    get __transitionDOM() {\n        const el = this[__].rootNodes[0];\n        return isComponent(el) ? el.__transitionDOM : el;\n    }\n    /**\n     * Get first rendered DOM Node after Component is rendered.\n     *\n     * 按从左往右从上到下的深度遍历，找到的第一个 DOM 节点。\n     */\n    get __firstDOM() {\n        const el = this[__].rootNodes[0];\n        return isComponent(el) ? el.__firstDOM : el;\n    }\n    /**\n     * Get last rendered DOM Node after Component is rendered.\n     *\n     * 按从右往左，从上到下的深度遍历，找到的第一个 DOM 节点（相对于从左到右的顺序是最后一个 DOM 节点）。\n     */\n    get __lastDOM() {\n        const rns = this[__].rootNodes;\n        const el = rns[rns.length - 1];\n        return isComponent(el) ? el.__lastDOM : el;\n    }\n    /**\n     * 对模板进行渲染的函数，也可能是渲染编译器传递进来的默认渲染函数。\n     * 如果子组件需要进行自定义的渲染行为，需要重载该函数。\n     */\n    __render() {\n        const Clazz = this.constructor;\n        let renderFn = Clazz.template; // jinge-loader 已经将 string 转成了 RenderFn，此处强制转换类型以绕开 typescript.\n        if (!renderFn && this[__].slots) {\n            renderFn = this[__].slots.default;\n        }\n        if (!isFunction(renderFn)) {\n            throw new Error(`Template of ${Clazz.name} not found. Forget static getter \"template\"?`);\n        }\n        StyleManager.add(Clazz.style); // jinge-loader 已经将 string 转成了 ComponentStyle，此处强制转换类型以绕开 typescript.\n        return renderFn(this);\n    }\n    /**\n     * Render Component to HTMLElement.\n     * This method is usually used to render the entire application.\n     * See the `bootstrap()` function in `./bootstrap.js`.\n     *\n     * By default, the target element will be replaced(that means deleted).\n     * But you can disable it by pass `replaceMode`=`false`,\n     * which means component append to target as it's children.\n     */\n    __renderToDOM(targetEl, replaceMode = true) {\n        if (this[__].state !== ComponentStates.INITIALIZE) {\n            throw new Error('component has already been rendered.');\n        }\n        const rr = assertRenderResults(this.__render());\n        StyleManager.attch();\n        if (replaceMode) {\n            replaceChildren(targetEl.parentNode, rr, targetEl);\n        }\n        else {\n            appendChildren(targetEl, rr);\n        }\n        this.__handleAfterRender();\n    }\n    __destroy(removeDOM = true) {\n        const comp = this[__];\n        if (comp.state > ComponentStates.WILLDESTROY)\n            return;\n        comp.state = ComponentStates.WILLDESTROY;\n        /*\n         * once component is being destroied,\n         *   we mark component and it's passed-attrs un-notifiable to ignore\n         *   possible messeges occurs in BEFORE_DESTROY lifecycle callback.\n         */\n        this[$$].__notifiable = false;\n        comp.passedAttrs[$$].__notifiable = false;\n        // notify before destroy lifecycle\n        // 需要注意，必须先 NOTIFY 向外通知销毁消息，再执行 BEFORE_DESTROY 生命周期函数。\n        //   因为在 BEFORE_DESTROY 里会销毁外部消息回调函数里可能会用到的属性等资源。\n        this.__notify('before-destroy');\n        this.__beforeDestroy();\n        // destroy children(include child component and html nodes)\n        this.__handleBeforeDestroy(removeDOM);\n        // clear messenger listeners.\n        super.__off();\n        // remove component style\n        StyleManager.remove(this.constructor.style);\n        // destroy attrs passed to constructor\n        comp.passedAttrs[$$].__destroy();\n        comp.passedAttrs = null;\n        // destroy view model\n        this[$$].__destroy();\n        // clear next tick update setImmediate\n        if (comp.upNextMap) {\n            comp.upNextMap.forEach(imm => {\n                clearImmediate(imm);\n            });\n            comp.upNextMap = null;\n        }\n        // destroy related refs:\n        if (comp.relatedRefs) {\n            comp.relatedRefs.forEach(info => {\n                const refs = info.origin[__].refs;\n                if (!refs)\n                    return;\n                const rns = refs.get(info.ref);\n                if (isArray(rns)) {\n                    arrayRemove(rns, info.node || this);\n                }\n                else {\n                    refs.delete(info.ref);\n                }\n            });\n            comp.relatedRefs = null;\n        }\n        // clear all dom event listener and i18n watcher\n        if (comp.deregDOM) {\n            comp.deregDOM.forEach(deregFn => deregFn());\n            comp.deregDOM = null;\n        }\n        if (comp.deregI18N) {\n            comp.deregI18N.forEach(deregFn => deregFn());\n            comp.deregI18N = null;\n        }\n        // clear properties\n        comp.state = ComponentStates.DESTROIED;\n        // unlink all symbol properties. maybe unnecessary.\n        comp.rootNodes = comp.nonRootCompNodes =\n            comp.refs = comp.slots = comp.context = null;\n    }\n    __handleBeforeDestroy(removeDOM = false) {\n        this[__].nonRootCompNodes.forEach(component => {\n            // it's not necessary to remove dom when destroy non-root component,\n            // because those dom nodes will be auto removed when their parent dom is removed.\n            component.__destroy(false);\n        });\n        let $parent;\n        this[__].rootNodes.forEach(node => {\n            if (isComponent(node)) {\n                node.__destroy(removeDOM);\n            }\n            else if (removeDOM) {\n                if (!$parent) {\n                    $parent = node.parentNode;\n                }\n                $parent.removeChild(node);\n            }\n        });\n    }\n    __handleAfterRender() {\n        /*\n         * Set NOTIFIABLE=true to enable ViewModel notify.\n         * Don't forgot to add these code if you override HANDLE_AFTER_RENDER\n         */\n        this[__].passedAttrs[$$].__notifiable = true;\n        this[$$].__notifiable = true;\n        this[__].rootNodes.forEach(n => {\n            if (isComponent(n))\n                n.__handleAfterRender();\n        });\n        this[__].nonRootCompNodes.forEach(n => {\n            if (isComponent(n))\n                n.__handleAfterRender();\n        });\n        this[__].state = ComponentStates.RENDERED;\n        this[__].contextState = this[__].contextState === ContextStates.TOUCHED ? ContextStates.TOUCHED_FREEZED : ContextStates.UNTOUCH_FREEZED; // has been rendered, can't modify context\n        this.__afterRender();\n        this.__notify('after-render');\n    }\n    __updateIfNeed(handler, nextTick = true) {\n        if (this[__].state !== ComponentStates.RENDERED) {\n            return;\n        }\n        if (handler === false) {\n            return this.__update();\n        }\n        if (!isFunction(handler)) {\n            handler = this.__update;\n        }\n        if (!nextTick) {\n            handler.call(this);\n            return;\n        }\n        let ntMap = this[__].upNextMap;\n        if (!ntMap)\n            ntMap = this[__].upNextMap = new Map();\n        if (ntMap.has(handler)) {\n            // already in queue.\n            return;\n        }\n        ntMap.set(handler, setImmediate(() => {\n            ntMap.delete(handler);\n            handler.call(this);\n        }));\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    __update(first) {\n        // by default, do nothing.\n    }\n    __setContext(key, value, forceOverride = false) {\n        if (this[__].contextState === ContextStates.UNTOUCH_FREEZED || this[__].contextState === ContextStates.TOUCHED_FREEZED) {\n            throw new Error('Can\\'t setContext after component has been rendered. Try put setContext code into constructor.');\n        }\n        if (this[__].contextState === ContextStates.UNTOUCH) {\n            // we copy context to make sure child component do not modify context passed from parent.\n            // we do not copy it by default until setContext function is called, because it unnecessary to waste memory if\n            // child component do not modify the context.\n            this[__].context = Object.assign({}, this[__].context);\n            this[__].contextState = ContextStates.TOUCHED; // has been copied.\n        }\n        if (key in this[__].context) {\n            // override exist may case hidden bug hard to debug.\n            // so we force programmer to pass third argument to\n            //   tell us he/she know what he/she is doing.\n            if (!forceOverride) {\n                throw new Error(`Contenxt with key: ${key.toString()} is exist. Pass third argument forceOverride=true to override it.`);\n            }\n        }\n        this[__].context[key] = value;\n    }\n    __getContext(key) {\n        return this[__].context ? this[__].context[key] : null;\n    }\n    /**\n     * This method is used for compiler generated code.\n     * Do not use it manually.\n     */\n    __setRef(ref, el, relatedComponent) {\n        let rns = this[__].refs;\n        if (!rns) {\n            this[__].refs = rns = new Map();\n        }\n        let elOrArr = rns.get(ref);\n        if (!elOrArr) {\n            rns.set(ref, el);\n        }\n        else if (isArray(elOrArr)) {\n            elOrArr.push(el);\n        }\n        else {\n            elOrArr = [elOrArr, el];\n            rns.set(ref, elOrArr);\n        }\n        const isComp = isComponent(el);\n        if (!isComp && this === relatedComponent) {\n            return;\n        }\n        /**\n         * 如果被 ref: 标记的元素（el）本身就是组件（Component）节点，\n         *   那么 el 自身就是关联组件，el 自身在被销毁时可以执行删除关联 refs 的操作；\n         * 如果 el 是 DOM 节点，则必须将它添加到关联组件（比如 <if>） relatedComponent 里，\n         *   在 relatedComponent 被销毁时执行关联 refs 的删除。\n         */\n        let rbs = (isComp ? el : relatedComponent)[__].relatedRefs;\n        if (!rbs) {\n            (isComp ? el : relatedComponent)[__].relatedRefs = rbs = [];\n        }\n        rbs.push({\n            origin: this,\n            ref,\n            node: isComp ? null : el\n        });\n    }\n    /**\n     * Get child node(or nodes) marked by 'ref:' attribute in template\n     */\n    __getRef(ref) {\n        if (this[__].state !== ComponentStates.RENDERED) {\n            warn(`Warning: call __getRef before component '${this.constructor.name}' rendered will get nothing. see https://[TODO]`);\n        }\n        return this[__].refs ? this[__].refs.get(ref) : null;\n    }\n    /**\n     * lifecycle hook, called after rendered.\n     */\n    __afterRender() {\n        // lifecycle hook, default do nothing.\n    }\n    /**\n     * lifecycle hook, called before destroy.\n     */\n    __beforeDestroy() {\n        // lifecycle hook, default do nothing.\n    }\n}\n_a = __;\n/**\n * 某些情况下，需要判断一个函数是否是组件的构造函数。添加一个静态成员属性符号用于进行该判断。\n * isComponent 函数既可以判断是否是构造函数（配合 isFunction），又可以判断一个对像是否是组件实例。\n *\n * 示例：\n *\n * ````js\n * import { isComponent, Component } from 'jinge';\n *\n * class A {};\n * class B extends Component {};\n * console.log(isComponent(A)); // false\n * console.log(isComponent(B)); // true\n * ````\n */\nComponent[_a] = true;\n//# sourceMappingURL=component.js.map","export var TransitionStates;\n(function (TransitionStates) {\n    TransitionStates[TransitionStates[\"ENTERING\"] = 1] = \"ENTERING\";\n    TransitionStates[TransitionStates[\"ENTERED\"] = 2] = \"ENTERED\";\n    TransitionStates[TransitionStates[\"LEAVING\"] = 3] = \"LEAVING\";\n    TransitionStates[TransitionStates[\"LEAVED\"] = 4] = \"LEAVED\";\n})(TransitionStates || (TransitionStates = {}));\nexport function getDurationType(el) {\n    const cst = getComputedStyle(el);\n    if (cst.getPropertyValue('transition-duration') !== '0s') {\n        return 'transitionend';\n    }\n    else if (cst.getPropertyValue('animation-duration') !== '0s') {\n        return 'animationend';\n    }\n    return null;\n}\nfunction parseDuration(v) {\n    if (/ms$/.test(v)) {\n        return parseInt(v);\n    }\n    else if (/s$/.test(v)) {\n        return parseFloat(v) * 1000;\n    }\n    else {\n        return 0;\n    }\n}\nexport function getDuration(el) {\n    const cst = getComputedStyle(el);\n    let dur = cst.getPropertyValue('transition-duration');\n    if (dur !== '0s') {\n        return {\n            type: 'transitionend',\n            time: parseDuration(dur)\n        };\n    }\n    dur = cst.getPropertyValue('animation-duration');\n    if (dur !== '0s') {\n        return {\n            type: 'animationend',\n            time: parseDuration(dur)\n        };\n    }\n    return {\n        type: null,\n        time: 0\n    };\n}\n//# sourceMappingURL=transition.js.map","import {\n  $$ as __$$_792732ac1261\n} from '../vm/common';import { Component, __, attrs, isComponent, ComponentStates, assertRenderResults } from '../core/component';\nimport { isViewModel, $$ } from '../vm/common';\nimport { isString, isNumber, isArray, createFragment, insertAfter } from '../util';\nexport class ForEachComponent extends Component {\n    constructor(attrs, item, index, isLast) {\n      super(attrs);\n      const __vm_792732ac1261 = this[__$$_792732ac1261].proxy;\n      if (isViewModel(item)) {\n        __vm_792732ac1261.each = item;\n      } else {\n        __vm_792732ac1261._e = item;\n      }\n      __vm_792732ac1261.index = index;\n      __vm_792732ac1261.isFirst = index === 0;\n      __vm_792732ac1261.isLast = isLast;\n    }\n    get each() {\n        return this._e;\n    }\n    set each(v) {\n        this._e = v;\n    }\n    __render() {\n        return this[__].slots.default(this);\n    }\n}\nfunction createEl(item, i, isLast, itemRenderFn, context, parentCompomentStyles) {\n    const el = new ForEachComponent(attrs({\n        [__]: {\n            context,\n            compStyle: parentCompomentStyles,\n            slots: {\n                default: itemRenderFn\n            }\n        }\n    }), item, i, isLast);\n    return el[$$].proxy;\n}\nfunction appendRenderEach(item, i, isLast, itemRenderFn, roots, context, parentCompomentStyles) {\n    const el = createEl(item, i, isLast, itemRenderFn, context, parentCompomentStyles);\n    roots.push(el);\n    return el.__render();\n}\n// function _assertVm(item, i) {\n//   if (isObject(item) && !isInnerObj(item) && !(VM_ATTRS in item)) {\n//     throw new Error(`loop item [${i}] of <for> component must be ViewModel.`);\n//   }\n// }\nfunction _prepareKey(item, i, keyMap, keyName) {\n    const key = keyName === 'each' ? item : keyName(item);\n    if (keyMap.has(key)) {\n        // eslint-disable-next-line no-console\n        console.error(`loop items [${i}] and [${keyMap.get(key)}] of <for> component both have key '${key}', dulplicated key may cause update error.`);\n    }\n    keyMap.set(key, i);\n    return key;\n}\nfunction renderItems(items, itemRenderFn, roots, keys, keyName, context, parentCompomentStyles) {\n    const result = [];\n    const tmpKeyMap = new Map();\n    items.forEach((item, i) => {\n        // _assertVm(item, i);\n        if (keyName !== 'index') {\n            keys.push(_prepareKey(item, i, tmpKeyMap, keyName));\n        }\n        result.push(...appendRenderEach(item, i, i === items.length - 1, itemRenderFn, roots, context, parentCompomentStyles));\n    });\n    return result;\n}\nfunction loopAppend($parent, el) {\n    el[__].rootNodes.forEach(node => {\n        if (isComponent(node)) {\n            loopAppend($parent, node);\n        }\n        else {\n            $parent.appendChild(node);\n        }\n    });\n}\nfunction updateEl(el, i, items) {\n    if (el.isFirst !== (i === 0)) {\n        el.isFirst = i === 0;\n    }\n    if (el.isLast !== (i === items.length - 1)) {\n        el.isLast = (i === items.length - 1);\n    }\n    if (el.index !== i) {\n        el.index = i;\n    }\n    if (el.each !== items[i]) {\n        el.each = items[i];\n    }\n}\nfunction _parseIndexPath(p) {\n    return (isString(p) && p !== 'length' && /^\\d+$/.test(p)) ? Number(p) : p;\n}\nexport class ForComponent extends Component {\n    constructor(attrs) {\n      if (attrs.key && !/^(index|each(.[\\w\\d$_]+)*)$/.test(attrs.key)) {\n        throw new Error('Value of \"key\" attribute of <for> component is invalidate. See https://[todo]');\n      }\n      super(attrs);\n      const __vm_792732ac1261 = this[__$$_792732ac1261].proxy;\n      if (isViewModel(attrs.loop)) {\n        __vm_792732ac1261.loop = attrs.loop;\n      } else {\n        __vm_792732ac1261._l = attrs.loop;\n      }\n      attrs[$$].__watch('loop', () => {\n        __vm_792732ac1261.loop = attrs.loop;\n      });\n      const kn = attrs.key || 'index';\n      __vm_792732ac1261._keyName = kn;\n      __vm_792732ac1261._length = 0;\n      __vm_792732ac1261._keys = null;\n      __vm_792732ac1261._waitingUpdate = false;\n      if (kn !== 'index' && kn !== 'each') {\n        __vm_792732ac1261._keyName = new Function('each', `return ${ kn }`);\n        const propCount = kn.split('.').length + 1;\n        __vm_792732ac1261[$$].__watch('loop.*.' + kn.slice(5), propPath => {\n          if (propPath.length !== propCount || __vm_792732ac1261._waitingUpdate) {\n            return;\n          }\n          const items = __vm_792732ac1261.loop;\n          if (!isArray(items) || items.length === 0)\n            return;\n          const p = _parseIndexPath(propPath[1]);\n          if (!isNumber(p) || p >= items.length) {\n            return;\n          }\n          __vm_792732ac1261._keys[p] = __vm_792732ac1261._keyName(items[p]);\n        });\n      }\n      __vm_792732ac1261[$$].__watch('loop.*', propPath => {\n        if (__vm_792732ac1261[__].state !== ComponentStates.RENDERED || propPath.length !== 2 || __vm_792732ac1261._waitingUpdate) {\n          return;\n        }\n        const p = _parseIndexPath(propPath[1]);\n        if (p === 'length') {\n          __vm_792732ac1261._waitingUpdate = true;\n          __vm_792732ac1261.__updateIfNeed();\n        } else if (isNumber(p)) {\n          __vm_792732ac1261._updateItem(p);\n        }\n      });\n    }\n    get loop() {\n        return this._l;\n    }\n    set loop(v) {\n        // console.log('set loop');\n        this._l = v;\n        this._waitingUpdate = true;\n        this.__updateIfNeed();\n    }\n    __render() {\n        var _a;\n        const roots = this[__].rootNodes;\n        const itemRenderFn = (_a = this[__].slots) === null || _a === void 0 ? void 0 : _a.default;\n        if (!itemRenderFn) {\n            roots.push(document.createComment('empty'));\n            return roots;\n        }\n        const items = this.loop;\n        const keyName = this._keyName;\n        if (keyName !== 'index')\n            this._keys = [];\n        if (!isArray(items) || items.length === 0) {\n            roots.push(document.createComment('empty'));\n            return roots;\n        }\n        this._length = items.length;\n        return renderItems(items, itemRenderFn, roots, this._keys, keyName, this[__].context, this[__].compStyle);\n    }\n    _updateItem(index) {\n        var _a;\n        const items = this.loop;\n        const roots = this[__].rootNodes;\n        if (!isArray(items) || index >= roots.length)\n            return;\n        const keys = this._keys;\n        const item = items[index];\n        const oldEl = roots[index];\n        if (oldEl.each === item) {\n            return;\n        }\n        const itemRenderFn = (_a = this[__].slots) === null || _a === void 0 ? void 0 : _a.default;\n        if (!itemRenderFn)\n            return;\n        // console.log('update item:', index);\n        const keyName = this._keyName;\n        if (keyName !== 'index') {\n            const newKey = keyName === 'each' ? item : keyName(item);\n            const oldKey = keys[index];\n            if (newKey !== oldKey) {\n                const $fd = oldEl.__firstDOM;\n                const newEl = createEl(item, index, oldEl.isLast, itemRenderFn, this[__].context, this[__].compStyle);\n                const rr = assertRenderResults(newEl.__render());\n                $fd.parentNode.insertBefore(rr.length > 1 ? createFragment(rr) : rr[0], $fd);\n                oldEl.__destroy();\n                roots[index] = newEl;\n                keys[index] = newKey;\n                newEl.__handleAfterRender();\n                // console.log('update item render:', index);\n            }\n            else {\n                oldEl.each = item;\n            }\n        }\n        else {\n            oldEl.each = item;\n        }\n    }\n    __update() {\n        var _a;\n        this._waitingUpdate = false;\n        // console.log('for update');\n        const itemRenderFn = (_a = this[__].slots) === null || _a === void 0 ? void 0 : _a.default;\n        if (!itemRenderFn)\n            return;\n        const newItems = isArray(this.loop) ? this.loop : [];\n        const roots = this[__].rootNodes;\n        const nl = newItems.length;\n        const ol = this._length;\n        // nothing changed, return directly.\n        if (nl === 0 && ol === 0)\n            return;\n        const keyName = this._keyName;\n        // if new length equal 0, clear & render comment.\n        if (nl === 0 && ol > 0) {\n            const fd = roots[0].__firstDOM;\n            const $cmt = document.createComment('empty');\n            fd.parentNode.insertBefore($cmt, fd);\n            for (let i = 0; i < ol; i++) {\n                roots[i].__destroy();\n            }\n            roots.length = 1;\n            roots[0] = $cmt;\n            if (keyName !== 'index') {\n                this._keys.length = 0;\n            }\n            this._length = 0;\n            return;\n        }\n        this._length = nl;\n        const ctx = this[__].context;\n        const parentComponentStyles = this[__].compStyle;\n        const firstEl = roots[0]; // if ol === 0, firstEl is comment, else is component\n        const $parent = (ol === 0 ? firstEl : firstEl.__firstDOM).parentNode;\n        if (keyName === 'index') {\n            let $f = null;\n            if (ol === 0)\n                roots.length = 0;\n            for (let i = 0; i < nl; i++) {\n                if (i < ol) {\n                    updateEl(roots[i], i, newItems);\n                }\n                else {\n                    if (!$f)\n                        $f = createFragment();\n                    appendRenderEach(newItems[i], i, i === nl - 1, itemRenderFn, roots, ctx, parentComponentStyles).forEach(el => {\n                        $f.appendChild(el);\n                    });\n                }\n            }\n            if ($f) {\n                const $le = ol === 0 ? firstEl : roots[ol - 1].__lastDOM;\n                insertAfter($parent, $f, $le);\n                for (let i = ol; i < nl; i++) {\n                    roots[i].__handleAfterRender();\n                }\n            }\n            if (ol === 0) {\n                $parent.removeChild(firstEl);\n            }\n            if (nl >= ol)\n                return;\n            for (let i = nl; i < ol; i++) {\n                roots[i].__destroy();\n            }\n            roots.splice(nl);\n            return;\n        }\n        const oldKeys = this._keys;\n        if (ol === 0) {\n            roots.length = 0;\n            const rs = renderItems(newItems, itemRenderFn, roots, oldKeys, keyName, this[__].context, this[__].compStyle);\n            insertAfter($parent, createFragment(rs), firstEl);\n            $parent.removeChild(firstEl);\n            roots.forEach(el => el.__handleAfterRender());\n            return;\n        }\n        const oldKeyMap = new Map();\n        oldKeys.forEach((k, i) => {\n            oldKeyMap.set(k, i);\n        });\n        const newKeys = [];\n        const newKeyMap = new Map();\n        newItems.forEach((item, i) => {\n            // _assertVm(item, i);\n            newKeys.push(_prepareKey(item, i, newKeyMap, keyName));\n        });\n        let oi = 0;\n        let ni = 0;\n        let $lastS = null;\n        const newRoots = [];\n        const oldTags = new Uint8Array(ol);\n        while (oi < ol || ni < nl) {\n            while (oi < ol) {\n                if (oldTags[oi] !== 0) {\n                    oi++;\n                }\n                else if (newKeyMap.has(oldKeys[oi]) && newKeyMap.get(oldKeys[oi]) >= ni) {\n                    if (oi === ol - 1) {\n                        $lastS = roots[oi].__lastDOM.nextSibling;\n                    }\n                    break;\n                }\n                else {\n                    if (oi === ol - 1) {\n                        $lastS = roots[oi].__lastDOM.nextSibling;\n                    }\n                    roots[oi].__destroy();\n                    oi++;\n                }\n            }\n            if (oi >= ol) {\n                let $f = null;\n                const cei = newRoots.length;\n                for (; ni < nl; ni++) {\n                    const el = createEl(newItems[ni], ni, ni === nl - 1, itemRenderFn, ctx, parentComponentStyles);\n                    if (!$f)\n                        $f = createFragment();\n                    el.__render().forEach($n => $f.appendChild($n));\n                    newRoots.push(el);\n                }\n                if ($f) {\n                    if ($lastS) {\n                        $parent.insertBefore($f, $lastS);\n                    }\n                    else {\n                        $parent.appendChild($f);\n                    }\n                    for (let i = cei; i < newRoots.length; i++) {\n                        newRoots[i].__handleAfterRender();\n                    }\n                }\n                break;\n            }\n            const oldKey = oldKeys[oi];\n            let $f = null;\n            let $nes = null;\n            while (ni < nl) {\n                const newKey = newKeys[ni];\n                if (newKey === oldKey)\n                    break;\n                let reuseEl = null;\n                if (oldKeyMap.has(newKey)) {\n                    const oldIdx = oldKeyMap.get(newKey);\n                    if (oldIdx > oi && oldTags[oldIdx] === 0) {\n                        reuseEl = roots[oldIdx];\n                        oldTags[oldIdx] = 1;\n                    }\n                }\n                if (!$f)\n                    $f = createFragment();\n                if (!reuseEl) {\n                    reuseEl = createEl(newItems[ni], ni, ni === nl - 1, itemRenderFn, ctx, parentComponentStyles);\n                    reuseEl.__render().forEach($n => $f.appendChild($n));\n                    if (!$nes)\n                        $nes = [];\n                    $nes.push(reuseEl);\n                }\n                else {\n                    loopAppend($f, reuseEl);\n                    updateEl(reuseEl, ni, newItems);\n                }\n                newRoots.push(reuseEl);\n                ni++;\n            }\n            if (ni >= nl) {\n                throw new Error('unimpossible?!');\n            }\n            const el = roots[oi];\n            $f && $parent.insertBefore($f, el.__firstDOM);\n            $nes && $nes.forEach(el => el.__handleAfterRender());\n            updateEl(el, ni, newItems);\n            newRoots.push(el);\n            oi++;\n            ni++;\n        }\n        this[__].rootNodes = newRoots;\n        this._keys = newKeys;\n    }\n}\n//# sourceMappingURL=for.js.map","import {\n  $$ as __$$_792732ac1261\n} from '../vm/common';import { Component } from '../core/component';\nimport { $$ } from '../vm/common';\nexport class ParameterComponent extends Component {\n    constructor(attrs, params) {\n      super(attrs);\n      const __vm_792732ac1261 = this[__$$_792732ac1261].proxy;\n      params.forEach(p => {\n        __vm_792732ac1261[p] = attrs[p];\n        attrs[$$].__watch(p, () => {\n          __vm_792732ac1261[p] = attrs[p];\n        });\n      });\n    }\n}\n//# sourceMappingURL=parameter.js.map","export function bootstrap(ComponentClazz, dom, attrs) {\n    const app = ComponentClazz.create(attrs);\n    app.__renderToDOM(dom, dom !== document.body);\n    return app;\n}\n//# sourceMappingURL=bootstrap.js.map","import { createElement, createTextNode } from '../util';\nimport { i18n as i18nService } from './i18n';\nimport { __ } from './component';\nexport function emptyRenderFn(component) {\n    const el = document.createComment('empty');\n    component[__].rootNodes.push(el);\n    return [el];\n}\nexport function errorRenderFn(component) {\n    const el = createElement('span', {\n        style: 'color: red !important;'\n    });\n    el.textContent = 'template parsing failed! please check webpack log.';\n    component[__].rootNodes.push(el);\n    return el;\n}\nexport function textRenderFn(component, txtContent) {\n    const el = createTextNode(txtContent);\n    component[__].rootNodes.push(el);\n    return el;\n}\nexport function i18nRenderFn(component, key, isRoot = false) {\n    const el = createTextNode();\n    const fn = () => {\n        el.textContent = i18nService.__t(key);\n    };\n    fn();\n    component.__i18nWatch(fn);\n    isRoot && component[__].rootNodes.push(el);\n    return el;\n}\n//# sourceMappingURL=render_fns.js.map","import { isObject } from 'jinge';\n/**\n * @internal\n */\nexport const VIEW_NAME_PATH = Symbol('#viewNamePath');\nexport function isParamsOrQuerySame(src, dst) {\n    if (!src)\n        return !dst;\n    if (!dst)\n        return !src;\n    for (const k in src) {\n        if (src[k] !== dst[k])\n            return false;\n    }\n    return true;\n}\nexport function cloneParamsOrQuery(v) {\n    return Object.fromEntries(Object.keys(v).map(k => {\n        return [k, v[k]];\n    }));\n}\nexport function encodeParamsOrQuery(v) {\n    if (!isObject(v))\n        return '';\n    return Object.keys(v).map(k => {\n        return encodeURIComponent(k) + '=' + encodeURIComponent(v[k]);\n    }).join('&');\n}\n//# sourceMappingURL=common.js.map","/**\n * Tokenize input string.\n */\nfunction lexer(str) {\n    var tokens = [];\n    var i = 0;\n    while (i < str.length) {\n        var char = str[i];\n        if (char === \"*\" || char === \"+\" || char === \"?\") {\n            tokens.push({ type: \"MODIFIER\", index: i, value: str[i++] });\n            continue;\n        }\n        if (char === \"\\\\\") {\n            tokens.push({ type: \"ESCAPED_CHAR\", index: i++, value: str[i++] });\n            continue;\n        }\n        if (char === \"{\") {\n            tokens.push({ type: \"OPEN\", index: i, value: str[i++] });\n            continue;\n        }\n        if (char === \"}\") {\n            tokens.push({ type: \"CLOSE\", index: i, value: str[i++] });\n            continue;\n        }\n        if (char === \":\") {\n            var name = \"\";\n            var j = i + 1;\n            while (j < str.length) {\n                var code = str.charCodeAt(j);\n                if (\n                // `0-9`\n                (code >= 48 && code <= 57) ||\n                    // `A-Z`\n                    (code >= 65 && code <= 90) ||\n                    // `a-z`\n                    (code >= 97 && code <= 122) ||\n                    // `_`\n                    code === 95) {\n                    name += str[j++];\n                    continue;\n                }\n                break;\n            }\n            if (!name)\n                throw new TypeError(\"Missing parameter name at \" + i);\n            tokens.push({ type: \"NAME\", index: i, value: name });\n            i = j;\n            continue;\n        }\n        if (char === \"(\") {\n            var count = 1;\n            var pattern = \"\";\n            var j = i + 1;\n            if (str[j] === \"?\") {\n                throw new TypeError(\"Pattern cannot start with \\\"?\\\" at \" + j);\n            }\n            while (j < str.length) {\n                if (str[j] === \"\\\\\") {\n                    pattern += str[j++] + str[j++];\n                    continue;\n                }\n                if (str[j] === \")\") {\n                    count--;\n                    if (count === 0) {\n                        j++;\n                        break;\n                    }\n                }\n                else if (str[j] === \"(\") {\n                    count++;\n                    if (str[j + 1] !== \"?\") {\n                        throw new TypeError(\"Capturing groups are not allowed at \" + j);\n                    }\n                }\n                pattern += str[j++];\n            }\n            if (count)\n                throw new TypeError(\"Unbalanced pattern at \" + i);\n            if (!pattern)\n                throw new TypeError(\"Missing pattern at \" + i);\n            tokens.push({ type: \"PATTERN\", index: i, value: pattern });\n            i = j;\n            continue;\n        }\n        tokens.push({ type: \"CHAR\", index: i, value: str[i++] });\n    }\n    tokens.push({ type: \"END\", index: i, value: \"\" });\n    return tokens;\n}\n/**\n * Parse a string for the raw tokens.\n */\nexport function parse(str, options) {\n    if (options === void 0) { options = {}; }\n    var tokens = lexer(str);\n    var _a = options.prefixes, prefixes = _a === void 0 ? \"./\" : _a;\n    var defaultPattern = \"[^\" + escapeString(options.delimiter || \"/#?\") + \"]+?\";\n    var result = [];\n    var key = 0;\n    var i = 0;\n    var path = \"\";\n    var tryConsume = function (type) {\n        if (i < tokens.length && tokens[i].type === type)\n            return tokens[i++].value;\n    };\n    var mustConsume = function (type) {\n        var value = tryConsume(type);\n        if (value !== undefined)\n            return value;\n        var _a = tokens[i], nextType = _a.type, index = _a.index;\n        throw new TypeError(\"Unexpected \" + nextType + \" at \" + index + \", expected \" + type);\n    };\n    var consumeText = function () {\n        var result = \"\";\n        var value;\n        // tslint:disable-next-line\n        while ((value = tryConsume(\"CHAR\") || tryConsume(\"ESCAPED_CHAR\"))) {\n            result += value;\n        }\n        return result;\n    };\n    while (i < tokens.length) {\n        var char = tryConsume(\"CHAR\");\n        var name = tryConsume(\"NAME\");\n        var pattern = tryConsume(\"PATTERN\");\n        if (name || pattern) {\n            var prefix = char || \"\";\n            if (prefixes.indexOf(prefix) === -1) {\n                path += prefix;\n                prefix = \"\";\n            }\n            if (path) {\n                result.push(path);\n                path = \"\";\n            }\n            result.push({\n                name: name || key++,\n                prefix: prefix,\n                suffix: \"\",\n                pattern: pattern || defaultPattern,\n                modifier: tryConsume(\"MODIFIER\") || \"\"\n            });\n            continue;\n        }\n        var value = char || tryConsume(\"ESCAPED_CHAR\");\n        if (value) {\n            path += value;\n            continue;\n        }\n        if (path) {\n            result.push(path);\n            path = \"\";\n        }\n        var open = tryConsume(\"OPEN\");\n        if (open) {\n            var prefix = consumeText();\n            var name_1 = tryConsume(\"NAME\") || \"\";\n            var pattern_1 = tryConsume(\"PATTERN\") || \"\";\n            var suffix = consumeText();\n            mustConsume(\"CLOSE\");\n            result.push({\n                name: name_1 || (pattern_1 ? key++ : \"\"),\n                pattern: name_1 && !pattern_1 ? defaultPattern : pattern_1,\n                prefix: prefix,\n                suffix: suffix,\n                modifier: tryConsume(\"MODIFIER\") || \"\"\n            });\n            continue;\n        }\n        mustConsume(\"END\");\n    }\n    return result;\n}\n/**\n * Compile a string to a template function for the path.\n */\nexport function compile(str, options) {\n    return tokensToFunction(parse(str, options), options);\n}\n/**\n * Expose a method for transforming tokens into the path function.\n */\nexport function tokensToFunction(tokens, options) {\n    if (options === void 0) { options = {}; }\n    var reFlags = flags(options);\n    var _a = options.encode, encode = _a === void 0 ? function (x) { return x; } : _a, _b = options.validate, validate = _b === void 0 ? true : _b;\n    // Compile all the tokens into regexps.\n    var matches = tokens.map(function (token) {\n        if (typeof token === \"object\") {\n            return new RegExp(\"^(?:\" + token.pattern + \")$\", reFlags);\n        }\n    });\n    return function (data) {\n        var path = \"\";\n        for (var i = 0; i < tokens.length; i++) {\n            var token = tokens[i];\n            if (typeof token === \"string\") {\n                path += token;\n                continue;\n            }\n            var value = data ? data[token.name] : undefined;\n            var optional = token.modifier === \"?\" || token.modifier === \"*\";\n            var repeat = token.modifier === \"*\" || token.modifier === \"+\";\n            if (Array.isArray(value)) {\n                if (!repeat) {\n                    throw new TypeError(\"Expected \\\"\" + token.name + \"\\\" to not repeat, but got an array\");\n                }\n                if (value.length === 0) {\n                    if (optional)\n                        continue;\n                    throw new TypeError(\"Expected \\\"\" + token.name + \"\\\" to not be empty\");\n                }\n                for (var j = 0; j < value.length; j++) {\n                    var segment = encode(value[j], token);\n                    if (validate && !matches[i].test(segment)) {\n                        throw new TypeError(\"Expected all \\\"\" + token.name + \"\\\" to match \\\"\" + token.pattern + \"\\\", but got \\\"\" + segment + \"\\\"\");\n                    }\n                    path += token.prefix + segment + token.suffix;\n                }\n                continue;\n            }\n            if (typeof value === \"string\" || typeof value === \"number\") {\n                var segment = encode(String(value), token);\n                if (validate && !matches[i].test(segment)) {\n                    throw new TypeError(\"Expected \\\"\" + token.name + \"\\\" to match \\\"\" + token.pattern + \"\\\", but got \\\"\" + segment + \"\\\"\");\n                }\n                path += token.prefix + segment + token.suffix;\n                continue;\n            }\n            if (optional)\n                continue;\n            var typeOfMessage = repeat ? \"an array\" : \"a string\";\n            throw new TypeError(\"Expected \\\"\" + token.name + \"\\\" to be \" + typeOfMessage);\n        }\n        return path;\n    };\n}\n/**\n * Create path match function from `path-to-regexp` spec.\n */\nexport function match(str, options) {\n    var keys = [];\n    var re = pathToRegexp(str, keys, options);\n    return regexpToFunction(re, keys, options);\n}\n/**\n * Create a path match function from `path-to-regexp` output.\n */\nexport function regexpToFunction(re, keys, options) {\n    if (options === void 0) { options = {}; }\n    var _a = options.decode, decode = _a === void 0 ? function (x) { return x; } : _a;\n    return function (pathname) {\n        var m = re.exec(pathname);\n        if (!m)\n            return false;\n        var path = m[0], index = m.index;\n        var params = Object.create(null);\n        var _loop_1 = function (i) {\n            // tslint:disable-next-line\n            if (m[i] === undefined)\n                return \"continue\";\n            var key = keys[i - 1];\n            if (key.modifier === \"*\" || key.modifier === \"+\") {\n                params[key.name] = m[i].split(key.prefix + key.suffix).map(function (value) {\n                    return decode(value, key);\n                });\n            }\n            else {\n                params[key.name] = decode(m[i], key);\n            }\n        };\n        for (var i = 1; i < m.length; i++) {\n            _loop_1(i);\n        }\n        return { path: path, index: index, params: params };\n    };\n}\n/**\n * Escape a regular expression string.\n */\nfunction escapeString(str) {\n    return str.replace(/([.+*?=^!:${}()[\\]|/\\\\])/g, \"\\\\$1\");\n}\n/**\n * Get the flags for a regexp from the options.\n */\nfunction flags(options) {\n    return options && options.sensitive ? \"\" : \"i\";\n}\n/**\n * Pull out keys from a regexp.\n */\nfunction regexpToRegexp(path, keys) {\n    if (!keys)\n        return path;\n    // Use a negative lookahead to match only capturing groups.\n    var groups = path.source.match(/\\((?!\\?)/g);\n    if (groups) {\n        for (var i = 0; i < groups.length; i++) {\n            keys.push({\n                name: i,\n                prefix: \"\",\n                suffix: \"\",\n                modifier: \"\",\n                pattern: \"\"\n            });\n        }\n    }\n    return path;\n}\n/**\n * Transform an array into a regexp.\n */\nfunction arrayToRegexp(paths, keys, options) {\n    var parts = paths.map(function (path) { return pathToRegexp(path, keys, options).source; });\n    return new RegExp(\"(?:\" + parts.join(\"|\") + \")\", flags(options));\n}\n/**\n * Create a path regexp from string input.\n */\nfunction stringToRegexp(path, keys, options) {\n    return tokensToRegexp(parse(path, options), keys, options);\n}\n/**\n * Expose a function for taking tokens and returning a RegExp.\n */\nexport function tokensToRegexp(tokens, keys, options) {\n    if (options === void 0) { options = {}; }\n    var _a = options.strict, strict = _a === void 0 ? false : _a, _b = options.start, start = _b === void 0 ? true : _b, _c = options.end, end = _c === void 0 ? true : _c, _d = options.encode, encode = _d === void 0 ? function (x) { return x; } : _d;\n    var endsWith = \"[\" + escapeString(options.endsWith || \"\") + \"]|$\";\n    var delimiter = \"[\" + escapeString(options.delimiter || \"/#?\") + \"]\";\n    var route = start ? \"^\" : \"\";\n    // Iterate over the tokens and create our regexp string.\n    for (var _i = 0, tokens_1 = tokens; _i < tokens_1.length; _i++) {\n        var token = tokens_1[_i];\n        if (typeof token === \"string\") {\n            route += escapeString(encode(token));\n        }\n        else {\n            var prefix = escapeString(encode(token.prefix));\n            var suffix = escapeString(encode(token.suffix));\n            if (token.pattern) {\n                if (keys)\n                    keys.push(token);\n                if (prefix || suffix) {\n                    if (token.modifier === \"+\" || token.modifier === \"*\") {\n                        var mod = token.modifier === \"*\" ? \"?\" : \"\";\n                        route += \"(?:\" + prefix + \"((?:\" + token.pattern + \")(?:\" + suffix + prefix + \"(?:\" + token.pattern + \"))*)\" + suffix + \")\" + mod;\n                    }\n                    else {\n                        route += \"(?:\" + prefix + \"(\" + token.pattern + \")\" + suffix + \")\" + token.modifier;\n                    }\n                }\n                else {\n                    route += \"(\" + token.pattern + \")\" + token.modifier;\n                }\n            }\n            else {\n                route += \"(?:\" + prefix + suffix + \")\" + token.modifier;\n            }\n        }\n    }\n    if (end) {\n        if (!strict)\n            route += delimiter + \"?\";\n        route += !options.endsWith ? \"$\" : \"(?=\" + endsWith + \")\";\n    }\n    else {\n        var endToken = tokens[tokens.length - 1];\n        var isEndDelimited = typeof endToken === \"string\"\n            ? delimiter.indexOf(endToken[endToken.length - 1]) > -1\n            : // tslint:disable-next-line\n                endToken === undefined;\n        if (!strict) {\n            route += \"(?:\" + delimiter + \"(?=\" + endsWith + \"))?\";\n        }\n        if (!isEndDelimited) {\n            route += \"(?=\" + delimiter + \"|\" + endsWith + \")\";\n        }\n    }\n    return new RegExp(route, flags(options));\n}\n/**\n * Normalize the given path string, returning a regular expression.\n *\n * An empty array can be passed in for the keys, which will hold the\n * placeholder key descriptions. For example, using `/user/:id`, `keys` will\n * contain `[{ name: 'id', delimiter: '/', optional: false, repeat: false }]`.\n */\nexport function pathToRegexp(path, keys, options) {\n    if (path instanceof RegExp)\n        return regexpToRegexp(path, keys);\n    if (Array.isArray(path))\n        return arrayToRegexp(path, keys, options);\n    return stringToRegexp(path, keys, options);\n}\n//# sourceMappingURL=index.js.map","import {\n  $$ as __$$_792732ac1261\n} from 'jinge';import { Component, attrs, $$, __, isComponent, isFunction, assertRenderResults, createFragment, ComponentStates, isObject } from 'jinge';\nimport { VIEW_NAME_PATH } from '../common';\nfunction createEl(renderFn, context, parentComponentStyles) {\n    const el = new Component(attrs({\n        [__]: {\n            context,\n            compStyle: parentComponentStyles,\n            slots: {\n                default: renderFn\n            }\n        }\n    }));\n    return el[$$].proxy;\n}\nfunction removeMoreThanOne(ns) {\n    while (ns.length > 1) {\n        const el = ns.pop();\n        if (isComponent(el)) {\n            el.__destroy(true);\n        }\n        else {\n            el.parentNode.removeChild(el);\n        }\n    }\n}\nexport class RouterViewComponent extends Component {\n    constructor(attrs) {\n      super(attrs);\n      const __vm_792732ac1261 = this[__$$_792732ac1261].proxy;\n      __vm_792732ac1261._name = attrs.name || 'default';\n      __vm_792732ac1261._router = __vm_792732ac1261.__getContext('router');\n      if (!__vm_792732ac1261._router) {\n        throw new Error('Context named \"router\" not found.');\n      }\n      const parentNamePath = __vm_792732ac1261.__getContext(VIEW_NAME_PATH);\n      __vm_792732ac1261._path = [\n        ...parentNamePath || [],\n        __vm_792732ac1261._name\n      ];\n      __vm_792732ac1261.__setContext(VIEW_NAME_PATH, __vm_792732ac1261._path, true);\n      __vm_792732ac1261.resolving = false;\n      __vm_792732ac1261._asyncKey = 0;\n    }\n    __afterRender() {\n        this._router.__regView(this._path, this);\n    }\n    __render() {\n        const el = document.createComment('router-view');\n        this[__].rootNodes.push(el);\n        return this[__].rootNodes;\n    }\n    async _shouldUpdateView(from, to) {\n        const el = this[__].rootNodes[0];\n        if (!isComponent(el)) {\n            return true;\n        }\n        if (isFunction(el.__routeShouldLeave)) {\n            return await el.__routeShouldLeave(from, to);\n        }\n        return true;\n    }\n    _renderErr(err) {\n        var _a;\n        if (this[__].state !== ComponentStates.RENDERED) {\n            return;\n        }\n        const roots = this[__].rootNodes;\n        removeMoreThanOne(roots);\n        const errRenderFn = (_a = this[__].slots) === null || _a === void 0 ? void 0 : _a.error;\n        if (!errRenderFn) {\n            return;\n        }\n        const el = createEl(errRenderFn, this[__].context, this[__].compStyle);\n        el.error = isObject(err) ? (err.message || err.toString()) : err;\n        const ns = assertRenderResults(el.__render());\n        const $cursor = roots[0];\n        $cursor.parentNode.insertBefore(ns.length > 1 ? createFragment(ns) : ns[0], $cursor);\n        roots.push(el);\n    }\n    async _updateView(current, routeMatchItem, asyncKey) {\n        // console.log('update view:', this._path);\n        var _a, _b;\n        const roots = this[__].rootNodes;\n        const oldEl = roots[0];\n        removeMoreThanOne(roots);\n        const $el = isComponent(oldEl) ? oldEl.__firstDOM : oldEl;\n        const $pa = $el.parentNode;\n        const $cursor = document.createComment('--');\n        $pa.insertBefore($cursor, $el);\n        roots.push($cursor);\n        if (isComponent(oldEl)) {\n            /**\n             * 由于异步回调可能过期，因此需要先隐藏元素，待接下来的异步过程执行成功后才删除组件。\n             */\n            // toggleHide((oldEl as Component));\n            oldEl.__destroy(true);\n        }\n        else {\n            $pa.removeChild($el);\n        }\n        roots.shift();\n        if (!routeMatchItem) {\n            const newEl = document.createComment('router-view');\n            $pa.insertBefore(newEl, $cursor);\n            $pa.removeChild($cursor);\n            roots[0] = newEl;\n            return;\n        }\n        /**\n         *\n         * ````html\n         * <router-view>\n         * <div slot:default><i class=\"loading\"/>正在加载...</div>\n         * <div slot:error>加载失败，请刷新浏览器重试。</div>\n         * </router-view>\n         * ````\n         */\n        const loadingRenderFn = (_a = this[__].slots) === null || _a === void 0 ? void 0 : _a.default;\n        let loadingEl = null;\n        if (loadingRenderFn) {\n            loadingEl = createEl(loadingRenderFn, this[__].context, this[__].compStyle);\n            const ns = assertRenderResults(loadingEl.__render());\n            $pa.insertBefore(ns.length > 1 ? createFragment(ns) : ns[0], $cursor);\n            /**\n             * 在接下来的异步请求 resolve 和 component 的过程中，如果组件被触发销毁，\n             * 则 loadingEl 也需要被自动清理。将 loadingEl 添加到 roots 中即是为了这一目标。\n             */\n            roots.push(loadingEl);\n        }\n        const route = routeMatchItem.route;\n        const idx = current._routePath.findIndex(it => {\n            return it.route === route;\n        });\n        const parentResolves = current._routePath.slice(0, idx).reduce((pv, it) => {\n            return Object.assign(pv, it.resolves);\n        }, {});\n        // console.log(parentResolves);\n        this._asyncKey = asyncKey;\n        const resolveDefs = route.define.resolves;\n        const currentResolves = { ...parentResolves };\n        if (resolveDefs) {\n            try {\n                await Promise.all(Object.keys(resolveDefs).map(k => {\n                    const resolveOrFn = resolveDefs[k];\n                    if (isFunction(resolveOrFn)) {\n                        const rtn = resolveOrFn(routeMatchItem.params, current.query, parentResolves);\n                        if (isObject(rtn) && isFunction(rtn.then)) {\n                            return rtn.then((rr) => {\n                                currentResolves[k] = rr;\n                            });\n                        }\n                        else {\n                            currentResolves[k] = rtn;\n                            return Promise.resolve();\n                        }\n                    }\n                    else {\n                        currentResolves[k] = resolveOrFn;\n                        return Promise.resolve();\n                    }\n                }));\n            }\n            catch (err) {\n                if (asyncKey === this._asyncKey) {\n                    this._renderErr(err);\n                }\n                throw err;\n            }\n        }\n        // 如果回调已经过期，或组件已被销毁，直接忽略后续逻辑。\n        if (asyncKey !== this._asyncKey || this[__].state !== ComponentStates.RENDERED) {\n            return;\n        }\n        routeMatchItem.resolves = currentResolves;\n        if (!(this._name in route.components)) {\n            let CompClazz = (_b = route.define.components) === null || _b === void 0 ? void 0 : _b[this._name];\n            if (!CompClazz && this._name === 'default') {\n                CompClazz = route.define.component;\n            }\n            if (!CompClazz) {\n                throw new Error(`component named \"${this._name}\" not found.`);\n            }\n            if (isFunction(CompClazz) && !isComponent(CompClazz)) {\n                try {\n                    CompClazz = await CompClazz(routeMatchItem.params, current.query, currentResolves);\n                }\n                catch (ex) {\n                    if (asyncKey === this._asyncKey) {\n                        this._renderErr(ex);\n                    }\n                    throw ex;\n                }\n                if (asyncKey !== this._asyncKey || this[__].state !== ComponentStates.RENDERED) {\n                    return;\n                }\n                route.components[this._name] = CompClazz;\n            }\n            else {\n                route.components[this._name] = CompClazz;\n            }\n        }\n        if (loadingEl) {\n            loadingEl.__destroy(true);\n        }\n        const newEl = route.components[this._name].create(attrs({\n            ...currentResolves,\n            [__]: {\n                context: this[__].context,\n                compStyle: this[__].compStyle\n            }\n        }));\n        const ns = assertRenderResults(newEl.__render());\n        $pa.insertBefore(ns.length > 1 ? createFragment(ns) : ns[0], $cursor);\n        roots.length = 1;\n        roots[0] = newEl;\n        $pa.removeChild($cursor);\n        newEl.__handleAfterRender();\n    }\n    __beforeDestroy() {\n        this._router.__deregView(this._path);\n    }\n}\n//# sourceMappingURL=view.js.map","import { attrs as attrs_792732ac1261, __ as ___792732ac1261, assertRenderResults as assertRenderResults_792732ac1261 } from 'jinge';\nimport { RouterViewComponent as RouterViewComponent_4e2f8d718930_19e06f21c799 } from './view';import { Component } from 'jinge';\nexport class RouterRedirectComponent extends Component {\n    static get template() {\n        return function(component) {\n          const vm_0 = component;\n          return [\n          ...(() => {\n            const attrs = attrs_792732ac1261({\n              [___792732ac1261]: {\n                compStyle: component[___792732ac1261].compStyle ? { ...component[___792732ac1261].compStyle } : null,\n                context: component[___792732ac1261].context,\n              },\n            });\n            const el = RouterViewComponent_4e2f8d718930_19e06f21c799.create(attrs);\n            component[___792732ac1261].rootNodes.push(el);\n            return assertRenderResults_792732ac1261(el.__render());\n          })()\n          ];\n        };\n    }\n}\n//# sourceMappingURL=redirect.js.map","import { Messenger, isString, vm, warn, isFunction, registerEvent, arrayPushIfNotExist, arrayRemove, } from 'jinge';\nimport { match, compile } from 'path-to-regexp';\nimport { isParamsOrQuerySame, cloneParamsOrQuery, encodeParamsOrQuery } from './common';\nimport { RouterRedirectComponent } from './components/redirect';\nfunction normPath(p) {\n    if (!p || !p.startsWith('/'))\n        p = '/' + p;\n    return p.replace(/[/\\\\]+/g, '/');\n}\nfunction parseVal(v) {\n    if (v === 'true') {\n        return true;\n    }\n    else if (v === 'false') {\n        return false;\n    }\n    else if (/^\\d+$/.test(v)) {\n        return Number(v);\n    }\n    else {\n        return v;\n    }\n}\nfunction parseQuery(search) {\n    const segments = search.split('&').map(s => s.trim()).filter(s => !!s);\n    if (segments.length === 0)\n        return {};\n    return Object.fromEntries(segments.map(seg => {\n        const pair = seg.split('=').map(decodeURIComponent);\n        return [pair[0], pair.length <= 1 ? true : parseVal(pair[1])];\n    }));\n}\nfunction addRoute(map, route, container, parent = null) {\n    const hasChild = route.children && route.children.length > 0;\n    const path = normPath(route.path + (hasChild ? '/' : ''));\n    const name = route.name || ((parent ? parent.name : '') + route.path);\n    if (map.has(name)) {\n        throw new Error('duplicated route name: ' + name);\n    }\n    if (hasChild && !route.component && !route.components) {\n        route.component = RouterRedirectComponent;\n    }\n    const _route = {\n        name: name, parent, p2r: {\n            match: match(path, { end: !hasChild, decode: decodeURIComponent }),\n            toPath: compile(path)\n        },\n        define: route, components: {}, redirect: route.redirect\n    };\n    map.set(name, _route);\n    if (hasChild) {\n        _route.children = [];\n        route.children.forEach(cr => {\n            addRoute(map, cr, _route.children, _route);\n        });\n    }\n    container.push(_route);\n}\nfunction matchRoutePath(pathname, routes, parentPath = []) {\n    routes.find(route => {\n        const matches = route.p2r.match(pathname);\n        if (matches) {\n            /**\n             * 子路由继承父亲路由的 params\n             */\n            const params = parentPath.reduce((pv, it) => {\n                return Object.assign({}, it.params);\n            }, {});\n            parentPath.push({\n                route, params: Object.assign(params, matches.params)\n            });\n            if (route.children) {\n                matchRoutePath(pathname.substring(matches.path.length - 1), route.children, parentPath);\n            }\n        }\n        return !!matches;\n    });\n    return parentPath;\n}\nfunction getPathnameAndSearch(destination, __map, baseHref) {\n    if (isString(destination)) {\n        destination = { name: destination };\n    }\n    const name = destination.name;\n    const route = __map.get(name);\n    if (!route) {\n        warn(`target route name \"${name}\" not found.`);\n        return null;\n    }\n    const rs = [route];\n    let _p = route;\n    while ((_p = _p.parent)) {\n        rs.unshift(_p);\n    }\n    return {\n        pathname: normPath(baseHref + '/' + rs.reduce((pv, it) => {\n            return pv + '/' + it.p2r.toPath(destination.params);\n        }, '')),\n        search: Object.keys(destination.query || {}).map(k => {\n            return encodeURIComponent(k) + '=' + encodeURIComponent(destination.query[k]);\n        }).join('&')\n    };\n}\nfunction getViewsToUpdate(views, resetLv, curLv = 0, viewsToUpdate = []) {\n    views.forEach(node => {\n        if (curLv >= resetLv) {\n            viewsToUpdate.push({\n                lv: curLv, vn: node\n            });\n        }\n        else if (node.__views) {\n            getViewsToUpdate(node.__views, resetLv, curLv + 1, viewsToUpdate);\n        }\n    });\n    return viewsToUpdate;\n}\nexport class Router extends Messenger {\n    constructor({ mode, baseHref = '/' }) {\n        super();\n        this.__mode = mode;\n        this.__started = false;\n        this.__dereg = null;\n        this.__routes = [];\n        this.__map = new Map();\n        this.__views = null;\n        this.__guard = {\n            before: [], after: []\n        };\n        this.__info = vm({\n            _pathname: null,\n            _routePath: [],\n            params: {},\n            query: {}\n        });\n        this.__asyncKey = 0;\n        this.baseHref = baseHref;\n    }\n    get baseHref() {\n        return this.__base;\n    }\n    set baseHref(v) {\n        v = normPath(v);\n        if (!v.endsWith('/')) {\n            v += '/';\n        }\n        this.__base = v;\n    }\n    beforeEach(guardFn) {\n        arrayPushIfNotExist(this.__guard.before, guardFn);\n        return () => {\n            arrayRemove(this.__guard.before, guardFn);\n        };\n    }\n    afterEach(guardFn) {\n        arrayPushIfNotExist(this.__guard.after, guardFn);\n        return () => {\n            arrayRemove(this.__guard.after, guardFn);\n        };\n    }\n    __regView(viewNamePath, viewComponent) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        let node = this;\n        for (let i = 0; i < viewNamePath.length - 1; i++) {\n            node = node.__views.get(viewNamePath[i]);\n        }\n        if (!node.__views) {\n            node.__views = new Map();\n        }\n        const viewName = viewNamePath[viewNamePath.length - 1];\n        if (node.__views.has(viewName)) {\n            throw new Error('dulplicated view name: ' + viewName + ' at path: ' + viewNamePath.join('->'));\n        }\n        node.__views.set(viewName, {\n            component: viewComponent,\n            __views: null\n        });\n        if (viewNamePath.length > this.__info._routePath.length) {\n            return;\n        }\n        viewComponent._updateView(this.__info, this.__info._routePath[viewNamePath.length - 1], this.__asyncKey).catch(err => this._onErr(err));\n    }\n    __deregView(viewNamePath) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        let node = this;\n        for (let i = 0; i < viewNamePath.length - 1; i++) {\n            node = node.__views.get(viewNamePath[i]);\n            if (!node)\n                return;\n        }\n        if (!node.__views) {\n            return;\n        }\n        node.__views.delete(viewNamePath[viewNamePath.length - 1]);\n    }\n    register(route) {\n        if (this.__started) {\n            throw new Error('can\\'t register after Router.start()');\n        }\n        addRoute(this.__map, route, this.__routes);\n        return this;\n    }\n    start() {\n        if (this.__started)\n            return;\n        this.__started = true;\n        // checkName(this.__map, this.__routes);\n        // console.log(this.__routes);\n        const isHashMode = this.__mode === 'hash';\n        this.__dereg = registerEvent(window, isHashMode ? 'hashchange' : 'popstate', isHashMode ? this._onHashChange.bind(this) : this._onStateChange.bind(this));\n        if (isHashMode) {\n            this._onHashChange();\n        }\n        else {\n            this._onStateChange();\n        }\n    }\n    destroy() {\n        if (!this.__started)\n            return;\n        this.__dereg && this.__dereg();\n    }\n    _onErr(err) {\n        // eslint-disable-next-line no-console\n        console.error(err);\n        this.__notify('error', err);\n    }\n    _onHashChange() {\n        const hash = location.hash.slice(1);\n        const qi = hash.indexOf('?');\n        this._update(qi > 0 ? hash.substring(0, qi) : hash, qi > 0 ? hash.substring(qi + 1) : '').catch(err => this._onErr(err));\n    }\n    _onStateChange() {\n        this._update(location.pathname, location.search ? location.search.substring(1) : '').catch(err => this._onErr(err));\n    }\n    async _update(pathname, search) {\n        var _a;\n        pathname = normPath(pathname);\n        if (this.__base !== '/' && pathname.startsWith(this.__base)) {\n            pathname = pathname.substring(this.__base.length - 1);\n        }\n        const query = (search ? (isString(search) ? parseQuery(search) : cloneParamsOrQuery(search)) : {});\n        /**\n         * 由于路由跳转是异步过程，期间会有多处异步等待。如果某个路由还在跳转的过程中，\n         * 业务层又发起了新的路由跳转，则应该忽略之前的跳转。\n         *\n         *\n         */\n        // 使用 asyncKey 和闭包配合来判断异步回调是否过期，如果过期则直接忽略接下来的逻辑。\n        const asyncKey = ++this.__asyncKey;\n        /**\n         * 如果 pathname 没有发生变化，说明不可能出现 router-view 的更新，\n         * 可能是什么都没有变，或者 url 的 query 部分发生变化，这种情况下简单地将\n         * 新的 query 赋值给旧的 query 既可，ViewModel 层面会自动将更新传递给业务组件。\n         */\n        if (pathname === this.__info._pathname) {\n            if (!isParamsOrQuerySame(query, this.__info.query)) {\n                Object.assign(this.__info.query, query);\n            }\n            return;\n        }\n        // console.log('up', asyncKey);\n        const newMatchPath = matchRoutePath(pathname, this.__routes);\n        if (newMatchPath.length === 0) {\n            warn('no route match path:', pathname);\n            return;\n        }\n        const last = newMatchPath[newMatchPath.length - 1];\n        const newRouteInfo = vm({\n            _pathname: pathname,\n            _routePath: newMatchPath,\n            query,\n            params: last.params\n        });\n        let redirect = last.route.redirect;\n        if (redirect) {\n            if (isFunction(redirect)) {\n                redirect = await redirect(newRouteInfo.params, newRouteInfo.query);\n                if (asyncKey !== this.__asyncKey) {\n                    return;\n                }\n            }\n            else if (isString(redirect)) {\n                redirect = {\n                    name: redirect, params: newRouteInfo.params, query: newRouteInfo.query\n                };\n            }\n            this.go(redirect, {\n                replace: true\n            });\n            return;\n        }\n        let sameLevel = -1;\n        for (let i = 0; i < this.__info._routePath.length; i++) {\n            if (i >= newMatchPath.length)\n                break;\n            const oldIt = this.__info._routePath[i];\n            const newIt = newMatchPath[i];\n            if (oldIt.route !== newIt.route || !isParamsOrQuerySame(newIt.params, oldIt.params)) {\n                break;\n            }\n            else {\n                sameLevel = i;\n            }\n        }\n        if (this.__info._routePath.length === newMatchPath.length && sameLevel === newMatchPath.length - 1) {\n            if (!isParamsOrQuerySame(query, this.__info.query)) {\n                Object.assign(this.__info.query, query);\n            }\n            return;\n        }\n        const viewsToUpdate = getViewsToUpdate(this.__views, sameLevel + 1);\n        for (let i = 0; i < viewsToUpdate.length; i++) {\n            const vtp = viewsToUpdate[i];\n            const shouldUpdated = await (vtp.vn.component._shouldUpdateView(this.__info, newRouteInfo));\n            // console.log(asyncKey, this.__asyncKey);\n            if (asyncKey !== this.__asyncKey) {\n                /**\n                 * 由于异步等待的过程中，路由有可能会再次发生变化，\n                 * 通过闭包变量的方式，保证上下文逻辑响应同一次的路由变化。\n                 */\n                return;\n            }\n            if (shouldUpdated === false) {\n                /**\n                 * 由于浏览器并不能截获 url 变化，只能是在 url 已经变化后响应。\n                 * 因此，如果业务层（通过 __routeShouldLeave 回调）阻止了路由的变化，\n                 * 则需要恢复浏览器 url 。\n                 */\n                const _search = encodeParamsOrQuery(this.__info.query);\n                const _url = this.__info._pathname + (_search ? '?' + _search : '');\n                history.replaceState(null, '', (this.__mode === 'hash' ? '#' : '') + _url);\n                return;\n            }\n            else {\n                (_a = vtp.vn.__views) === null || _a === void 0 ? void 0 : _a.clear();\n            }\n        }\n        /**\n         * 通知即将变更的路由 onLeave 回调。当前版本只会通知最顶部的路由。\n         * 未来版本要考虑可能子路由也应该通知？\n         */\n        if (this.__info._routePath.length > sameLevel + 1) {\n            const beforeEachGuardFns = this.__guard.before;\n            for (let i = 0; i < beforeEachGuardFns.length; i++) {\n                const shouldLeave = await beforeEachGuardFns[i](this.__info, newRouteInfo);\n                if (shouldLeave === false || this.__asyncKey !== asyncKey) {\n                    return;\n                }\n            }\n            const routeDef = this.__info._routePath[sameLevel + 1].route.define;\n            if (isFunction(routeDef.onLeave)) {\n                const shouldLeave = await routeDef.onLeave(this.__info, newRouteInfo);\n                if (shouldLeave === false || this.__asyncKey !== asyncKey) {\n                    return;\n                }\n            }\n        }\n        if (newRouteInfo._routePath.length > sameLevel + 1) {\n            const routeDef = newRouteInfo._routePath[sameLevel + 1].route.define;\n            if (isFunction(routeDef.onEnter)) {\n                await routeDef.onEnter(this.__info, newRouteInfo);\n                if (this.__asyncKey !== asyncKey) {\n                    return;\n                }\n            }\n        }\n        const afterEachGuardFns = this.__guard.after;\n        for (let i = 0; i < afterEachGuardFns.length; i++) {\n            await afterEachGuardFns[i](this.__info, newRouteInfo);\n            if (this.__asyncKey !== asyncKey) {\n                return;\n            }\n        }\n        Object.assign(this.__info, newRouteInfo);\n        this.__notify('change');\n        viewsToUpdate.forEach(vtp => {\n            vtp.vn.component._updateView(newRouteInfo, newMatchPath[vtp.lv], asyncKey).catch(err => this._onErr(err));\n        });\n    }\n    /**\n     * current location url path parameters\n     */\n    get params() {\n        var _a;\n        return (_a = this.__info) === null || _a === void 0 ? void 0 : _a.params;\n    }\n    /**\n     * current location url query/search\n     */\n    get query() {\n        var _a;\n        return (_a = this.__info) === null || _a === void 0 ? void 0 : _a.query;\n    }\n    /**\n     * current matched route\n     */\n    get current() {\n        var _a;\n        const rp = (_a = this.__info) === null || _a === void 0 ? void 0 : _a._routePath;\n        if (!rp || rp.length === 0)\n            return null;\n        return rp[rp.length - 1];\n    }\n    includes(destination, checkQuery = false) {\n        if (!this.__info || this.__info._routePath.length === 0)\n            return false;\n        if (isString(destination)) {\n            destination = { name: destination };\n        }\n        const name = destination.name;\n        const route = this.__map.get(name);\n        if (!route) {\n            return false;\n        }\n        if (checkQuery && destination.query && !isParamsOrQuerySame(destination.query, this.__info.query)) {\n            return false;\n        }\n        return this.__info._routePath.findIndex(it => {\n            return it.route === route && isParamsOrQuerySame(it.params || {}, destination.params || {});\n        }) >= 0;\n    }\n    href(destination) {\n        const pathAndSearch = getPathnameAndSearch(destination, this.__map, this.__base);\n        if (!pathAndSearch) {\n            return null;\n        }\n        const { pathname, search } = pathAndSearch;\n        const path = search ? pathname + '?' + search : pathname;\n        return this.__mode === 'hash' ? '#' + path : path;\n    }\n    go(destination, { target = '_self', replace = false } = {\n        target: '_self', replace: false\n    }) {\n        const pathAndSearch = getPathnameAndSearch(destination, this.__map, this.__base);\n        if (!pathAndSearch) {\n            return;\n        }\n        const { pathname, search } = pathAndSearch;\n        const path = search ? pathname + '?' + search : pathname;\n        const isHashMode = this.__mode === 'hash';\n        const url = isHashMode ? (location.pathname + '#' + path) : path;\n        if (target === '_blank') {\n            window.open(url, '_blank');\n            return;\n        }\n        if (replace) {\n            history.replaceState(null, '', url);\n        }\n        else {\n            history.pushState(null, '', url);\n        }\n        this._update(pathname, destination.query);\n    }\n}\n//# sourceMappingURL=router.js.map","import { __ as ___792732ac1261, createElement as createElement_792732ac1261, createTextNode as createTextNode_792732ac1261, setText as setText_792732ac1261, $$ as $$_792732ac1261, setAttribute as setAttribute_792732ac1261, attrs as attrs_792732ac1261, emptyRenderFn as emptyRenderFn_792732ac1261, ParameterComponent as ParameterComponent_792732ac1261, assertRenderResults as assertRenderResults_792732ac1261 } from 'jinge';\nimport {\n  $$ as __$$_792732ac1261\n} from 'jinge';import { Component, setAttribute, removeEvent, addEvent, __, isObject, watch, unwatch } from 'jinge';\nimport { isParamsOrQuerySame } from '../common';\nexport class RouterLinkComponent extends Component {\n    constructor(attrs) {\n      var _a;\n      super(attrs);\n      const __vm_792732ac1261 = this[__$$_792732ac1261].proxy;\n      const fn_2_792732ac1261 = () => {\n        __vm_792732ac1261.to = attrs.to;\n      };\n      fn_2_792732ac1261();\n      attrs[__$$_792732ac1261].__watch('to', fn_2_792732ac1261);\n      const fn_3_792732ac1261 = () => {\n        __vm_792732ac1261.text = attrs.text || '';\n      };\n      fn_3_792732ac1261();\n      attrs[__$$_792732ac1261].__watch('text', fn_3_792732ac1261);\n      const fn_4_792732ac1261 = () => {\n        __vm_792732ac1261.target = attrs.target || '_self';\n      };\n      fn_4_792732ac1261();\n      attrs[__$$_792732ac1261].__watch('target', fn_4_792732ac1261);\n      const fn_5_792732ac1261 = () => {\n        __vm_792732ac1261.replace = !!attrs.replace;\n      };\n      fn_5_792732ac1261();\n      attrs[__$$_792732ac1261].__watch('replace', fn_5_792732ac1261);\n      const fn_6_792732ac1261 = () => {\n        __vm_792732ac1261.className = attrs.class;\n      };\n      fn_6_792732ac1261();\n      attrs[__$$_792732ac1261].__watch('class', fn_6_792732ac1261);\n      const fn_7_792732ac1261 = () => {\n        __vm_792732ac1261.style = attrs.style;\n      };\n      fn_7_792732ac1261();\n      attrs[__$$_792732ac1261].__watch('style', fn_7_792732ac1261);\n      const fn_8_792732ac1261 = () => {\n        __vm_792732ac1261.active = attrs.active;\n      };\n      fn_8_792732ac1261();\n      attrs[__$$_792732ac1261].__watch('active', fn_8_792732ac1261);\n      __vm_792732ac1261._router = __vm_792732ac1261.__getContext('router');\n      if (!__vm_792732ac1261._router) {\n        throw new Error('Context named \"router\" not found.');\n      }\n      __vm_792732ac1261._tag = ((_a = attrs[__].slots) === null || _a === void 0 ? void 0 : _a.default) ? 0 : -1;\n      __vm_792732ac1261._el = null;\n      __vm_792732ac1261._dereg = null;\n      __vm_792732ac1261._queryWatched = false;\n      __vm_792732ac1261._clickHandler = __vm_792732ac1261._onClick.bind(__vm_792732ac1261);\n      __vm_792732ac1261._routerChangedHandler = __vm_792732ac1261._onRouterChanged.bind(__vm_792732ac1261);\n    }\n    static get template() {\n        return function(component) {\n          const vm_0 = component;\n          return [\n          ...(() => {\n            const __ac = vm_0[___792732ac1261].slots;\n            const renderFn = __ac && __ac['default'] ? __ac['default'] :   function(component) {\n              return [\n              (() => {\n                const el = createElement_792732ac1261(\n                  \"a\",\n                  component[___792732ac1261].compStyle,\n                  (() => {\n                    const el = createTextNode_792732ac1261();\n                    const fn_0 = () => {\n                      setText_792732ac1261(el, vm_0.text);\n                    };\n                    fn_0();\n                    vm_0[$$_792732ac1261].__watch([\"text\"], fn_0, component[$$_792732ac1261]);\n                    return el;\n                  })()\n                );\n                const fn_0 = () => {\n                  setAttribute_792732ac1261(el, \"class\", !vm_0.className && !(vm_0.isActive && vm_0.active) ? vm_0._udef : (vm_0.className || '') + (vm_0.isActive && vm_0.active ? (vm_0.className ? ' ' : '') + vm_0.active : ''));\n                };\n                fn_0();\n                vm_0[$$_792732ac1261].__watch([\"className\"], fn_0, component[$$_792732ac1261]);\n                vm_0[$$_792732ac1261].__watch([\"isActive\"], fn_0, component[$$_792732ac1261]);\n                vm_0[$$_792732ac1261].__watch([\"active\"], fn_0, component[$$_792732ac1261]);\n                const fn_1 = () => {\n                  setAttribute_792732ac1261(el, \"style\", vm_0.style);\n                };\n                fn_1();\n                vm_0[$$_792732ac1261].__watch([\"style\"], fn_1, component[$$_792732ac1261]);\n                component[___792732ac1261].rootNodes.push(el);\n                return el;\n              })()\n              ];\n            };\n            const attrs = attrs_792732ac1261({\n              [___792732ac1261]: {\n                compStyle: component[___792732ac1261].compStyle ? { ...component[___792732ac1261].compStyle } : null,\n                context: component[___792732ac1261].context,\n                slots: {\n                  default: renderFn || emptyRenderFn_792732ac1261\n                }\n              }\n            });\n            const el = new ParameterComponent_792732ac1261(attrs, []);\n            component[___792732ac1261].rootNodes.push(el);\n            return assertRenderResults_792732ac1261(el.__render());\n          })()\n          ];\n        };\n    }\n    _onRouterChanged() {\n        this._updateActive();\n    }\n    get target() {\n        return this._target;\n    }\n    set target(v) {\n        if (this._target === v)\n            return;\n        this._target = v;\n        this._updateTarget();\n    }\n    get active() {\n        return this._active;\n    }\n    set active(v) {\n        if (this._active === v)\n            return;\n        if (this._tag >= 0 && this._active && this._el) {\n            this._el.classList.remove(this._active); // remove previous active class\n        }\n        this._active = v;\n        this.__updateIfNeed(this._updateActive);\n    }\n    get to() {\n        return this._to;\n    }\n    set to(v) {\n        if (this._to === v)\n            return;\n        this._to = v;\n        this.__updateIfNeed(this._updateHrefAndActive);\n    }\n    _onClick(e) {\n        if (e.defaultPrevented || e.metaKey || e.ctrlKey) {\n            return;\n        }\n        if (this._tag <= 0) {\n            e.preventDefault(); // prevent default <a> jump\n        }\n        this._router.go(this._to, {\n            target: this.target,\n            replace: this.replace\n        });\n    }\n    __afterRender() {\n        const el = this.__firstDOM;\n        if (this._tag >= 0) {\n            this._tag = el.tagName === 'A' ? 0 : 1;\n        }\n        this._el = el;\n        this._updateTarget();\n        this._updateHrefAndActive();\n        this._router.__on('change', this._routerChangedHandler);\n        addEvent(el, 'click', this._clickHandler);\n    }\n    __beforeDestroy() {\n        removeEvent(this._el, 'click', this._clickHandler);\n        this._router.__off('change', this._routerChangedHandler);\n        if (this._queryWatched) {\n            unwatch(this._router.__info, 'query.*', this._routerChangedHandler);\n        }\n    }\n    _updateTarget() {\n        if (this._tag <= 0) {\n            setAttribute(this._el, 'target', this.target);\n        }\n    }\n    _updateHrefAndActive() {\n        this._updateHref();\n        this._updateActive();\n    }\n    _updateHref() {\n        if (this._tag <= 0) {\n            let href;\n            if (!this._to || !(href = this._router.href(this._to))) {\n                this._el.removeAttribute('href');\n            }\n            else {\n                setAttribute(this._el, 'href', href);\n            }\n        }\n    }\n    _updateActive() {\n        var _a;\n        let isActive = this._to && this._router.includes(this._to);\n        if (isActive && isObject(this._to) && this._to.query) {\n            if (!this._queryWatched) {\n                watch(this._router.__info, 'query.*', this._routerChangedHandler);\n                this._queryWatched = true;\n            }\n            isActive = isParamsOrQuerySame(this._to.query, (_a = this._router.__info) === null || _a === void 0 ? void 0 : _a.query);\n        }\n        else if (this._queryWatched) {\n            this._queryWatched = false;\n            unwatch(this._router.__info, 'query.*', this._routerChangedHandler);\n        }\n        if (this.isActive === isActive) {\n            return;\n        }\n        this.isActive = isActive;\n        if (!this._active || this._tag < 0) {\n            return;\n        }\n        if (this.isActive) {\n            this._el.classList.add(this._active);\n        }\n        else {\n            this._el.classList.remove(this._active);\n        }\n    }\n}\n//# sourceMappingURL=link.js.map","import {\n  $$ as __$$_792732ac1261\n} from 'jinge';import { Component } from 'jinge';\nimport { Router } from '../router';\nexport class RouterComponent extends Component {\n    constructor(attrs) {\n      let router;\n      if (attrs.router instanceof Router) {\n        router = attrs.router;\n      } else if (attrs.router === 'hash') {\n        router = new Router({ mode: 'hash' });\n      } else {\n        router = new Router({ mode: 'html5' });\n      }\n      if (attrs.routes) {\n        attrs.routes.forEach(rd => {\n          router.register(rd);\n        });\n      }\n      super(attrs);\n      const __vm_792732ac1261 = this[__$$_792732ac1261].proxy;\n      __vm_792732ac1261._router = router;\n      const fn_5_792732ac1261 = () => {\n        __vm_792732ac1261.baseHref = attrs.baseHref || '/';\n      };\n      fn_5_792732ac1261();\n      attrs[__$$_792732ac1261].__watch('baseHref', fn_5_792732ac1261);\n      __vm_792732ac1261.__setContext('router', router);\n      __vm_792732ac1261.__notify('load', __vm_792732ac1261._router);\n    }\n    get baseHref() {\n        return this._router.baseHref;\n    }\n    set baseHref(v) {\n        this._router.baseHref = v;\n    }\n    __afterRender() {\n        this._router.start();\n    }\n}\n//# sourceMappingURL=router.js.map","import {  createElement as createElement_792732ac1261, __ as ___792732ac1261, attrs as attrs_792732ac1261, createElementWithoutAttrs as createElementWithoutAttrs_792732ac1261, $$ as $$_792732ac1261, addEvent as addEvent_792732ac1261, assertRenderResults as assertRenderResults_792732ac1261, vm as vm_792732ac1261, createTextNode as createTextNode_792732ac1261, setText as setText_792732ac1261 } from 'jinge';\nimport { RouterComponent as RouterComponent_4dc9538ef393_d7ad23745c32, RouterLinkComponent as RouterLinkComponent_4dc9538ef393_d7ad23745c32, RouterViewComponent as RouterViewComponent_4dc9538ef393_d7ad23745c32 } from 'jinge-router';\nexport default function(component) {\n  const vm_0 = component;\n  return [\n  (() => {\n    const el = createElement_792732ac1261(\n      \"h2\",\n      component[___792732ac1261].compStyle,\n      \"Jinge Router\"\n    );\n    component[___792732ac1261].rootNodes.push(el);\n    return el;\n  })(),\n  ...(() => {\n    const attrs = attrs_792732ac1261({\n      [___792732ac1261]: {\n        compStyle: component[___792732ac1261].compStyle ? { ...component[___792732ac1261].compStyle } : null,\n        context: component[___792732ac1261].context,\n        slots: {\n          'default': function(component) {\n        return [\n        (() => {\n          const el = createElement_792732ac1261(\n            \"div\",\n            component[___792732ac1261].compStyle,\n            createElement_792732ac1261(\n              \"div\",\n              {\n                style: \"border-bottom: 1px solid blue; margin-bottom: 10px;\"\n              },\n              createElementWithoutAttrs_792732ac1261(\n                \"h3\",\n                \"Top Menu Area\"\n              ),\n              createElementWithoutAttrs_792732ac1261(\n                \"p\",\n                createElementWithoutAttrs_792732ac1261(\n                  \"label\",\n                  \"Open new tab:\"\n                ),\n                (() => {\n                  const el = createElement_792732ac1261(\n                    \"input\",\n                    {\n                      type: \"checkbox\"\n                    },\n                  );\n                  const fn_0 = () => {\n                    el.checked = !!(vm_0.newTab);\n                  };\n                  fn_0();\n                  vm_0[$$_792732ac1261].__watch([\"newTab\"], fn_0, component[$$_792732ac1261]);\n                  addEvent_792732ac1261(el, 'change', function(...args) {vm_0.newTab = args[0].target.checked})\n                  return el;\n                })()\n              ),\n              createElementWithoutAttrs_792732ac1261(\n                \"p\",\n                ...(() => {\n                  const attrs = attrs_792732ac1261({\n                    [___792732ac1261]: {\n                      context: component[___792732ac1261].context,\n                    },\n                    target: null,\n                    class: \"xx\",\n                    style: \"margin-right: 8px;\",\n                    text: \"Hello\",\n                    to: \"/hello\",\n                    active: \"active\"\n                  });\n                  const fn_0 = () => {\n                    attrs.target = vm_0.newTab ? '_black' : '_self';\n                  };\n                  fn_0();\n                  vm_0[$$_792732ac1261].__watch([\"newTab\"], fn_0, component[$$_792732ac1261]);\n                  const el = RouterLinkComponent_4dc9538ef393_d7ad23745c32.create(attrs);\n                  component[___792732ac1261].nonRootCompNodes.push(el);\n                  return assertRenderResults_792732ac1261(el.__render());\n                })(),\n                ...(() => {\n                  const attrs = attrs_792732ac1261({\n                    [___792732ac1261]: {\n                      context: component[___792732ac1261].context,\n                      slots: {\n                        'default': function(component) {\n                      return [\n                      (() => {\n                        const el = createElement_792732ac1261(\n                          \"a\",\n                          Object.assign({\n                            style: \"margin: 20px;\"\n                          }, component[___792732ac1261].compStyle),\n                          \"About\"\n                        );\n                        component[___792732ac1261].rootNodes.push(el);\n                        return el;\n                      })()\n                      ];\n                    }\n                    }\n                    },\n                    target: null,\n                    to: \"/about\",\n                    active: \"active\"\n                  });\n                  const fn_0 = () => {\n                    attrs.target = vm_0.newTab ? '_blank' : '_self';\n                  };\n                  fn_0();\n                  vm_0[$$_792732ac1261].__watch([\"newTab\"], fn_0, component[$$_792732ac1261]);\n                  const el = RouterLinkComponent_4dc9538ef393_d7ad23745c32.create(attrs);\n                  component[___792732ac1261].nonRootCompNodes.push(el);\n                  return assertRenderResults_792732ac1261(el.__render());\n                })(),\n                ...(() => {\n                  const attrs = attrs_792732ac1261({\n                    [___792732ac1261]: {\n                      context: component[___792732ac1261].context,\n                      slots: {\n                        'default': function(component) {\n                      return [\n                      (() => {\n                        const el = createElement_792732ac1261(\n                          \"button\",\n                          component[___792732ac1261].compStyle,\n                          \"People\"\n                        );\n                        component[___792732ac1261].rootNodes.push(el);\n                        return el;\n                      })()\n                      ];\n                    }\n                    }\n                    },\n                    target: null,\n                    to: \"/people\",\n                    active: \"active\"\n                  });\n                  const fn_0 = () => {\n                    attrs.target = vm_0.newTab ? '_blank' : '_self';\n                  };\n                  fn_0();\n                  vm_0[$$_792732ac1261].__watch([\"newTab\"], fn_0, component[$$_792732ac1261]);\n                  const el = RouterLinkComponent_4dc9538ef393_d7ad23745c32.create(attrs);\n                  component[___792732ac1261].nonRootCompNodes.push(el);\n                  return assertRenderResults_792732ac1261(el.__render());\n                })(),\n                ...(() => {\n                  const attrs = attrs_792732ac1261({\n                    [___792732ac1261]: {\n                      context: component[___792732ac1261].context,\n                    },\n                    to: null,\n                    style: \"margin-left: 8px;\",\n                    text: \"Person-2\",\n                    active: \"active\"\n                  });\n                  const fn_0 = () => {\n                    attrs.to = vm_792732ac1261({\n                      name: 'person',\n                      params: { personId: '002' }\n                  });\n                  };\n                  fn_0();\n                  const el = RouterLinkComponent_4dc9538ef393_d7ad23745c32.create(attrs);\n                  component[___792732ac1261].nonRootCompNodes.push(el);\n                  return assertRenderResults_792732ac1261(el.__render());\n                })(),\n                createElement_792732ac1261(\n                  \"a\",\n                  {\n                    style: \"margin-left: 20px;\",\n                    href: \"#/about\"\n                  },\n                  \"test\"\n                ),\n                ...(() => {\n                  const attrs = attrs_792732ac1261({\n                    [___792732ac1261]: {\n                      context: component[___792732ac1261].context,\n                    },\n                    to: \"/dynamic\",\n                    text: \"Dynamic Import\"\n                  });\n                  const el = RouterLinkComponent_4dc9538ef393_d7ad23745c32.create(attrs);\n                  component[___792732ac1261].nonRootCompNodes.push(el);\n                  return assertRenderResults_792732ac1261(el.__render());\n                })()\n              )\n            ),\n            createElementWithoutAttrs_792732ac1261(\n              \"div\",\n              createElementWithoutAttrs_792732ac1261(\n                \"h3\",\n                \"Content Area\"\n              ),\n              createElement_792732ac1261(\n                \"div\",\n                {\n                  class: \"content\"\n                },\n                ...(() => {\n                  const attrs = attrs_792732ac1261({\n                    [___792732ac1261]: {\n                      context: component[___792732ac1261].context,\n                      slots: {\n                        'default': function(component) {\n                      return [\n                      (() => {\n                        const el = createElement_792732ac1261(\n                          \"div\",\n                          component[___792732ac1261].compStyle,\n                          \"loading...\"\n                        );\n                        component[___792732ac1261].rootNodes.push(el);\n                        return el;\n                      })()\n                      ];\n                    },\n                        'error': function(component) {\n                      const vm_1 = component;\n                      return [\n                      (() => {\n                        const el = createElement_792732ac1261(\n                          \"div\",\n                          component[___792732ac1261].compStyle,\n                          createElementWithoutAttrs_792732ac1261(\n                            \"p\",\n                            \"Failed to load!\"\n                          ),\n                          createElementWithoutAttrs_792732ac1261(\n                            \"p\",\n                            (() => {\n                              const el = createTextNode_792732ac1261();\n                              const fn_0 = () => {\n                                setText_792732ac1261(el, vm_1.error);\n                              };\n                              fn_0();\n                              vm_1[$$_792732ac1261].__watch([\"error\"], fn_0, component[$$_792732ac1261]);\n                              return el;\n                            })()\n                          )\n                        );\n                        component[___792732ac1261].rootNodes.push(el);\n                        return el;\n                      })()\n                      ];\n                    }\n                    }\n                    },\n                  });\n                  const el = RouterViewComponent_4dc9538ef393_d7ad23745c32.create(attrs);\n                  component[___792732ac1261].nonRootCompNodes.push(el);\n                  return assertRenderResults_792732ac1261(el.__render());\n                })()\n              ),\n              createElement_792732ac1261(\n                \"div\",\n                {\n                  class: \"footer\"\n                },\n                ...(() => {\n                  const attrs = attrs_792732ac1261({\n                    [___792732ac1261]: {\n                      context: component[___792732ac1261].context,\n                    },\n                    name: \"footer\"\n                  });\n                  const el = RouterViewComponent_4dc9538ef393_d7ad23745c32.create(attrs);\n                  component[___792732ac1261].nonRootCompNodes.push(el);\n                  return assertRenderResults_792732ac1261(el.__render());\n                })()\n              )\n            )\n          );\n          component[___792732ac1261].rootNodes.push(el);\n          return el;\n        })()\n        ];\n      }\n      }\n      },\n      routes: null,\n      router: \"hash\"\n    });\n    const fn_0 = () => {\n      attrs.routes = vm_0._routes;\n    };\n    fn_0();\n    const el = RouterComponent_4dc9538ef393_d7ad23745c32.create(attrs);\n    component[___792732ac1261].rootNodes.push(el);\n    return assertRenderResults_792732ac1261(el.__render());\n  })()\n  ];\n}","import { createElement as createElement_792732ac1261, __ as ___792732ac1261 } from 'jinge';\nimport {\n  Component\n} from 'jinge';\n\nexport default class FooterA extends Component {\n  static get template() {\n    return function(component) {\n      const vm_0 = component;\n      return [\n      (() => {\n        const el = createElement_792732ac1261(\n          \"p\",\n          component[___792732ac1261].compStyle,\n          \"Footer-A\"\n        );\n        component[___792732ac1261].rootNodes.push(el);\n        return el;\n      })()\n      ];\n    };\n  }\n}","import { createElement as createElement_792732ac1261, __ as ___792732ac1261 } from 'jinge';\nimport {\n  Component\n} from 'jinge';\n\nexport default class FooterB extends Component {\n  static get template() {\n    return function(component) {\n      const vm_0 = component;\n      return [\n      (() => {\n        const el = createElement_792732ac1261(\n          \"p\",\n          component[___792732ac1261].compStyle,\n          \"Footer-B\"\n        );\n        component[___792732ac1261].rootNodes.push(el);\n        return el;\n      })()\n      ];\n    };\n  }\n}","import { createElement as createElement_792732ac1261, __ as ___792732ac1261 } from 'jinge';\nimport {\n  Component\n} from 'jinge';\n\nexport default class HelloB extends Component {\n  static get template() {\n    return function(component) {\n      const vm_0 = component;\n      return [\n      (() => {\n        const el = createElement_792732ac1261(\n          \"p\",\n          component[___792732ac1261].compStyle,\n          \"Hello-B\"\n        );\n        component[___792732ac1261].rootNodes.push(el);\n        return el;\n      })()\n      ];\n    };\n  }\n}","import { createElement as createElement_792732ac1261, __ as ___792732ac1261, createTextNode as createTextNode_792732ac1261, setText as setText_792732ac1261, $$ as $$_792732ac1261 } from 'jinge';\nimport {\n  $$ as __$$_792732ac1261\n} from 'jinge';import {\n  Component, watch, unwatch\n} from 'jinge';\n\nexport default class HelloA extends Component {\n  static get template() {\n    return function(component) {\n      const vm_0 = component;\n      return [\n      (() => {\n        const el = createElement_792732ac1261(\n          \"p\",\n          component[___792732ac1261].compStyle,\n          \"Hello-A\"\n        );\n        component[___792732ac1261].rootNodes.push(el);\n        return el;\n      })(),\n      (() => {\n        const el = createElement_792732ac1261(\n          \"p\",\n          component[___792732ac1261].compStyle,\n          \"Query: a=\",\n          (() => {\n            const el = createTextNode_792732ac1261();\n            const fn_0 = () => {\n              setText_792732ac1261(el, vm_0.qa);\n            };\n            fn_0();\n            vm_0[$$_792732ac1261].__watch([\"qa\"], fn_0, component[$$_792732ac1261]);\n            return el;\n          })()\n        );\n        component[___792732ac1261].rootNodes.push(el);\n        return el;\n      })()\n      ];\n    };\n  }\n\n  constructor(attrs) {\n    super(attrs);\n    const __vm_792732ac1261 = this[__$$_792732ac1261].proxy;\n    __vm_792732ac1261._oqc = __vm_792732ac1261._onQueryChange.bind(__vm_792732ac1261);\n    __vm_792732ac1261._query = __vm_792732ac1261.__getContext('router').query;\n    watch(__vm_792732ac1261._query, '*', __vm_792732ac1261._oqc);\n    __vm_792732ac1261._onQueryChange();\n  }\n  __beforeDestroy() {\n    unwatch(this._query, '*', this._oqc);\n  }\n  _onQueryChange() {\n    this.qa = this._query.a;\n  }\n}","import { createElement as createElement_792732ac1261, __ as ___792732ac1261 } from 'jinge';\nimport {\n  Component\n} from 'jinge';\n\nexport default class About extends Component {\n  static get template() {\n    return function(component) {\n      const vm_0 = component;\n      return [\n      (() => {\n        const el = createElement_792732ac1261(\n          \"h4\",\n          component[___792732ac1261].compStyle,\n          \"About\"\n        );\n        component[___792732ac1261].rootNodes.push(el);\n        return el;\n      })(),\n      (() => {\n        const el = createElement_792732ac1261(\n          \"p\",\n          component[___792732ac1261].compStyle,\n          \"jinge is a Messenger, Proxy and Compiler based MVVM framework\"\n        );\n        component[___792732ac1261].rootNodes.push(el);\n        return el;\n      })()\n      ];\n    };\n  }\n\n\n}","import {  createElement as createElement_792732ac1261, __ as ___792732ac1261, attrs as attrs_792732ac1261, vm as vm_792732ac1261, assertRenderResults as assertRenderResults_792732ac1261 } from 'jinge';\nimport { RouterLinkComponent as RouterLinkComponent_4dc9538ef393_d7ad23745c32, RouterViewComponent as RouterViewComponent_4dc9538ef393_d7ad23745c32 } from 'jinge-router';\nexport default function(component) {\n  const vm_0 = component;\n  return [\n  (() => {\n    const el = createElement_792732ac1261(\n      \"h4\",\n      component[___792732ac1261].compStyle,\n      \"Hello\"\n    );\n    component[___792732ac1261].rootNodes.push(el);\n    return el;\n  })(),\n  (() => {\n    const el = createElement_792732ac1261(\n      \"p\",\n      component[___792732ac1261].compStyle,\n      \"This is hello content.\"\n    );\n    component[___792732ac1261].rootNodes.push(el);\n    return el;\n  })(),\n  (() => {\n    const el = createElement_792732ac1261(\n      \"div\",\n      component[___792732ac1261].compStyle,\n      ...(() => {\n        const attrs = attrs_792732ac1261({\n          [___792732ac1261]: {\n            context: component[___792732ac1261].context,\n          },\n          to: null,\n          text: \"hello-1\",\n          active: \"active\"\n        });\n        const fn_0 = () => {\n          attrs.to = vm_792732ac1261({\n            name: 'hello-1',\n            query: { a: 10 }\n        });\n        };\n        fn_0();\n        const el = RouterLinkComponent_4dc9538ef393_d7ad23745c32.create(attrs);\n        component[___792732ac1261].nonRootCompNodes.push(el);\n        return assertRenderResults_792732ac1261(el.__render());\n      })(),\n      ...(() => {\n        const attrs = attrs_792732ac1261({\n          [___792732ac1261]: {\n            context: component[___792732ac1261].context,\n          },\n          to: null,\n          text: \"hello-1-q\",\n          active: \"active\"\n        });\n        const fn_0 = () => {\n          attrs.to = vm_792732ac1261({\n            name: 'hello-1',\n            query: { a: 30 }\n        });\n        };\n        fn_0();\n        const el = RouterLinkComponent_4dc9538ef393_d7ad23745c32.create(attrs);\n        component[___792732ac1261].nonRootCompNodes.push(el);\n        return assertRenderResults_792732ac1261(el.__render());\n      })(),\n      ...(() => {\n        const attrs = attrs_792732ac1261({\n          [___792732ac1261]: {\n            context: component[___792732ac1261].context,\n          },\n          to: null,\n          text: \"hello-2\",\n          active: \"active\"\n        });\n        const fn_0 = () => {\n          attrs.to = vm_792732ac1261({\n            name: 'hello-2',\n            query: { b: 20 }\n        });\n        };\n        fn_0();\n        const el = RouterLinkComponent_4dc9538ef393_d7ad23745c32.create(attrs);\n        component[___792732ac1261].nonRootCompNodes.push(el);\n        return assertRenderResults_792732ac1261(el.__render());\n      })()\n    );\n    component[___792732ac1261].rootNodes.push(el);\n    return el;\n  })(),\n  ...(() => {\n    const attrs = attrs_792732ac1261({\n      [___792732ac1261]: {\n        compStyle: component[___792732ac1261].compStyle ? { ...component[___792732ac1261].compStyle } : null,\n        context: component[___792732ac1261].context,\n      },\n    });\n    const el = RouterViewComponent_4dc9538ef393_d7ad23745c32.create(attrs);\n    component[___792732ac1261].rootNodes.push(el);\n    return assertRenderResults_792732ac1261(el.__render());\n  })()\n  ];\n}","import {\n  Component\n} from 'jinge';\nimport _tpl from './hello.html';\n\nexport default class Hello extends Component {\n  static get template() {\n    return _tpl;\n  }\n  __routeShouldLeave() {\n    return confirm('确认要退出？');\n  }\n  __beforeDestroy() {\n    console.log('Hello component will be destroy');\n  }\n}","import { createElement as createElement_792732ac1261, __ as ___792732ac1261, createElementWithoutAttrs as createElementWithoutAttrs_792732ac1261, attrs as attrs_792732ac1261, $$ as $$_792732ac1261, vm as vm_792732ac1261, assertRenderResults as assertRenderResults_792732ac1261, textRenderFn as textRenderFn_792732ac1261 } from 'jinge';\nimport {\n  $$ as __$$_792732ac1261\n} from 'jinge';\nimport { ForComponent as ForComponent_19c1b8dc4402_d7ad23745c32 } from 'jinge';\nimport { RouterLinkComponent as RouterLinkComponent_4dc9538ef393_d7ad23745c32, RouterViewComponent as RouterViewComponent_4dc9538ef393_d7ad23745c32 } from 'jinge-router';import {\n  Component\n} from 'jinge';\n\nexport default class People extends Component {\n  constructor(attrs) {\n    super(attrs);\n    const __vm_792732ac1261 = this[__$$_792732ac1261].proxy;\n    __vm_792732ac1261._people = attrs.people;\n  }\n  static get template() {\n    return function(component) {\n      const vm_0 = component;\n      return [\n      (() => {\n        const el = createElement_792732ac1261(\n          \"div\",\n          Object.assign({\n            style: \"display:flex;flex-direction:row;\"\n          }, component[___792732ac1261].compStyle),\n          createElement_792732ac1261(\n            \"div\",\n            {\n              style: \"margin-right: 20px;\"\n            },\n            createElementWithoutAttrs_792732ac1261(\n              \"h4\",\n              \"Some People:\"\n            ),\n            createElementWithoutAttrs_792732ac1261(\n              \"ul\",\n              ...(() => {\n                const attrs = attrs_792732ac1261({\n                  [___792732ac1261]: {\n                    context: component[___792732ac1261].context,\n                    slots: {\n                      'default': function(component) {\n                    const vm_1 = component;\n                    return [\n                    (() => {\n                      const el = createElement_792732ac1261(\n                        \"li\",\n                        component[___792732ac1261].compStyle,\n                        ...(() => {\n                          const attrs = attrs_792732ac1261({\n                            [___792732ac1261]: {\n                              context: component[___792732ac1261].context,\n                            },\n                            text: null,\n                            to: null,\n                            active: \"active\"\n                          });\n                          const fn_0 = () => {\n                            attrs.text = function () {\n                              let _0;\n                              return (_0 = vm_1.each) === null || _0 === void 0 ? void 0 : _0.name;\n                          }();\n                          };\n                          fn_0();\n                          vm_1[$$_792732ac1261].__watch([\"each\",\"name\"], fn_0, component[$$_792732ac1261]);\n                          const fn_1 = () => {\n                            attrs.to = vm_792732ac1261({\n                              name: 'person',\n                              params: {\n                                  personId: function () {\n                                      let _0;\n                                      return (_0 = vm_1.each) === null || _0 === void 0 ? void 0 : _0.id;\n                                  }()\n                              }\n                          });\n                          };\n                          fn_1();\n                          vm_1[$$_792732ac1261].__watch([\"each\",\"id\"], fn_1, component[$$_792732ac1261]);\n                          const el = RouterLinkComponent_4dc9538ef393_d7ad23745c32.create(attrs);\n                          component[___792732ac1261].nonRootCompNodes.push(el);\n                          return assertRenderResults_792732ac1261(el.__render());\n                        })()\n                      );\n                      component[___792732ac1261].rootNodes.push(el);\n                      return el;\n                    })()\n                    ];\n                  }\n                  }\n                  },\n                  loop: null,\n                  key: \"each.id\"\n                });\n                const fn_0 = () => {\n                  attrs.loop = vm_0._people;\n                };\n                fn_0();\n                const el = ForComponent_19c1b8dc4402_d7ad23745c32.create(attrs);\n                component[___792732ac1261].nonRootCompNodes.push(el);\n                return assertRenderResults_792732ac1261(el.__render());\n              })()\n            )\n          ),\n          createElementWithoutAttrs_792732ac1261(\n            \"div\",\n            ...(() => {\n              const attrs = attrs_792732ac1261({\n                [___792732ac1261]: {\n                  context: component[___792732ac1261].context,\n                  slots: {\n                    'default': function(component) {\n                  return [\n                  textRenderFn_792732ac1261(component, \"loading...\")\n                  ];\n                }\n                }\n                },\n              });\n              const el = RouterViewComponent_4dc9538ef393_d7ad23745c32.create(attrs);\n              component[___792732ac1261].nonRootCompNodes.push(el);\n              return assertRenderResults_792732ac1261(el.__render());\n            })()\n          )\n        );\n        component[___792732ac1261].rootNodes.push(el);\n        return el;\n      })()\n      ];\n    }\n  }\n}","import { createElement as createElement_792732ac1261, __ as ___792732ac1261, createElementWithoutAttrs as createElementWithoutAttrs_792732ac1261, createTextNode as createTextNode_792732ac1261, setText as setText_792732ac1261, attrs as attrs_792732ac1261, assertRenderResults as assertRenderResults_792732ac1261 } from 'jinge';\nimport {\n  $$ as __$$_792732ac1261\n} from 'jinge';\nimport { RouterLinkComponent as RouterLinkComponent_4dc9538ef393_d7ad23745c32 } from 'jinge-router';import {\n  Component\n} from 'jinge';\n\nexport default class Person extends Component {\n  static get template() {\n    return function(component) {\n      const vm_0 = component;\n      return [\n      (() => {\n        const el = createElement_792732ac1261(\n          \"div\",\n          component[___792732ac1261].compStyle,\n          createElementWithoutAttrs_792732ac1261(\n            \"h4\",\n            \"A person!\"\n          ),\n          createElementWithoutAttrs_792732ac1261(\n            \"div\",\n            \"Name: \",\n            (() => {\n              const el = createTextNode_792732ac1261();\n              const fn_0 = () => {\n                setText_792732ac1261(el, function () {\n                  let _0;\n                  return (_0 = vm_0._person) === null || _0 === void 0 ? void 0 : _0.name;\n              }());\n              };\n              fn_0();\n              return el;\n            })()\n          ),\n          createElementWithoutAttrs_792732ac1261(\n            \"div\",\n            \"Id: \",\n            (() => {\n              const el = createTextNode_792732ac1261();\n              const fn_0 = () => {\n                setText_792732ac1261(el, function () {\n                  let _0;\n                  return (_0 = vm_0._person) === null || _0 === void 0 ? void 0 : _0.id;\n              }());\n              };\n              fn_0();\n              return el;\n            })()\n          ),\n          createElementWithoutAttrs_792732ac1261(\n            \"div\",\n            \"Company: \",\n            (() => {\n              const el = createTextNode_792732ac1261();\n              const fn_0 = () => {\n                setText_792732ac1261(el, function () {\n                  let _0;\n                  return (_0 = vm_0._person) === null || _0 === void 0 ? void 0 : _0.company;\n              }());\n              };\n              fn_0();\n              return el;\n            })()\n          ),\n          createElementWithoutAttrs_792732ac1261(\n            \"div\",\n            \"Email: \",\n            (() => {\n              const el = createTextNode_792732ac1261();\n              const fn_0 = () => {\n                setText_792732ac1261(el, function () {\n                  let _0;\n                  return (_0 = vm_0._person) === null || _0 === void 0 ? void 0 : _0.email;\n              }());\n              };\n              fn_0();\n              return el;\n            })()\n          ),\n          createElementWithoutAttrs_792732ac1261(\n            \"div\",\n            \"Address: \",\n            (() => {\n              const el = createTextNode_792732ac1261();\n              const fn_0 = () => {\n                setText_792732ac1261(el, function () {\n                  let _0;\n                  return (_0 = vm_0._person) === null || _0 === void 0 ? void 0 : _0.address;\n              }());\n              };\n              fn_0();\n              return el;\n            })()\n          ),\n          ...(() => {\n            const attrs = attrs_792732ac1261({\n              [___792732ac1261]: {\n                context: component[___792732ac1261].context,\n                slots: {\n                  'default': function(component) {\n                return [\n                (() => {\n                  const el = createElement_792732ac1261(\n                    \"button\",\n                    component[___792732ac1261].compStyle,\n                    \"Close\"\n                  );\n                  component[___792732ac1261].rootNodes.push(el);\n                  return el;\n                })()\n                ];\n              }\n              }\n              },\n              to: \"/people\"\n            });\n            const el = RouterLinkComponent_4dc9538ef393_d7ad23745c32.create(attrs);\n            component[___792732ac1261].nonRootCompNodes.push(el);\n            return assertRenderResults_792732ac1261(el.__render());\n          })()\n        );\n        component[___792732ac1261].rootNodes.push(el);\n        return el;\n      })()\n      ];\n    }\n  }\n  constructor(attrs) {\n    console.log('attrs passed from ui-router resolve:', attrs.someConst, attrs.someFn, attrs.someFnPromise);\n    super(attrs);\n    const __vm_792732ac1261 = this[__$$_792732ac1261].proxy;\n    __vm_792732ac1261._person = attrs.person;\n  }\n  __beforeDestroy() {\n    console.log(`person: ${this._person.id} will be destroy.`);\n  }\n}","import {\n  $$ as __$$_792732ac1261\n} from 'jinge';import {\n  Component,\n  bootstrap\n} from 'jinge';\n\nimport _tpl from './app.html';\n\nimport FooterA from './components/footer_a';\nimport FooterB from './components/footer_b';\nimport HelloB from './components/hello_2';\nimport HelloA from './components/hello_1';\nimport About from './components/about';\nimport Hello from './components/hello';\nimport People from './components/people';\nimport Person from './components/person';\n\nimport {\n  getAllPersons,\n  getPersonById\n} from './api';\n\nconst routes = [{\n  path: '/hello',\n  redirect: {\n    name: 'hello-1',\n    query: { a: 10 }\n  },\n  components: {\n    default: Hello,\n    footer: FooterA\n  },\n  children: [{\n    path: 'a',\n    name: 'hello-1',\n    component: HelloA\n  }, {\n    path: 'b',\n    name: 'hello-2',\n    component: HelloB\n  }]\n}, {\n  path: '/about',\n  components: {\n    default: About,\n    footer: FooterB\n  }\n}, {\n  path: '/people',\n  components: {\n    default: People,\n    footer: FooterA\n  },\n  resolves: {\n    people: () => getAllPersons().then(result => result)\n  },\n  children: [{\n    name: 'person',\n    path: '/:personId',\n    component: (params, query, resolves) => {\n      console.log('async get component:', params, query, resolves);\n      /**\n       * params: { personId: xx }\n       * query: browser location.search\n       * resolves: { people, someFn, someFnPromise, person }\n       */\n      return new Promise(res => setTimeout(() => {\n        res(Person);\n      }, 2000));\n    },\n    resolves: {\n      someConst: 32,\n      someFn: () => 'hello2',\n      someFnPromise: () => new Promise(res => setTimeout(() => res('hello3'), 1000)),\n      person: (params, query, parentResolves) => {\n        console.log('inherited resove people:', parentResolves.people);\n        const id = params.personId;\n        return getPersonById(id).then(result => result);\n      }\n    }\n  }]\n}, {\n  path: '/dynamic',\n  components: {\n    // async default() {\n    //   return import()\n    // },\n    async default() {\n      return (await import('./components/dynamic')).default;\n    },\n    async footer() {\n      return (await import('./components/footer_c')).default;\n    }\n  }\n}, {\n  path: '(.*)',\n  redirect: '/hello'\n}];\n\nclass App extends Component {\n  static get template() {\n    return _tpl;\n  }\n  constructor(args) {\n    super(args);\n    const __vm_792732ac1261 = this[__$$_792732ac1261].proxy;\n    __vm_792732ac1261._routes = routes;\n    __vm_792732ac1261.newTab = false;\n  }\n}\n\nbootstrap(App, document.getElementById('root-app'));\n","export function getAllPersons() {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      // if (Math.random() < 0.5) {\n      //   reject(new Error('test error!'));\n      // } else {\n        resolve([{id: '001', name: 'xiaoge_001'}, {id: '002', name: 'xiaoge_002'}]);\n      // }\n    }, 200);\n  });\n}\nexport function getPersonById(id) {\n  // simulate api fetch\n  return new Promise(res => {\n    setTimeout(() => {\n      res({\n        id,\n        name: `xiaoge_${id}`,\n        company: 'hansight',\n        email: 'abeyuhang@gmail.com',\n        address: 'Chengdu, Sichuan, China'\n      });\n    }, 100);\n  });\n}"],"sourceRoot":""}