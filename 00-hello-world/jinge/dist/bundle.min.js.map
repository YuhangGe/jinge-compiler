{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/util/type.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/util/array.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/util/common.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/util/setimm.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/util/dom.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/vm/common.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/vm/notify.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/vm/node.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/vm/core.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/vm/proxy.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/core/messenger.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/core/style.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/core/i18n.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/core/component.js","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/core/transition.js","webpack:///./jinge/app.html","webpack:////Users/geyuhang/workspace/jinge-mvvm/jinge-framework/lib/core/bootstrap.js","webpack:///./jinge/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","typeOf","v","isObject","isString","isUndefined","isArray","Array","isFunction","arrayRemove","array","item","idx","indexOf","splice","UID_INC","uid","Date","now","toString","Math","floor","random","tasksByHandle","registerImmediate","autoIncrement","nextHandle","currentlyRunningATask","clearImmediateFallback","handle","delete","runIfPresent","setTimeout","callback","window","setImmediate","Map","messagePrefix","addEventListener","event","source","data","startsWith","Number","slice","length","postMessage","arguments","Error","set","clearImmediate","createFragment","children","f","document","createDocumentFragment","forEach","appendChild","createTextNode","appendChildren","$parent","setAttribute","$ele","attrName","attrValue","attrN","removeAttribute","_createEl","$el","attrs","an","createElement","tag","addEvent","$element","eventName","handler","capture","passive","removeEvent","removeEventListener","$$","isInnerObj","clazz","constructor","RegExp","Boolean","isPublicProperty","charCodeAt","getPropertyName","parsePropertyPath","propertyPath","split","addParent","child","parent","__parents","push","core","prop","removeParent","findIndex","handleTasks","handleCancel","immediate","loopHandle","node","handlers","__handlers","has","imm","arg","handleOnce","listeners","__listeners","loopClearNode","sn","__parent","target","this","__notifiable","__related","__setters","proxy","writable","configurable","related","dbStarIdx","loopCreateNode","parentNode","level","propertyName","__property","__addRelated","loopGetNode","_a","size","deleteNode","__rmRelated","loopNotify","vm","parents","ps","__notify","concat","console","error","hooks","origin","hook","__unwatch","sfm","fn","getOwnPropertyNames","isPropArray","it","arr1","arr2","arrayEqual","notifyPropChanged","__propSetHandler","setFn","assertVM","oldVal","newValIsVM","__objectPropSetFn","__componentPropSetFn","setterFn","obj","map","desc","getOwnPropertyDescriptor","getPrototypeOf","getSetterFnIfPropIsSetter","attrsPropSetHandler","componentPropSetHandler","warn","attributes","vmCore","Proxy","createAttributes","MESSENGER_LISTENERS","Messenger","templateListeners","__on","opts","args","eventListener","options","once","onceListener","__off","clear","manager","sty","$style","type","id","dom","head","styleSheet","cssText","css","textContent","styleMap","info","refs","$e","style","class","body","exist","getComputedStyle","getPropertyValue","removeChild","isHideCssExists","getElementById","compile","text","Function","replace","i18n","super","__deps","__data","__cache","__key","__regLoc","JINGE_I18N_DATA","locale","depent","filename","fetch","then","res","defaultFetchFn","code","params","dict","dictionary","substring","render","renderDict","listener","ComponentStates","ContextStates","__","isComponent","assertRenderResults","renderResults","compilerAttrs","component","createComponent","passedAttrs","context","contextState","UNTOUCH","slots","state","INITIALIZE","rootNodes","nonRootCompNodes","relatedRefs","updateNextMap","compStylePid","deregDOM","deregI18N","deregs","unwatcher","watch","deregister","lisDeregister","registerEvent","$event","ignoredEventNames","targetEl","RENDERED","lis","__firstDOM","nodeType","Node","ELEMENT_NODE","__domAddListener","stop","prevent","$evt","stopPropagation","preventDefault","el","__transitionDOM","rns","__lastDOM","Clazz","renderFn","template","default","add","replaceMode","rr","__render","oldNode","attch","replaceChild","__handleAfterRender","removeDOM","comp","WILLDESTROY","__beforeDestroy","__handleBeforeDestroy","remove","__destroy","ref","deregFn","DESTROIED","TOUCHED","TOUCHED_FREEZED","UNTOUCH_FREEZED","__afterRender","nextTick","__update","ntMap","first","forceOverride","assign","relatedComponent","elOrArr","isComp","rbs","inheritIds","styleId","ids","TransitionStates","ComponentClazz","__renderToDOM"],"mappings":"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","file":"bundle.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export function typeOf(v) {\n    return typeof v;\n}\nexport function isObject(v) {\n    return v !== null && typeOf(v) === 'object';\n}\nexport function isString(v) {\n    return typeOf(v) === 'string';\n}\nexport function isNumber(v) {\n    return typeOf(v) === 'number' && !Number.isNaN(v) && Number.isFinite(v);\n}\nexport function isUndefined(v) {\n    return typeOf(v) === 'undefined';\n}\nexport function isArray(v) {\n    return Array.isArray(v);\n}\nexport function instanceOf(v, Clazz) {\n    return v instanceof Clazz;\n}\nexport function isBoolean(v) {\n    return typeof v === 'boolean' || instanceOf(v, Boolean);\n}\nexport function isFunction(v) {\n    return typeOf(v) === 'function';\n}\nexport function isDOMNode(ele) {\n    return instanceOf(ele, Node);\n}\nexport function isPromise(obj) {\n    return isObject(obj) && isFunction(obj.then);\n}\n//# sourceMappingURL=type.js.map","export function arrayRemove(array, item) {\n    const idx = array.indexOf(item);\n    if (idx < 0)\n        return false;\n    array.splice(idx, 1);\n    return true;\n}\nexport function arrayPushIfNotExist(array, item) {\n    const idx = array.indexOf(item);\n    if (idx >= 0)\n        return;\n    array.push(item);\n}\nexport function arrayEqual(arr1, arr2) {\n    if (arr1.length !== arr2.length)\n        return false;\n    for (let i = 0; i < arr1.length; i++) {\n        if (arr1[i] !== arr2[i])\n            return false;\n    }\n    return true;\n}\n//# sourceMappingURL=array.js.map","let UID_INC = 0;\nexport function uid() {\n    return Date.now().toString(32) + '-' + Math.floor(Math.random() * 0xffffff).toString(32) + '-' + (UID_INC++).toString(32);\n}\n//# sourceMappingURL=common.js.map","/**\n * setImmediate polyfill only for modern browsers\n * Copied from https://github.com/YuzuJS/setImmediate/blob/master/setImmediate.js\n * Simplified by Yuhang-Ge<abeyuhang@gmail.com>\n */\nimport { isUndefined, isFunction, isString } from './type';\nlet autoIncrement = 0;\nlet nextHandle = 1; // Spec says greater than zero\nlet tasksByHandle;\nlet currentlyRunningATask = false;\nlet registerImmediate;\nfunction setImmediateFallback(callback) {\n    if (!isFunction(callback) || arguments.length > 1) {\n        throw new Error('setImmediate require callback function.');\n    }\n    tasksByHandle.set(nextHandle, callback);\n    registerImmediate(nextHandle);\n    // console.log('siiii', callback);\n    return nextHandle++;\n}\nfunction clearImmediateFallback(handle) {\n    tasksByHandle.delete(handle);\n}\nfunction runIfPresent(handle) {\n    // From the spec: 'Wait until any invocations of this algorithm started before this one have completed.'\n    // So if we're currently running a task, we'll need to delay this invocation.\n    if (currentlyRunningATask) {\n        // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n        // 'too much recursion' error.\n        setTimeout(runIfPresent, 0, handle);\n        return;\n    }\n    const callback = tasksByHandle.get(handle);\n    // console.log('stttt', handle, callback);\n    if (!callback)\n        return;\n    currentlyRunningATask = true;\n    try {\n        callback();\n    }\n    finally {\n        clearImmediateFallback(handle);\n        currentlyRunningATask = false;\n    }\n}\nif (isUndefined(window.setImmediate)) {\n    tasksByHandle = new Map();\n    const messagePrefix = 'setImmediate$' + (autoIncrement++).toString(32) + '$';\n    window.addEventListener('message', event => {\n        if (event.source === window &&\n            isString(event.data) &&\n            event.data.startsWith(messagePrefix)) {\n            runIfPresent(Number(event.data.slice(messagePrefix.length)));\n        }\n    }, false);\n    registerImmediate = function (handle) {\n        window.postMessage(messagePrefix + handle, '*');\n    };\n}\nexport const setImmediate = setImmediateFallback;\nexport const clearImmediate = clearImmediateFallback;\n//# sourceMappingURL=setimm.js.map","import { isString, isUndefined, isObject } from './type';\nexport function setText($element, text) {\n    if (!isString(text)) {\n        text = JSON.stringify(text);\n    }\n    $element.textContent = text;\n}\nexport function createTextNode(text = '') {\n    return document.createTextNode(isString(text) ? text : JSON.stringify(text));\n}\nexport function createFragment(children) {\n    const f = document.createDocumentFragment();\n    children && children.forEach(n => {\n        f.appendChild(isString(n) ? document.createTextNode(n) : n);\n    });\n    return f;\n}\nexport function appendChildren($parent, children) {\n    $parent.appendChild(createFragment(children));\n}\nexport function replaceChildren($parent, children, oldNode) {\n    $parent.replaceChild(createFragment(children), oldNode);\n}\nexport function removeAttribute($ele, attrName) {\n    if (!attrName)\n        return;\n    if (isObject(attrName)) {\n        for (const attrN in attrName) {\n            removeAttribute($ele, attrN);\n        }\n        return;\n    }\n    return $ele.removeAttribute(attrName);\n}\nexport function setAttribute($ele, attrName, attrValue) {\n    if (!attrName)\n        return;\n    if (isObject(attrName)) {\n        for (const attrN in attrName) {\n            setAttribute($ele, attrN, attrName[attrN]);\n        }\n        return;\n    }\n    if (isUndefined(attrValue) || attrValue === null) {\n        removeAttribute($ele, attrName);\n    }\n    else {\n        $ele.setAttribute(attrName, attrValue);\n    }\n}\nfunction _createEl($el, attrs, children) {\n    if (attrs) {\n        for (const an in attrs) {\n            if (an && !isUndefined(attrs[an])) {\n                setAttribute($el, an, attrs[an]);\n            }\n        }\n    }\n    appendChildren($el, children);\n    return $el;\n}\nexport function createElement(tag, attrs, ...children) {\n    return _createEl(document.createElement(tag), attrs, children);\n}\nexport function createElementWithoutAttrs(tag, ...children) {\n    return createElement(tag, null, ...children);\n}\nexport function createSVGElement(tag, attrs, ...children) {\n    return _createEl(document.createElementNS('http://www.w3.org/2000/svg', tag), attrs, children);\n}\nexport function createSVGElementWithoutAttrs(tag, ...children) {\n    return createSVGElement(tag, null, ...children);\n}\nexport function createElementWithChild(tag, attrs, child) {\n    const $e = createElement(tag, attrs);\n    $e.appendChild(child);\n    return $e;\n}\nexport function insertAfter($parent, newNode, referenceNode) {\n    const rn = referenceNode.nextSibling;\n    if (!rn) {\n        $parent.appendChild(newNode);\n    }\n    else {\n        $parent.insertBefore(newNode, rn);\n    }\n}\n// export function hasClass($ele: Element, className: string): boolean {\n//   return $ele.classList.contains(className);\n// }\n// export function toggleClass($ele: Element, className: string, force?: boolean): boolean {\n//   return $ele.classList.toggle(className, force);\n// }\n// export function addClass($ele: Element, className: string): boolean {\n//   return toggleClass($ele, className, true);\n// }\n// export function removeClass($ele: Element, className: string): boolean {\n//   return toggleClass($ele, className, false);\n// }\n// export function replaceClass($ele: Element, oldClass: string, newClass: string): void {\n//   return $ele.classList.replace(oldClass, newClass);\n// }\nexport function addEvent($element, eventName, handler, capture) {\n    isUndefined(capture) && (capture = eventName.startsWith('touch') ? {\n        capture: false,\n        passive: true\n    } : false);\n    $element.addEventListener(eventName, handler, capture);\n}\nexport function removeEvent($element, eventName, handler) {\n    $element.removeEventListener(eventName, handler);\n}\n/**\n * Add event to DOM element, similar as addEventListener,\n * but return deregister function which will call removeEventListener.\n *\n * @returns {Function} deregister function which will removeEventListener\n */\nexport function registerEvent($element, eventName, handler, capture) {\n    addEvent($element, eventName, handler, capture);\n    return function deregister() {\n        removeEvent($element, eventName, handler);\n    };\n}\n//# sourceMappingURL=dom.js.map","import { isString, isUndefined, isObject, isArray, } from '../util';\nexport const $$ = Symbol('$$');\nexport function isInnerObj(v) {\n    const clazz = v.constructor;\n    return clazz === RegExp || clazz === Date || clazz === Boolean;\n}\nexport function isViewModel(v) {\n    return isObject(v) && ($$ in v);\n}\nexport function isPublicProperty(v) {\n    return isString(v) && v.charCodeAt(0) !== 95;\n}\nexport function getPropertyName(v) {\n    if (isString(v)) {\n        return v;\n    }\n    if (v === null) {\n        return 'null';\n    }\n    if (isUndefined(v)) {\n        return 'undefined';\n    }\n    return v.toString();\n}\nexport function parsePropertyPath(propertyPath) {\n    return isString(propertyPath) ? (propertyPath.indexOf('.') > 0 ? propertyPath.split('.') : [propertyPath]) : (isArray(propertyPath) ? propertyPath : [propertyPath]);\n}\nexport function addParent(child, parent, property) {\n    if (!parent.__parents) {\n        parent.__parents = [];\n    }\n    parent.__parents.push({\n        core: child,\n        prop: property\n    });\n}\nexport function removeParent(child, parent, property) {\n    if (!child.__parents) {\n        return;\n    }\n    const idx = child.__parents.findIndex(item => {\n        return item.core === parent && item.prop === property;\n    });\n    if (idx >= 0) {\n        child.__parents.splice(idx, 1);\n    }\n}\nexport function shiftParent(child, parent, property, delta) {\n    if (!child.__parents)\n        return;\n    const item = child.__parents.find(it => {\n        return it.core === parent && it.prop === property;\n    });\n    if (item) {\n        item.prop += delta;\n    }\n}\n//# sourceMappingURL=common.js.map","import { setImmediate, clearImmediate } from '../util';\nimport { getPropertyName } from './common';\nconst handleTasks = new Map();\nexport function handleCancel(handler) {\n    const t = handleTasks.get(handler);\n    if (t) {\n        clearImmediate(t.immediate);\n        handleTasks.delete(handler);\n    }\n}\nexport function handleOnce(handler, propertyPath) {\n    if (handleTasks.has(handler)) {\n        return;\n    }\n    const imm = setImmediate(() => {\n        const arg = handleTasks.get(handler);\n        try {\n            handler(arg.propertyPath);\n        }\n        finally {\n            handleTasks.delete(handler);\n        }\n    });\n    handleTasks.set(handler, {\n        immediate: imm,\n        propertyPath: propertyPath\n    });\n}\nexport function loopHandle(propertyPath, node, immediate) {\n    const handlers = node.__handlers;\n    handlers && handlers.forEach(handler => {\n        if (immediate) {\n            handler(propertyPath);\n        }\n        else {\n            handleOnce(handler, propertyPath);\n        }\n    });\n    const listeners = node.__listeners;\n    listeners && listeners.forEach(c => {\n        loopHandle(propertyPath, c, immediate);\n    });\n}\nexport function loopNotify(vm, propertyPath, immediate, level = 0) {\n    const listeners = vm.__listeners;\n    if (!listeners) {\n        return;\n    }\n    const propertyName = getPropertyName(propertyPath[level]);\n    if (!propertyName) {\n        return;\n    }\n    let node = listeners.get(propertyName);\n    if (node) {\n        if (propertyPath.length - 1 === level) {\n            // loopHandle(props, node, config[CFG_VM_DEBUG] ? null : imms);\n            loopHandle(propertyPath, node, immediate);\n        }\n        else {\n            loopNotify(node, propertyPath, immediate, level + 1);\n        }\n    }\n    node = listeners.get('*');\n    if (node) {\n        if (propertyPath.length - 1 === level) {\n            loopHandle(propertyPath, node, true);\n        }\n        else {\n            loopNotify(node, propertyPath, immediate, level + 1);\n        }\n    }\n    node = listeners.get('**');\n    if (node) {\n        loopHandle(propertyPath, node, true);\n    }\n}\n//# sourceMappingURL=notify.js.map","import { getPropertyName } from './common';\nimport { handleCancel } from './notify';\nexport function loopCreateNode(parentNode, propertyPath, level = 0) {\n    const propertyName = getPropertyName(propertyPath[level]);\n    if (!parentNode.__listeners) {\n        parentNode.__listeners = new Map();\n    }\n    let node = parentNode.__listeners.get(propertyName);\n    if (!node) {\n        node = {\n            __parent: parentNode,\n            __property: propertyName,\n            __handlers: null,\n            __listeners: null\n        };\n        parentNode.__listeners.set(propertyName, node);\n    }\n    if (propertyPath.length - 1 === level) {\n        return node;\n    }\n    else {\n        return loopCreateNode(node, propertyPath, level + 1);\n    }\n}\nexport function loopGetNode(parentNode, propertyPath, level = 0) {\n    var _a;\n    const propertyName = getPropertyName(propertyPath[level]);\n    if (!propertyName) {\n        return null;\n    }\n    const node = (_a = parentNode.__listeners) === null || _a === void 0 ? void 0 : _a.get(propertyName);\n    if (!node) {\n        return null;\n    }\n    if (propertyPath.length - 1 === level) {\n        return node;\n    }\n    else {\n        return loopGetNode(node, propertyPath, level + 1);\n    }\n}\nexport function deleteNode(node) {\n    if ((node && node.__handlers && node.__handlers.length > 0) ||\n        (node.__listeners && node.__listeners.size > 0)) {\n        return null;\n    }\n    /**\n     * if one node don't have any listener or child, delete it.\n     */\n    const parent = node.__parent;\n    const property = node.__property;\n    node.__parent = null; // unlink parent.\n    parent.__listeners.delete(property);\n    return parent;\n}\nexport function loopClearNode(node) {\n    const listeners = node.__listeners;\n    if (listeners) {\n        // loop clear all child nodes\n        listeners.forEach(sn => loopClearNode(sn));\n        node.__listeners = null;\n    }\n    // destroy all handlers\n    const handlers = node.__handlers;\n    if (handlers) {\n        // clear handler waiting to execute\n        handlers.forEach(handleCancel);\n        node.__handlers = null;\n    }\n    // unlink parent\n    node.__parent = null;\n}\n//# sourceMappingURL=node.js.map","import { arrayRemove, isArray, arrayEqual, isObject } from '../util';\nimport { parsePropertyPath, $$, removeParent, } from './common';\nimport { loopCreateNode, loopGetNode, loopClearNode, deleteNode } from './node';\nimport { handleCancel, loopNotify } from './notify';\nexport class ViewModelCoreImpl {\n    /**\n     * Don't use the constructor. Use createViewModel instead.\n     */\n    constructor(target) {\n        this.__notifiable = true;\n        this.__parents = null;\n        this.__listeners = null;\n        this.__related = null;\n        this.__setters = null;\n        this.target = target;\n        this.proxy = null;\n        Object.defineProperty(target, $$, {\n            value: this,\n            writable: false,\n            configurable: true,\n            enumerable: false\n        });\n    }\n    __watch(propertyPath, handler, related) {\n        propertyPath = parsePropertyPath(propertyPath);\n        const dbStarIdx = propertyPath.indexOf('**');\n        if (dbStarIdx >= 0 && dbStarIdx !== propertyPath.length - 1) {\n            /**\n             * 'a.b.**' is good.\n             * 'a.b.**.c' is bad.\n             */\n            throw new Error('wizard \"**\" must be last element in path.');\n        }\n        const node = loopCreateNode(this, propertyPath);\n        if (!node.__handlers) {\n            node.__handlers = [];\n        }\n        if (node.__handlers.indexOf(handler) < 0) {\n            node.__handlers.push(handler);\n        }\n        if (related && related !== this) {\n            /**\n             * If some child of this component is passed as argument(ie.\n             * use arg:pass attribute) like ng-tranclude in angular 1.x,\n             * the child may contain some messenger listeners not belong to\n             * this component but belong to outer parent.\n             *\n             * When destroy this component, we should also remove messenger listeners\n             *   belong to outer parent to prevent memory leak.\n             * To implement this goal, we maitain VM_RELATED_LISTENERS.\n             * When render view-tree, any messenger listeners belong to outer\n             * parent, will be also linked under VM_RELATED_LISTENERS, then\n             * when we destroy this component, the listeners can also be clear.\n             *\n             * For examle:\n             *\n             * <!-- outer parent: RootApp -->\n             * <div>\n             * <if expect=\"show\">\n             * <Tooltip>\n             * <argument arg:pass=\"default\">\n             * <p>hello, world. my name is ${name}</p>\n             * </argument>\n             * </Tooltip>\n             * </if>\n             * </div>\n             *\n             * when the `show` variable changed from true to false, the\n             * Tooltip component will be destroy. The messenger listener belong\n             * to the outer parent RootApp which watch `name` variable should\n             * also be removed.\n             */\n            related.__addRelated(this, propertyPath, handler);\n        }\n    }\n    __unwatch(propertyPath, handler, related) {\n        if (!propertyPath) {\n            loopClearNode(this);\n            return;\n        }\n        const node = loopGetNode(this, parsePropertyPath(propertyPath));\n        if (!node) {\n            return;\n        }\n        const handlers = node.__handlers;\n        if (!handlers) {\n            return;\n        }\n        if (!handler) { // remove all if second parameter is not provided\n            handlers.forEach(handleCancel);\n            handlers.length = 0;\n        }\n        else {\n            handleCancel(handler);\n            arrayRemove(handlers, handler);\n        }\n        deleteNode(node);\n        if (related && related !== this) {\n            related.__rmRelated(this, propertyPath, handler);\n        }\n    }\n    __notify(propertyPath, immediate = false) {\n        if (!this.__notifiable) {\n            return;\n        }\n        propertyPath = parsePropertyPath(propertyPath);\n        if (this.__listeners) {\n            loopNotify(this, propertyPath, immediate);\n        }\n        const parents = this.__parents;\n        parents && parents.forEach(ps => {\n            const vm = ps.core;\n            if (!vm) {\n                // eslint-disable-next-line no-console\n                console.error('dev-warn-unexpected: parent of ViewModelCore has been destroied but not unlink.');\n                return;\n            }\n            vm.__notify([ps.prop].concat(propertyPath), immediate);\n        });\n    }\n    __destroy() {\n        this.__notifiable = false;\n        this.__parents = null;\n        // clear listeners\n        loopClearNode(this);\n        // unlink wrapper proxy\n        this.proxy = null;\n        if (this.__related) {\n            this.__related.forEach((hooks, origin) => {\n                hooks.forEach(hook => {\n                    origin.__unwatch(hook.prop, hook.handler);\n                });\n            });\n            this.__related = null;\n        }\n        const target = this.target;\n        /*\n         * 解除 ViewModel 之间的 VM_PARENTS 关联。\n         * 使用 getOwnPropertyNames 可以获取所有属性，但无法获取 setter 函数定义的属性。\n         */\n        const sfm = this.__setters;\n        if (sfm) {\n            sfm.forEach((fn, prop) => {\n                if (fn === null) {\n                    return;\n                }\n                const v = target[prop];\n                if (!isObject(v) || !($$ in v)) {\n                    return;\n                }\n                removeParent(v[$$], this, prop);\n            });\n            this.__setters = null;\n        }\n        Object.getOwnPropertyNames(target).forEach(prop => {\n            const v = target[prop];\n            if (!isObject(v) || !($$ in v)) {\n                return;\n            }\n            removeParent(v[$$], this, prop);\n        });\n        // unlink vm target\n        delete target[$$];\n        this.target = null;\n    }\n    __addRelated(origin, propertyPath, handler) {\n        if (!this.__related)\n            this.__related = new Map();\n        let hook = this.__related.get(origin);\n        if (!hook) {\n            this.__related.set(origin, hook = []);\n        }\n        hook.push({\n            prop: propertyPath,\n            handler\n        });\n    }\n    __rmRelated(origin, propertyPath, handler) {\n        if (!this.__related)\n            return;\n        const hook = this.__related.get(origin);\n        if (!hook)\n            return;\n        const isPropArray = isArray(propertyPath);\n        const i = hook.findIndex(it => {\n            return handler === it.handler &&\n                (isPropArray\n                    ? arrayEqual(propertyPath, it.prop)\n                    : propertyPath === it.prop);\n        });\n        if (i >= 0) {\n            hook.splice(i, 1);\n        }\n    }\n}\n//# sourceMappingURL=core.js.map","import { isNumber, isArray, isObject, isFunction, isPromise, isUndefined } from '../util';\nimport { addParent, isViewModel, removeParent, shiftParent, isPublicProperty, isInnerObj, $$ } from './common';\nimport { ViewModelCoreImpl } from './core';\n/**\n * check if property named \"prop\" is setter of instance \"obj\",\n * if it's setter, return setter function, otherwise return null.\n * @param {Object} obj\n * @param {String} prop\n *\n * 检测名称为 \"prop\" 的属性是否是 setter，如果是，返回该 setter 函数，\n * 否则，返回 null。\n * 由于 obj 可能是有继承关系的类的实例，因此需要向上检测继承的类的 prototype。\n */\nfunction getSetterFnIfPropIsSetter(obj, prop) {\n    let map = obj[$$].__setters;\n    if (!map) {\n        obj[$$].__setters = map = new Map();\n    }\n    if (!map.has(prop)) {\n        let clazz = obj.constructor;\n        let desc = Object.getOwnPropertyDescriptor(clazz.prototype, prop);\n        let fn;\n        if (desc) {\n            fn = isFunction(desc.set) ? desc.set : null;\n            map.set(prop, fn);\n            return fn;\n        }\n        // lookup to check parent classes\n        clazz = Object.getPrototypeOf(clazz);\n        while (clazz && clazz.prototype) {\n            desc = Object.getOwnPropertyDescriptor(clazz.prototype, prop);\n            if (desc) {\n                fn = isFunction(desc.set) ? desc.set : null;\n                map.set(prop, fn);\n                return fn;\n            }\n            clazz = Object.getPrototypeOf(clazz);\n        }\n        map.set(prop, null);\n        return null;\n    }\n    else {\n        return map.get(prop);\n    }\n}\nfunction notifyPropChanged(vm, prop) {\n    vm[$$].__notify(prop);\n}\nfunction __propSetHandler(target, prop, value, setFn, assertVM = true) {\n    if (!isPublicProperty(prop)) {\n        /**\n         * 如果不强制转成 string，typescript 会报：Type 'symbol' cannot be used as an index type\n         */\n        target[prop] = value;\n        return true;\n    }\n    const oldVal = target[prop];\n    if (oldVal === value && !isUndefined(value)) {\n        return true;\n    }\n    let newValIsVM = isObject(value) && !isInnerObj(value);\n    if (newValIsVM) {\n        newValIsVM = $$ in value;\n        if (assertVM && !newValIsVM) {\n            throw new Error(`public property \"${prop.toString()}\" of ViewModel must also be ViewModel`);\n        }\n    }\n    // console.log(`'${prop}' changed from ${store[prop]} to ${value}`);\n    if (isObject(oldVal) && ($$ in oldVal)) {\n        removeParent(oldVal[$$], target[$$], prop);\n    }\n    setFn(target, prop, value);\n    if (newValIsVM) {\n        addParent(value[$$], target[$$], prop);\n    }\n    notifyPropChanged(target, prop);\n    return true;\n}\nfunction __objectPropSetFn(target, prop, value) {\n    target[prop] = value;\n}\nfunction __componentPropSetFn(target, prop, value) {\n    /**\n     * we must ensure `this` in setter function to be `Proxy`\n     *\n     * 首先判断当前赋值的变量名，是否对应了一个 setter 函数，\n     * 如果是 setter 函数，则应该显式地调用，\n     *   并将 `this` 设置为该 target 的包装 Proxy，\n     *   这样才能保正 setter 函数中其它赋值语句能触发 notify。\n     * 如果不是 setter 函数，则简单地使用 target\\[prop\\] 赋值即可。\n     */\n    const setterFn = getSetterFnIfPropIsSetter(target, prop);\n    if (setterFn) {\n        setterFn.call(target[$$].proxy, value);\n    }\n    else {\n        target[prop] = value;\n    }\n}\nfunction objectPropSetHandler(target, prop, value) {\n    if (!($$ in target)) {\n        // ViewModel has been destroied.\n        return true;\n    }\n    return __propSetHandler(target, prop, value, __objectPropSetFn);\n}\nfunction attrsPropSetHandler(target, prop, value) {\n    if (!($$ in target)) {\n        // ViewModel has been destroied.\n        return true;\n    }\n    return __propSetHandler(target, prop, value, __objectPropSetFn, false);\n}\nfunction componentPropSetHandler(target, prop, value) {\n    if (!($$ in target)) {\n        // eslint-disable-next-line no-console\n        console.warn(`call setter \"${prop.toString()}\" after destroied, resources such as setInterval maybe not released before destroy. component:`, target);\n        return true;\n    }\n    return __propSetHandler(target, prop, value, __componentPropSetFn);\n}\nfunction arrayNotifyItems(target, idxStart, idxEnd) {\n    let i = idxStart;\n    if (idxStart > idxEnd) {\n        i = idxEnd;\n        idxEnd = idxStart;\n    }\n    for (; i < idxEnd; i++) {\n        // console.log('npc', i);\n        notifyPropChanged(target, i);\n    }\n}\nfunction arrayLengthSetHandler(target, value) {\n    if (!isNumber(value)) {\n        throw new Error('bad argument. array length must be validate number.');\n    }\n    const oldLen = target.length;\n    if (oldLen > value) {\n        for (let i = value; i < oldLen; i++) {\n            const v = target[i];\n            if (isViewModel(v)) {\n                removeParent(v[$$], target[$$], i);\n            }\n        }\n    }\n    target.length = value;\n    // console.log('set .length from', oldLen, 'to', value);\n    if (oldLen !== value) {\n        notifyPropChanged(target, 'length');\n        arrayNotifyItems(target, oldLen, value);\n    }\n    return true;\n}\nfunction arrayPropSetHandler(target, prop, value) {\n    if (!($$ in target)) {\n        return true;\n    }\n    if (prop === 'length') {\n        return arrayLengthSetHandler(target, value);\n    }\n    /**\n     * 即便是 arr[0] 这样的取值，在 Proxy 的 set 里面，传递的 property 也是 string 类型，即 \"0\"。\n     * 因此，对数组也使用和对象一致的 objectPropSetHandler 来处理。\n     */\n    return __propSetHandler(target, prop, value, __objectPropSetFn);\n}\nconst ObjectProxyHandler = {\n    set: objectPropSetHandler\n};\nconst PromiseProxyHandler = {\n    get(target, prop) {\n        if (prop === 'then' || prop === 'catch') {\n            const v = target[prop];\n            return function (...args) {\n                return v.call(target, ...args);\n            };\n        }\n        else {\n            return target[prop];\n        }\n    },\n    set: objectPropSetHandler\n};\nfunction _arrayReverseSort(target, fn, arg) {\n    target.forEach((it, i) => {\n        if (isViewModel(it)) {\n            addParent(it[$$], target[$$], i);\n        }\n    });\n    target[fn](arg);\n    target.forEach((it, i) => {\n        if (isViewModel(it)) {\n            removeParent(it[$$], target[$$], i);\n        }\n    });\n    arrayNotifyItems(target, 0, target.length);\n    // return wrapper proxy to ensure `arr.reverse() === arr`\n    return target[$$].proxy;\n}\nfunction wrapSubArray(arr, wrapEachItem = false) {\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    const rtn = wrapProxy(arr, true);\n    // handleVMDebug(arr);\n    arr.forEach((it, i) => {\n        if (isViewModel(it)) {\n            addParent(it[$$], arr[$$], i);\n        }\n        else if (wrapEachItem) {\n            // eslint-disable-next-line @typescript-eslint/no-use-before-define\n            arr[i] = createViewModel(it);\n        }\n    });\n    return rtn;\n}\nfunction _arrayShiftOrUnshiftProp(arr, delta) {\n    arr.forEach((el, i) => {\n        if (!isViewModel(el))\n            return;\n        shiftParent(el[$$], arr[$$], i, delta);\n    });\n}\nfunction _argAssert(arg, fn) {\n    if (isObject(arg)) {\n        if (!($$ in arg)) {\n            throw new Error(`argument passed to Array.${fn} must be ViewModel if the array is ViewModel`);\n        }\n        else {\n            return true;\n        }\n    }\n    else {\n        return false;\n    }\n}\nconst ArrayFns = {\n    splice(target, idx, delCount, ...args) {\n        if (idx < 0)\n            idx = 0;\n        args.forEach((arg, i) => {\n            if (_argAssert(arg, 'splice')) {\n                addParent(arg[$$], target[$$], idx + i);\n            }\n        });\n        for (let i = 0; i < delCount; i++) {\n            if (idx + i >= target.length)\n                break;\n            const el = target[idx + i];\n            if (isViewModel(el)) {\n                removeParent(el[$$], target[$$], idx + i);\n            }\n        }\n        const delta = args.length - delCount;\n        if (delta !== 0) {\n            for (let i = idx + delCount; i < target.length; i++) {\n                const el = target[i];\n                if (!isViewModel(el)) {\n                    continue;\n                }\n                shiftParent(el[$$], target[$$], i, delta);\n            }\n        }\n        const rtn = wrapSubArray(target.splice(idx, delCount, ...args));\n        if (delta !== 0) {\n            notifyPropChanged(target, 'length');\n            for (let i = idx; i < target.length; i++) {\n                notifyPropChanged(target, i);\n            }\n        }\n        return rtn;\n    },\n    shift(target) {\n        if (target.length === 0)\n            return target.shift();\n        _arrayShiftOrUnshiftProp(target, -1);\n        const el = target.shift();\n        if (isViewModel(el)) {\n            removeParent(el[$$], target[$$], -1);\n        }\n        notifyPropChanged(target, 'length');\n        for (let i = 0; i < target.length + 1; i++) {\n            notifyPropChanged(target, i);\n        }\n        return el;\n    },\n    unshift(target, ...args) {\n        if (args.length === 0)\n            return target.unshift();\n        args.forEach((arg, i) => {\n            if (_argAssert(arg, 'unshift')) {\n                addParent(arg[$$], target[$$], i);\n            }\n        });\n        _arrayShiftOrUnshiftProp(target, args.length);\n        const rtn = target.unshift(...args);\n        notifyPropChanged(target, 'length');\n        for (let i = 0; i < target.length; i++) {\n            notifyPropChanged(target, i);\n        }\n        return rtn;\n    },\n    pop(target) {\n        if (target.length === 0) {\n            return target.pop();\n        }\n        const el = target.pop();\n        if (isViewModel(el)) {\n            removeParent(el[$$], target[$$], target.length);\n        }\n        notifyPropChanged(target, 'length');\n        notifyPropChanged(target, target.length);\n        return el;\n    },\n    push(target, ...args) {\n        if (args.length === 0)\n            return target.push();\n        args.forEach((arg, i) => {\n            if (_argAssert(arg, 'push')) {\n                addParent(arg[$$], target[$$], target.length + i);\n            }\n        });\n        const rtn = target.push(...args);\n        notifyPropChanged(target, 'length');\n        for (let i = target.length - 1 - args.length; i < target.length; i++) {\n            notifyPropChanged(target, i);\n        }\n        return rtn;\n    },\n    fill(target, v) {\n        _argAssert(v, 'fill');\n        target.forEach((it, i) => {\n            if (it === v && !isUndefined(it)) {\n                return;\n            }\n            if (isViewModel(it)) {\n                removeParent(it[$$], target[$$], i);\n            }\n            target[i] = v;\n            if (isViewModel(v)) {\n                addParent(v[$$], target[$$], i);\n            }\n            notifyPropChanged(target, i);\n        });\n        return target[$$].proxy;\n    },\n    reverse(target) {\n        return _arrayReverseSort(target, 'reverse');\n    },\n    sort(target, fn) {\n        return _arrayReverseSort(target, 'sort', fn);\n    },\n    concat(target, arr) {\n        _argAssert(arr, 'concat');\n        return wrapSubArray(target.concat(arr));\n    },\n    filter(target, fn) {\n        return wrapSubArray(target.filter(fn));\n    },\n    slice(target, si, ei) {\n        return wrapSubArray(target.slice(si, ei));\n    },\n    map(target, fn) {\n        return wrapSubArray(target.map(fn), true);\n    }\n};\nexport const ArrayProxyHandler = {\n    get(target, prop) {\n        if (prop in ArrayFns) {\n            const fn = ArrayFns[prop];\n            return function (...args) {\n                return fn(target, ...args);\n            };\n        }\n        else {\n            return target[prop];\n        }\n    },\n    set: arrayPropSetHandler\n};\nfunction wrapProxy(target, isArr) {\n    const vmCore = new ViewModelCoreImpl(target);\n    return vmCore.proxy = new Proxy(target, isArr ? ArrayProxyHandler : (isPromise(target) ? PromiseProxyHandler : ObjectProxyHandler));\n}\nfunction wrapProp(parent, child, property) {\n    // const v = vm[property];\n    if (!isObject(child) || isInnerObj(child)) {\n        return;\n    }\n    if (!($$ in child)) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        parent[property] = child = createViewModel(child);\n    }\n    addParent(child[$$], parent[$$], property);\n}\nexport function createViewModel(target) {\n    if (isObject(target)) {\n        // directly return if alreay is ViewModel or inner object(Date/RegExp/Boolean).\n        if (isInnerObj(target) || ($$ in target)) {\n            return target;\n        }\n        const isArr = isArray(target);\n        if (isArr) {\n            for (let i = 0; i < target.length; i++) {\n                wrapProp(target, target[i], i);\n            }\n        }\n        else {\n            for (const k in target) {\n                if (isPublicProperty(k)) {\n                    wrapProp(target, target[k], k);\n                }\n            }\n        }\n        return wrapProxy(target, isArr);\n    }\n    else {\n        return target;\n    }\n}\nexport function createAttributes(attributes) {\n    const vmCore = new ViewModelCoreImpl(attributes);\n    // 初始化时默认的 notifiable 为 false，\n    // 待 RENDER 结束后才修改为 true，用于避免无谓的消息通知。\n    vmCore.__notifiable = false;\n    return (vmCore.proxy = new Proxy(attributes, {\n        set: attrsPropSetHandler\n    }));\n}\n// function handleVMDebug(vm) {\n//   if (!config[CFG_VM_DEBUG]) {\n//     return;\n//   }\n//   let _di = window._VM_DEBUG;\n//   if (!_di) {\n//     _di = window._VM_DEBUG = {\n//       id: 0, vms: []\n//     };\n//   }\n//   vm[VM_DEBUG_ID] = _di.id++;\n//   // if (isComponent(vm) && !(VM_DEBUG_NAME in vm)) {\n//   //   vm[VM_DEBUG_NAME] = `<${vm.constructor.name}>`;\n//   // }\n//   _di.vms.push(vm);\n// }\nexport function createComponent(component) {\n    if ($$ in component) {\n        throw new Error('component has alreay been wrapped.');\n    }\n    // handleVMDebug(component);\n    const vmCore = new ViewModelCoreImpl(component);\n    // 初始化时 Component 默认的 VM_NOTIFIABLE 为 false，\n    // 待 RENDER 结束后才修改为 true，用于避免无谓的消息通知。\n    vmCore.__notifiable = false;\n    return vmCore.proxy = new Proxy(component, {\n        set: componentPropSetHandler\n    });\n}\nexport function vm(target) {\n    if (!isObject(target)) {\n        throw new Error('vm() target must be object or array.');\n    }\n    return createViewModel(target);\n}\nexport function attrs(target) {\n    if (!isObject(target) || isArray(target)) {\n        throw new Error('attrs() traget must be plain object.');\n    }\n    return createAttributes(target);\n}\nexport function watch(vm, propertyPath, handler) {\n    vm[$$].__watch(propertyPath, handler);\n}\nexport function unwatch(vm, propertyPath, handler) {\n    vm[$$].__unwatch(propertyPath, handler);\n}\n//# sourceMappingURL=proxy.js.map","export const MESSENGER_LISTENERS = Symbol('listeners');\nexport class Messenger {\n    constructor(templateListeners) {\n        this[MESSENGER_LISTENERS] = null;\n        if (templateListeners) {\n            for (const eventName in templateListeners) {\n                const handler = templateListeners[eventName];\n                this.__on(eventName, handler.fn, handler.opts);\n            }\n        }\n    }\n    __notify(eventName, ...args) {\n        if (!this[MESSENGER_LISTENERS])\n            return;\n        const listeners = this[MESSENGER_LISTENERS].get(eventName);\n        if (!listeners)\n            return;\n        listeners.forEach(handler => {\n            handler.fn(...args);\n        });\n    }\n    __on(eventName, eventListener, options) {\n        if (!this[MESSENGER_LISTENERS]) {\n            this[MESSENGER_LISTENERS] = new Map();\n        }\n        let listeners = this[MESSENGER_LISTENERS].get(eventName);\n        if (!listeners) {\n            this[MESSENGER_LISTENERS].set(eventName, listeners = []);\n        }\n        if (listeners.findIndex(it => {\n            return it.fn === eventListener;\n        }) >= 0) {\n            // eslint-disable-next-line no-console\n            console.warn('dulplicated messenger listener', eventName, eventListener);\n            return;\n        }\n        if (options && options.once) {\n            const onceListener = (...args) => {\n                eventListener(...args);\n                this.__off(eventName, eventListener);\n            };\n            listeners.push({\n                fn: onceListener,\n                opts: options\n            });\n        }\n        else {\n            listeners.push({\n                fn: eventListener,\n                opts: options\n            });\n        }\n    }\n    __off(eventName, eventListener) {\n        if (!this[MESSENGER_LISTENERS])\n            return;\n        if (!eventName) {\n            this[MESSENGER_LISTENERS].clear();\n            return;\n        }\n        const listeners = this[MESSENGER_LISTENERS].get(eventName);\n        if (!listeners)\n            return;\n        if (!eventListener) {\n            listeners.length = 0;\n            return;\n        }\n        const idx = listeners.findIndex(it => {\n            return it.fn === eventListener;\n        });\n        listeners.splice(idx, 1);\n    }\n}\n//# sourceMappingURL=messenger.js.map","import { uid, createElement } from '../util';\nfunction isHideCssExists() {\n    const $e = createElement('span', {\n        style: 'position:absolute;left:-10000px;',\n        class: 'jg-hide'\n    });\n    document.body.appendChild($e);\n    const exist = getComputedStyle($e).getPropertyValue('display') === 'none';\n    document.body.removeChild($e);\n    return exist;\n}\nclass ComponentStyleManager {\n    constructor() {\n        this.m = new Map();\n        this.s = 0;\n    }\n    create(sty) {\n        if (this.s === 0)\n            return;\n        const $style = createElement('style', {\n            type: 'text/css',\n            id: sty.dom\n        });\n        document.head.appendChild($style);\n        if ($style.styleSheet) {\n            $style.styleSheet.cssText = sty.css;\n        }\n        else {\n            $style.textContent = sty.css;\n        }\n    }\n    add(sty) {\n        if (!sty)\n            return;\n        const styleMap = this.m;\n        let info = styleMap.get(sty.id);\n        if (info) {\n            info.refs++;\n            return;\n        }\n        info = {\n            id: sty.id,\n            css: sty.css,\n            dom: `__${sty.id}__`,\n            refs: 1\n        };\n        styleMap.set(sty.id, info);\n        this.create(info);\n    }\n    attch() {\n        if (this.s !== 0) {\n            // eslint-disable-next-line no-console\n            console.warn('component styles already attached.');\n            return;\n        }\n        this.s = 1;\n        if (!isHideCssExists()) {\n            this.create({\n                dom: `__jgsty_${uid()}__`,\n                css: '.jg-hide{display:none!important}.jg-hide.jg-hide-enter,.jg-hide.jg-hide-leave{display:block!important}'\n            });\n        }\n        this.m.forEach(info => {\n            this.create(info);\n        });\n    }\n    remove(sty) {\n        if (!sty)\n            return;\n        const info = this.m.get(sty.id);\n        if (!info)\n            return;\n        info.refs--;\n        if (info.refs > 0) {\n            return;\n        }\n        this.m.delete(info.id);\n        if (this.s === 0) {\n            return;\n        }\n        document.head.removeChild(document.getElementById(info.dom));\n    }\n}\n// singleton\nexport const manager = new ComponentStyleManager();\n//# sourceMappingURL=style.js.map","import { isString, uid, isFunction } from '../util';\nimport { Messenger } from './messenger';\nconst DEFAULT_FILENAME = 'dist/locale.[locale].js';\n/**\n * convert i18n text template to function\n * @param {String} text i18n formatted text template\n */\nexport function compile(text) {\n    // eslint-disable-next-line no-new-func\n    return new Function('__ctx', `return \\`${text.replace(/`/g, '\\\\`').replace(/\\$\\{\\s*([\\w\\d._$]+)\\s*\\}/g, (m, n) => {\n        return '${ __ctx.' + n + ' }';\n    })}\\`;`);\n}\nfunction defaultFetchFn(locale, filename) {\n    return window.fetch(filename.replace('[locale]', locale)).then(res => res.text());\n}\nclass I18nService extends Messenger {\n    constructor() {\n        super();\n        this.__deps = null;\n        this.__data = null;\n        this.__cache = new Map();\n        this.__key = null;\n        this.__regLoc(window.JINGE_I18N_DATA);\n    }\n    get locale() {\n        return this.__data.locale;\n    }\n    /**\n     * Register i18n render depedent.\n     * This method will be called by compiler generated code, don't call it manully.\n     */\n    __regDep(idx, depent) {\n        if (!this.__deps)\n            this.__deps = [];\n        if (!this.__deps[idx])\n            throw new Error(`conflict at ${idx}`);\n        this.__deps[idx] = depent;\n    }\n    /**\n     * Register locale data, will be called in locale resource script.\n     * Usually you don't need call this method manully.\n     */\n    __regLoc(data) {\n        if (!data || this.__cache.has(data.locale)) {\n            return;\n        }\n        this.__cache.set(data.locale, data);\n        if (!this.__data) {\n            this.__data = data;\n        }\n    }\n    /**\n     * switch to another locale/language\n     * @param {string} locale locale to swtiched\n     * @param {string | Function} filename filename of locale script with full path, or function fetch locale script.\n     */\n    switch(locale, filename = DEFAULT_FILENAME) {\n        if (this.__data.locale === locale) {\n            return;\n        }\n        const data = this.__cache.get(locale);\n        if (!data) {\n            const key = uid();\n            this.__key = key;\n            (isFunction(filename) ? filename(locale) : defaultFetchFn(locale, filename)).then((code) => {\n                // eslint-disable-next-line no-new-func\n                (new Function('jinge', code))({\n                    i18n: this\n                });\n                if (this.__key !== key || this.__data.locale === locale) {\n                    /*\n                      * ignore if callback has been expired.\n                      * 使用闭包的技巧来检测当前回调是否已经过期，\n                      * 即，是否已经有新的 fetchFn 函数的调用。\n                      */\n                    return;\n                }\n                const data = this.__cache.get(locale);\n                this.__data = data;\n                this.__notify('i18n-change', this.locale);\n            });\n        }\n        else {\n            this.__data = data;\n            this.__notify('i18n-change', this.locale);\n        }\n    }\n    __t(key, params) {\n        const dict = this.__data.dictionary;\n        if (!(key in dict)) {\n            return 'i18n_missing';\n        }\n        let text = dict[key];\n        if (isString(text)) {\n            // text.startsWith(\"«\") means reference to another key\n            if (text.charCodeAt(0) === 171) {\n                text = dict[text.substring(1)];\n                if (isString(text)) {\n                    text = compile(text);\n                }\n            }\n            else {\n                text = compile(text);\n            }\n            dict[key] = text;\n        }\n        return text(params);\n    }\n    __r(key, type) {\n        const render = this.__data.render;\n        if (isFunction(render)) {\n            if (!this.__deps) {\n                throw new Error('missing render depedents');\n            }\n            this.__data.render = render(...this.__deps);\n        }\n        const renderDict = render[type];\n        if (!(key in renderDict)) {\n            throw new Error(`missing i18n ${type} for key: ${key}`);\n        }\n        let fn = renderDict[key];\n        if (isString(fn)) {\n            // if fn is string, it's a reference to another key.\n            renderDict[key] = fn = renderDict[fn];\n        }\n        return fn;\n    }\n    /**\n     * Bind listener to LOCALE_CHANGE event,\n     * return a function auto remove this listener\n     * @param {Function} handler a listener bind to change event\n     * @param {Boolean} immediate call listener immediately, default is false.\n     * @returns {Function} a function auto remove listener\n     */\n    watch(listener, immediate) {\n        this.__on('change', listener);\n        if (immediate) {\n            listener(this.locale);\n        }\n        return () => {\n            this.__off('change', listener);\n        };\n    }\n}\n/* Singleton */\nexport const i18n = new I18nService();\n/**\n * Compiler helper function, the first parameter will be convert to i18n dictionary key,\n * and the whole function will be transform to `i18nService._t(key, params)`\n *\n * But after i18n locale resource script had been written, compiler won't transform it,\n * the function will work as text parse util.\n *\n * @param {String|Object} text\n * @param {Object} params\n */\nexport function _t(text, params) {\n    return params ? compile(text)(params) : text;\n}\n//# sourceMappingURL=i18n.js.map","import { isObject, isArray, arrayRemove, registerEvent, isFunction, clearImmediate, setImmediate, appendChildren, replaceChildren } from '../util';\nimport { $$ } from '../vm/common';\nimport { createComponent } from '../vm/proxy';\nimport { Messenger, MESSENGER_LISTENERS } from './messenger';\nimport { manager as StyleManager } from './style';\nimport { i18n as i18nService } from './i18n';\nexport var ComponentStates;\n(function (ComponentStates) {\n    ComponentStates[ComponentStates[\"INITIALIZE\"] = 0] = \"INITIALIZE\";\n    ComponentStates[ComponentStates[\"RENDERED\"] = 1] = \"RENDERED\";\n    ComponentStates[ComponentStates[\"WILLDESTROY\"] = 2] = \"WILLDESTROY\";\n    ComponentStates[ComponentStates[\"DESTROIED\"] = 3] = \"DESTROIED\";\n})(ComponentStates || (ComponentStates = {}));\nexport var ContextStates;\n(function (ContextStates) {\n    ContextStates[ContextStates[\"UNTOUCH\"] = 0] = \"UNTOUCH\";\n    ContextStates[ContextStates[\"TOUCHED\"] = 1] = \"TOUCHED\";\n    ContextStates[ContextStates[\"UNTOUCH_FREEZED\"] = 2] = \"UNTOUCH_FREEZED\";\n    ContextStates[ContextStates[\"TOUCHED_FREEZED\"] = 3] = \"TOUCHED_FREEZED\";\n})(ContextStates || (ContextStates = {}));\nexport const __ = Symbol('__');\n/** Bellow is utility functions **/\nexport function isComponent(v) {\n    return __ in v;\n}\nexport function assertRenderResults(renderResults) {\n    if (!isArray(renderResults) || renderResults.length === 0) {\n        throw new Error('Render results of component is empty');\n    }\n    return renderResults;\n}\nexport class Component extends Messenger {\n    /**\n     * ATTENTION!!!\n     *\n     * Don't use constructor directly, use static factory method `create(attrs)` instead.\n     */\n    constructor(attrs) {\n        if (!isObject(attrs) || !($$ in attrs)) {\n            throw new Error('Attributes passed to Component constructor must be  See https://[todo]');\n        }\n        const compilerAttrs = attrs[__] || {};\n        super(compilerAttrs.listeners);\n        createComponent(this);\n        this[__] = {\n            passedAttrs: attrs,\n            context: compilerAttrs.context,\n            contextState: ContextStates.UNTOUCH,\n            slots: compilerAttrs.slots,\n            state: ComponentStates.INITIALIZE,\n            rootNodes: [],\n            nonRootCompNodes: [],\n            refs: null,\n            relatedRefs: null,\n            updateNextMap: null,\n            compStylePid: null,\n            deregDOM: null,\n            deregI18N: null\n        };\n    }\n    static create(attrs) {\n        return (new this(attrs))[$$].proxy;\n    }\n    /**\n     * Helper function to add i18n LOCALE_CHANGE listener.\n     * Return deregister function which will remove event listener.\n     * If you do dot call deregister function, it will be auto called when component is destroied.\n     * @param {Function} listener listener bind to LOCALE_CHANGE event.\n     * @param {Boolean} immediate call listener immediately, useful for component property initialize\n     * @returns {Function} deregister function to remove listener\n     */\n    __i18nWatch(listener, immediate) {\n        let deregs = this[__].deregI18N;\n        if (!deregs) {\n            this[__].deregI18N = deregs = [];\n        }\n        const unwatcher = i18nService.watch(() => {\n            // bind component to listener's function context.\n            listener.call(this);\n        }, immediate);\n        const deregister = () => {\n            unwatcher();\n            arrayRemove(deregs, deregister);\n        };\n        deregs.push(deregister);\n        return deregister;\n    }\n    /**\n     * Helper function to add dom event listener.\n     * Return deregister function which will remove event listener.\n     * If you do dot call deregister function, it will be auto called when component is destroied.\n     * @param {Boolean|Object} capture\n     * @returns {Function} deregister function to remove listener\n     */\n    __domAddListener($el, eventName, listener, capture) {\n        let deregs = this[__].deregDOM;\n        if (!deregs) {\n            this[__].deregDOM = deregs = [];\n        }\n        const lisDeregister = registerEvent($el, eventName, $event => {\n            // bind component to listener's function context.\n            listener.call(this, $event);\n        }, capture);\n        const deregister = () => {\n            lisDeregister();\n            arrayRemove(deregs, deregister);\n        };\n        deregs.push(deregister);\n        return deregister;\n    }\n    __domPassListeners(ignoredEventNames, targetEl) {\n        if (this[__].state !== ComponentStates.RENDERED) {\n            throw new Error('domPassListeners must be applied to component which is rendered.');\n        }\n        const lis = this[MESSENGER_LISTENERS];\n        if (!lis || lis.size === 0) {\n            return;\n        }\n        if (ignoredEventNames && !isArray(ignoredEventNames)) {\n            targetEl = ignoredEventNames;\n            ignoredEventNames = null;\n        }\n        else if (!targetEl) {\n            targetEl = this.__firstDOM;\n        }\n        if (targetEl.nodeType !== Node.ELEMENT_NODE) {\n            return;\n        }\n        lis.forEach((handlers, eventName) => {\n            if (ignoredEventNames && ignoredEventNames.indexOf(eventName) >= 0) {\n                return;\n            }\n            handlers.forEach(handler => {\n                const { opts, fn } = handler;\n                this.__domAddListener(targetEl, eventName, (handler.opts && (handler.opts.stop || handler.opts.prevent)\n                    ? function ($evt) {\n                        opts.stop && $evt.stopPropagation();\n                        opts.prevent && $evt.preventDefault();\n                        // this.domAddListener 会将 this 变成当前组件。所以需要显式地使用 fn.call(this) 来传递组件。\n                        fn.call(this, $evt);\n                    } : fn), handler.opts);\n            });\n        });\n    }\n    /**\n     * Get rendered DOM Node which should be apply transition.\n     *\n     * 返回在 transition 动画时应该被应用到的 DOM 节点。\n     */\n    get __transitionDOM() {\n        const el = this[__].rootNodes[0];\n        return isComponent(el) ? el.__transitionDOM : el;\n    }\n    /**\n     * Get first rendered DOM Node after Component is rendered.\n     *\n     * 按从左往右从上到下的深度遍历，找到的第一个 DOM 节点。\n     */\n    get __firstDOM() {\n        const el = this[__].rootNodes[0];\n        return isComponent(el) ? el.__firstDOM : el;\n    }\n    /**\n     * Get last rendered DOM Node after Component is rendered.\n     *\n     * 按从右往左，从上到下的深度遍历，找到的第一个 DOM 节点（相对于从左到右的顺序是最后一个 DOM 节点）。\n     */\n    get __lastDOM() {\n        const rns = this[__].rootNodes;\n        const el = rns[rns.length - 1];\n        return isComponent(el) ? el.__lastDOM : el;\n    }\n    /**\n     * 对模板进行渲染的函数，也可能是渲染编译器传递进来的默认渲染函数。\n     * 如果子组件需要进行自定义的渲染行为，需要重载该函数。\n     */\n    __render() {\n        const Clazz = this.constructor;\n        let renderFn = Clazz.template; // jinge-loader 已经将 string 转成了 RenderFn，此处强制转换类型以绕开 typescript.\n        if (!renderFn && this[__].slots) {\n            renderFn = this[__].slots.default;\n        }\n        if (!isFunction(renderFn)) {\n            throw new Error(`Template of ${Clazz.name} not found. Forget static getter \"template\"?`);\n        }\n        StyleManager.add(Clazz.style); // jinge-loader 已经将 string 转成了 ComponentStyle，此处强制转换类型以绕开 typescript.\n        return renderFn(this);\n    }\n    /**\n     * Render Component to HTMLElement.\n     * This method is usually used to render the entire application.\n     * See the `bootstrap()` function in `./bootstrap.js`.\n     *\n     * By default, the target element will be replaced(that means deleted).\n     * But you can disable it by pass `replaceMode`=`false`,\n     * which means component append to target as it's children.\n     */\n    __renderToDOM(targetEl, replaceMode = true) {\n        if (this[__].state !== ComponentStates.INITIALIZE) {\n            throw new Error('component has already been rendered.');\n        }\n        const rr = assertRenderResults(this.__render());\n        StyleManager.attch();\n        if (replaceMode) {\n            replaceChildren(targetEl.parentNode, rr, targetEl);\n        }\n        else {\n            appendChildren(targetEl, rr);\n        }\n        this.__handleAfterRender();\n    }\n    __destroy(removeDOM = true) {\n        const comp = this[__];\n        if (comp.state > ComponentStates.WILLDESTROY)\n            return;\n        comp.state = ComponentStates.WILLDESTROY;\n        /*\n         * once component is being destroied,\n         *   we mark component and it's passed-attrs un-notifiable to ignore\n         *   possible messeges occurs in BEFORE_DESTROY lifecycle callback.\n         */\n        this[$$].__notifiable = false;\n        comp.passedAttrs[$$].__notifiable = false;\n        // notify before destroy lifecycle\n        // 需要注意，必须先 NOTIFY 向外通知销毁消息，再执行 BEFORE_DESTROY 生命周期函数。\n        //   因为在 BEFORE_DESTROY 里会销毁外部消息回调函数里可能会用到的属性等资源。\n        this.__notify('before-destroy');\n        this.__beforeDestroy();\n        // destroy children(include child component and html nodes)\n        this.__handleBeforeDestroy(removeDOM);\n        // clear messenger listeners.\n        super.__off();\n        // remove component style\n        StyleManager.remove(this.constructor.style);\n        // destroy attrs passed to constructor\n        comp.passedAttrs[$$].__destroy();\n        comp.passedAttrs = null;\n        // destroy view model\n        this[$$].__destroy();\n        // clear next tick update setImmediate\n        if (comp.updateNextMap) {\n            comp.updateNextMap.forEach(imm => {\n                clearImmediate(imm);\n            });\n            comp.updateNextMap = null;\n        }\n        // destroy related refs:\n        if (comp.relatedRefs) {\n            comp.relatedRefs.forEach(info => {\n                const refs = info.origin[__].refs;\n                if (!refs)\n                    return;\n                const rns = refs.get(info.ref);\n                if (isArray(rns)) {\n                    arrayRemove(rns, info.node || this);\n                }\n                else {\n                    refs.delete(info.ref);\n                }\n            });\n            comp.relatedRefs = null;\n        }\n        // clear all dom event listener and i18n watcher\n        if (comp.deregDOM) {\n            comp.deregDOM.forEach(deregFn => deregFn());\n            comp.deregDOM = null;\n        }\n        if (comp.deregI18N) {\n            comp.deregI18N.forEach(deregFn => deregFn());\n            comp.deregI18N = null;\n        }\n        // clear properties\n        comp.state = ComponentStates.DESTROIED;\n        // unlink all symbol properties. maybe unnecessary.\n        comp.rootNodes = comp.nonRootCompNodes =\n            comp.refs = comp.slots = comp.context = null;\n    }\n    __handleBeforeDestroy(removeDOM = false) {\n        this[__].nonRootCompNodes.forEach(component => {\n            // it's not necessary to remove dom when destroy non-root component,\n            // because those dom nodes will be auto removed when their parent dom is removed.\n            component.__destroy(false);\n        });\n        let $parent;\n        this[__].rootNodes.forEach(node => {\n            if (isComponent(node)) {\n                node.__destroy(removeDOM);\n            }\n            else if (removeDOM) {\n                if (!$parent) {\n                    $parent = node.parentNode;\n                }\n                $parent.removeChild(node);\n            }\n        });\n    }\n    __handleAfterRender() {\n        /*\n         * Set NOTIFIABLE=true to enable ViewModel notify.\n         * Don't forgot to add these code if you override HANDLE_AFTER_RENDER\n         */\n        this[__].passedAttrs[$$].__notifiable = true;\n        this[$$].__notifiable = true;\n        this[__].rootNodes.forEach(n => {\n            if (isComponent(n))\n                n.__handleAfterRender();\n        });\n        this[__].nonRootCompNodes.forEach(n => {\n            if (isComponent(n))\n                n.__handleAfterRender();\n        });\n        this[__].state = ComponentStates.RENDERED;\n        this[__].contextState = this[__].contextState === ContextStates.TOUCHED ? ContextStates.TOUCHED_FREEZED : ContextStates.UNTOUCH_FREEZED; // has been rendered, can't modify context\n        this.__afterRender();\n        this.__notify('after-render');\n    }\n    __updateIfNeed(handler, nextTick = true) {\n        if (this[__].state !== ComponentStates.RENDERED) {\n            return;\n        }\n        if (handler === false) {\n            return this.__update();\n        }\n        if (!isFunction(handler)) {\n            handler = this.__update;\n        }\n        if (!nextTick) {\n            handler.call(this);\n            return;\n        }\n        let ntMap = this[__].updateNextMap;\n        if (!ntMap)\n            ntMap = new Map();\n        if (ntMap.has(handler)) {\n            // already in queue.\n            return;\n        }\n        ntMap.set(handler, setImmediate(() => {\n            ntMap.delete(handler);\n            handler.call(this);\n        }));\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    __update(first) {\n        // by default, do nothing.\n    }\n    __setContext(key, value, forceOverride = false) {\n        if (this[__].contextState === ContextStates.UNTOUCH_FREEZED || this[__].contextState === ContextStates.TOUCHED_FREEZED) {\n            throw new Error('Can\\'t setContext after component has been rendered. Try put setContext code into constructor.');\n        }\n        if (this[__].contextState === ContextStates.UNTOUCH) {\n            // we copy context to make sure child component do not modify context passed from parent.\n            // we do not copy it by default until setContext function is called, because it unnecessary to waste memory if\n            // child component do not modify the context.\n            this[__].context = Object.assign({}, this[__].context);\n            this[__].contextState = ContextStates.TOUCHED; // has been copied.\n        }\n        if (key in this[__].context) {\n            // override exist may case hidden bug hard to debug.\n            // so we force programmer to pass third argument to\n            //   tell us he/she know what he/she is doing.\n            if (!forceOverride) {\n                throw new Error(`Contenxt with key: ${key.toString()} is exist. Pass third argument forceOverride=true to override it.`);\n            }\n        }\n        this[__].context[key] = value;\n    }\n    __getContext(key) {\n        return this[__].context ? this[__].context[key] : null;\n    }\n    /**\n     * This method is used for compiler generated code.\n     * Do not use it manually.\n     */\n    __setRef(ref, el, relatedComponent) {\n        let rns = this[__].refs;\n        if (!rns) {\n            this[__].refs = rns = new Map();\n        }\n        let elOrArr = rns.get(ref);\n        if (!elOrArr) {\n            rns.set(ref, el);\n        }\n        else if (isArray(elOrArr)) {\n            elOrArr.push(el);\n        }\n        else {\n            elOrArr = [elOrArr, el];\n            rns.set(ref, elOrArr);\n        }\n        const isComp = isComponent(el);\n        if (!isComp && this === relatedComponent) {\n            return;\n        }\n        /**\n         * 如果被 ref: 标记的元素（el）本身就是组件（Component）节点，\n         *   那么 el 自身就是关联组件，el 自身在被销毁时可以执行删除关联 refs 的操作；\n         * 如果 el 是 DOM 节点，则必须将它添加到关联组件（比如 <if>） relatedComponent 里，\n         *   在 relatedComponent 被销毁时执行关联 refs 的删除。\n         */\n        let rbs = (isComp ? el : relatedComponent)[__].relatedRefs;\n        if (!rbs) {\n            (isComp ? el : relatedComponent)[__].relatedRefs = rbs = [];\n        }\n        rbs.push({\n            origin: this,\n            ref,\n            node: isComp ? null : el\n        });\n    }\n    /**\n     * Get child node(or nodes) marked by 'ref:' attribute in template\n     */\n    __getRef(ref) {\n        if (this[__].state !== ComponentStates.RENDERED) {\n            // eslint-disable-next-line no-console\n            console.warn(`Warning: call __getRef before component '${this.constructor.name}' rendered will get nothing. see https://[TODO]`);\n        }\n        return this[__].refs ? this[__].refs.get(ref) : null;\n    }\n    __addStylePid(inheritIds, styleId) {\n        if (!inheritIds && !styleId)\n            return;\n        let ids = this[__].compStylePid;\n        if (!ids) {\n            ids = this[__].compStylePid = Object.create(null);\n        }\n        if (inheritIds) {\n            Object.assign(ids, inheritIds);\n        }\n        if (styleId) {\n            ids[styleId] = '';\n        }\n    }\n    /**\n     * lifecycle hook, called after rendered.\n     */\n    __afterRender() {\n        // lifecycle hook, default do nothing.\n    }\n    /**\n     * lifecycle hook, called before destroy.\n     */\n    __beforeDestroy() {\n        // lifecycle hook, default do nothing.\n    }\n}\n//# sourceMappingURL=component.js.map","export var TransitionStates;\n(function (TransitionStates) {\n    TransitionStates[TransitionStates[\"ENTERING\"] = 1] = \"ENTERING\";\n    TransitionStates[TransitionStates[\"ENTERED\"] = 2] = \"ENTERED\";\n    TransitionStates[TransitionStates[\"LEAVING\"] = 3] = \"LEAVING\";\n    TransitionStates[TransitionStates[\"LEAVED\"] = 4] = \"LEAVED\";\n})(TransitionStates || (TransitionStates = {}));\nexport function getDurationType(el) {\n    const cst = getComputedStyle(el);\n    if (cst.getPropertyValue('transition-duration') !== '0s') {\n        return 'transitionend';\n    }\n    else if (cst.getPropertyValue('animation-duration') !== '0s') {\n        return 'animationend';\n    }\n    return null;\n}\nfunction parseDuration(v) {\n    if (/ms$/.test(v)) {\n        return parseInt(v);\n    }\n    else if (/s$/.test(v)) {\n        return parseFloat(v) * 1000;\n    }\n    else {\n        return 0;\n    }\n}\nexport function getDuration(el) {\n    const cst = getComputedStyle(el);\n    let dur = cst.getPropertyValue('transition-duration');\n    if (dur !== '0s') {\n        return {\n            type: 'transitionend',\n            time: parseDuration(dur)\n        };\n    }\n    dur = cst.getPropertyValue('animation-duration');\n    if (dur !== '0s') {\n        return {\n            type: 'animationend',\n            time: parseDuration(dur)\n        };\n    }\n    return {\n        type: null,\n        time: 0\n    };\n}\n//# sourceMappingURL=transition.js.map","import {  createElement as createElement_cd786ab284ed, __ as ___cd786ab284ed } from 'jinge';\nexport default function(component) {\n  const vm_0 = component;\n  return [\n  (() => {\n    const el = createElement_cd786ab284ed(\n      \"div\",\n      component[___cd786ab284ed].compStylePid,\n      \"Hello, World\"\n    );\n    component[___cd786ab284ed].rootNodes.push(el);\n    return el;\n  })()\n  ];\n}","import { attrs as createAttrs } from '../vm';\nexport function bootstrap(ComponentClazz, dom, attrs) {\n    const bootComponent = new ComponentClazz(createAttrs(attrs || {}));\n    bootComponent.__renderToDOM(dom, dom !== document.body);\n}\n//# sourceMappingURL=bootstrap.js.map","import {\n  Component,\n  bootstrap\n} from 'jinge';\n\nimport _tpl from './app.html';\n\nclass App extends Component {\n  static get template() {\n    return _tpl;\n  }\n}\n\nbootstrap(App, document.getElementById('root-app'));\n"],"sourceRoot":""}