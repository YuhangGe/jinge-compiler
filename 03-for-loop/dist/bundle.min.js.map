{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:////Users/geyuhang/jinge/jinge-framework/src/util/type.js","webpack:////Users/geyuhang/jinge/jinge-framework/src/util/array.js","webpack:////Users/geyuhang/jinge/jinge-framework/src/util/index.js","webpack:////Users/geyuhang/jinge/jinge-framework/src/viewmodel/notify.js","webpack:////Users/geyuhang/jinge/jinge-framework/src/viewmodel/common.js","webpack:////Users/geyuhang/jinge/jinge-framework/src/viewmodel/proxy.js","webpack:////Users/geyuhang/jinge/jinge-framework/src/core/messenger.js","webpack:////Users/geyuhang/jinge/jinge-framework/src/dom/index.js","webpack:////Users/geyuhang/jinge/jinge-framework/src/core/component.js","webpack:////Users/geyuhang/jinge/jinge-framework/src/components/for.js","webpack:////Users/geyuhang/jinge/jinge-framework/src/components/if.js","webpack:///./app.html","webpack:///./index.js","webpack:////Users/geyuhang/jinge/jinge-framework/src/core/bootstrap.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","typeOf","v","isObject","isString","isArray","Array","isFunction","instanceOf","Clazz","arrayIndexOf","array","item","indexOf","description","window","assert_fail","msg","console","error","Error","startsWith","str","search","position","STR_DEFAULT","STR_EMPTY","VM_NOTIFY","VM_ON","VM_OFF","VM_CLEAR","VM_LISTENERS","VM_LISTENERS_TM","VM_LISTENERS_HANDLERS","VM_LISTENERS_CHILDREN","walkGetNode","vm","props","level","end","length","propN","node","assign","[object Object]","vmAddListener","prop","handler","split","push","vmRemoveListener","idx","splice","arrayRemove","vmClearListener","leaf","clearImm","loopClear","setImm","setImmediate","setTimeout","clearImmediate","clearTimeout","vmNotifyChanged","loopNotify","forEach","children","k","VM_PARENTS","VM_EMPTY_PARENTS","isViewModel","obj","addVMParent","parent","ps","removeVMParent","notifyPropChanged","pInfo","pVM","pName","objectPropSetHandler","target","newValType","newValIsVM","oldVal","ObjectProxyHandler","set","ArrayFns","pop","shift","unshift","reverse","sort","fill","slice","concat","map","ArrayProxyHandler","tag","fn","args","rtn","wrapViewModel","Number","isNaN","isFinite","oldLen","arrayLengthSetHandler","wrapProp","Boolean","RegExp","wrapProxy","isArr","addMessengerInterface","vmAddMessengerInterface","Proxy","plainObjectOrArray","wrapComponent","component","LISTENERS","Messenger","this","eventName","listenersMap","notifyKey","notifyArgs","listeners","notifyHelper","eventListener","me","Map","listener","onHelper","ls","clear","offHelper","delete","getParent","$ele","parentNode","setText","$element","text","textContent","createElement","attrs","$e","document","an","attrName","attrValue","setAttribute","child","appendChild","createElementWithoutAttrs","createFragment","$f","createDocumentFragment","createTextNode","createComment","data","prepareNewNode","newNode","insertBefore","$parent","referenceNode","removeChild","$child","ch","cc","addEvent","capture","addEventListener","RENDER","RENDER_TO_DOM","ARG_COMPONENTS","CLONE","DESTROY","CONTEXT","CONTEXT_STATE","ROOT_NODES","NON_ROOT_COMPONENT_NODES","REF_NODES","RELATED_VM_LISTENERS","RELATED_VM_ADD","GET_STATE_NAME","UPDATE","UPDATE_IF_NEED","STATE","STATE_INITIALIZE","STATE_RENDERED","STATE_WILLDESTROY","STATE_DESTROIED","STATE_NAMES","onAfterRender","isComponent","afterRender","component_Component","template","super","componentCtx","hook","renderFn","constructor","$targetDOM","oldNode","Node","replaceChild","removeDOM","comp","beforeDestroy","hooks","ctx","removeRootNodes","id","forceOverride","context","ref","assertRenderResults","renderResults","getFirstHtmlDOM","el","FOR_LENGTH","FOR_KEYS","FOR_KEY_NAME","KEY_INDEX","KEY_EACH","EMP_ARR","for_ForEachComponent","index","vm_218dd9ac28","each","appendRenderEach","itemRenderFn","roots","assert_vm","prepare_key","keyMap","keyName","has","renderItems","items","keys","result","tmpKeyMap","loopAppend","for_ForComponent","kn","_key","test","fn_218dd9ac28_4","loop","Function","_l","newItems","nl","ol","fd","$cmt","oldKeys","oldKeyMap","newKeys","newKeyMap","oi","ni","newRoots","oldTags","Uint8Array","oldKey","newKey","reuseEl","oldIdx","getRenderFn","acs","renderSwitch","updateSwitch","pa","isC","ne","if_IfComponent","fn_218dd9ac28_1","expect","_e","app","vm_0","vm_1","fn_0","numbers","style","persons","AUTO_INC","Component","dom","body","bootComponent","bootstrap","INC","setInterval","Date","now","toString","tmp","getElementById"],"mappings":"aACA,IAAAA,EAAA,GAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAC,QAGA,IAAAC,EAAAJ,EAAAE,GAAA,CACAG,EAAAH,EACAI,GAAA,EACAH,QAAA,IAUA,OANAI,EAAAL,GAAAM,KAAAJ,EAAAD,QAAAC,IAAAD,QAAAF,GAGAG,EAAAE,GAAA,EAGAF,EAAAD,QAKAF,EAAAQ,EAAAF,EAGAN,EAAAS,EAAAV,EAGAC,EAAAU,EAAA,SAAAR,EAAAS,EAAAC,GACAZ,EAAAa,EAAAX,EAAAS,IACAG,OAAAC,eAAAb,EAAAS,EAAA,CAA0CK,YAAA,EAAAC,IAAAL,KAK1CZ,EAAAkB,EAAA,SAAAhB,GACA,oBAAAiB,eAAAC,aACAN,OAAAC,eAAAb,EAAAiB,OAAAC,YAAA,CAAwDC,MAAA,WAExDP,OAAAC,eAAAb,EAAA,cAAiDmB,OAAA,KAQjDrB,EAAAsB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAArB,EAAAqB,IACA,EAAAE,EAAA,OAAAF,EACA,KAAAE,GAAA,iBAAAF,QAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFA1B,EAAAkB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,UACzC,EAAAE,GAAA,iBAAAF,EAAA,QAAAM,KAAAN,EAAArB,EAAAU,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAzB,EAAA6B,EAAA,SAAA1B,GACA,IAAAS,EAAAT,KAAAqB,WACA,WAA2B,OAAArB,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAH,EAAAU,EAAAE,EAAA,IAAAA,GACAA,GAIAZ,EAAAa,EAAA,SAAAiB,EAAAC,GAAsD,OAAAjB,OAAAkB,UAAAC,eAAA1B,KAAAuB,EAAAC,IAGtD/B,EAAAkC,EAAA,GAIAlC,IAAAmC,EAAA,kCClFO,SAAAC,EAAAC,GACP,cAAAA,EAGO,SAAAC,EAAAD,GACP,iBAAAD,EAAAC,GAEO,SAAAE,EAAAF,GACP,iBAAAD,EAAAC,GAUO,SAAAG,EAAAH,GACP,OAAAI,MAAAD,QAAAH,GAGO,SAAAK,EAAAL,GACP,mBAAAD,EAAAC,GAGO,SAAAM,EAAAN,EAAAO,GACP,OAAAP,aAAAO,EC1BO,SAAAC,EAAAC,EAAAC,GACP,OAAAD,EAAAE,QAAAD,GCGO,SAAA5B,EAAA8B,GACP,OAAAC,OAAA/B,OAAA8B,GAGO,SAAAE,EAAAC,GAEP,MADAA,GAAAC,QAAAC,MAAAF,GACA,IAAAG,MAAA,kBAGO,SAAAC,EAAAC,EAAAC,EAAAC,EAAA,GACP,OAAAF,EAAAD,WAAAE,EAAAC,UAeO,MAAAC,EAAA,UAEAC,EAAA,QCxBA,MAAAC,EAAkB3C,IAClB4C,EAAc5C,IACd6C,EAAe7C,IACf8C,EAAiB9C,IACjB+C,EAAqB/C,IACrBgD,EAAwBhD,IACxBiD,EAA8BjD,IAC9BkD,EAA8BlD,IAGrC,SAAAmD,EAAAC,EAAAC,EAAAC,EAAA,EAAA/C,GAAA,GACA,MAAAgD,EAAAF,EAAAG,OAAA,EACA,GAAAD,EAAA,cACA,MAAAE,EAAA,GAAAJ,EAAAC,GACA,GAAMjB,EAAUoB,EAAA,KAEhB,OADAvB,QAAAC,MAAA,oGACA,KAEA,IAAAuB,EAAAN,EAAAK,GACA,IAAAC,EAAA,CACA,IAAAnD,EASA,YAPAmD,EAAAN,EAAAK,GAAA9D,OAAAY,OAAA,MACAZ,OAAAgE,OAAAD,EAAA,CACAE,CAAAZ,GAAA,KACAY,CAAAX,GAAA,GACAW,CAAAV,GAAAvD,OAAAY,OAAA,QAMA,OAAAgD,IAAAD,EACAI,EAEAP,EAAAO,EAAAR,GAAAG,EAAAC,EAAA,EAAA/C,GAIO,SAAAsD,EAAAT,EAAAU,EAAAC,GACP,MAAAV,EAAgBhC,EAAOyC,OAAAE,MAAA,KACvB,OAAAX,EAAAG,OAAA,OACA,MAAAE,EAAAP,EAAAC,EAAAL,GAAAM,EAAA,MFtCO,IAAA1B,EAAAC,EACPF,EADOC,EEuCc+B,EAAAT,GFvCdrB,EEuCcmC,IFrCrB,GACApC,EAAAsC,KAAArC,GEuCO,SAAAsC,EAAAd,EAAAU,EAAAC,GACP,MAAAV,EAAgBhC,EAAOyC,OAAAE,MAAA,KACvB,OAAAX,EAAAG,OAAA,OACA,MAAAE,EAAAP,EAAAC,EAAAL,GAAAM,EAAA,MACAK,IACAK,EFtDO,SAAApC,EAAAC,GACP,MAAAuC,EAAAzC,EAAAC,EAAAC,GACAuC,EAAA,GACAxC,EAAAyC,OAAAD,EAAA,GEoDOE,CAAWX,EAAAT,GAAAc,GADlBL,EAAAT,GAAAO,OAAA,GAIO,SAAAc,EAAAlB,IACP,SAAAM,GACA,UAAAI,KAAAJ,EAAA,CACA,MAAAa,EAAAb,EAAAI,GACA,KAAAd,KAAAuB,GAAA,OACAA,EAAAvB,KACAwB,EAAAD,EAAAvB,IACAuB,EAAAvB,GAAA,MAEAuB,EAAAtB,GAAAO,OAAA,EACAc,EAAAC,EAAArB,IACAqB,EAAArB,GAAA,KACAQ,EAAAI,GAAA,MAGAW,CAAArB,EAAAL,IAYA,MAAA2B,EAAA3C,OAAA4C,cAAA5C,OAAA6C,WACAJ,EAAAzC,OAAA8C,gBAAA9C,OAAA+C,aAkBO,SAAAC,EAAA3B,EAAAU,GACP,MAAAT,EAAgBhC,EAAOyC,OAAAE,MAAA,KACvB,OAAAX,EAAAG,OAAA,OACA,MAAAE,EAAAP,EAAAC,EAAAL,GAAAM,EAAA,MACAK,GApBA,SAAAsB,EAAAtB,GACAA,EAAAV,KACAwB,EAAAd,EAAAV,IACAU,EAAAV,GAAA,MAEAU,EAAAT,GAAAO,OAAA,IACAE,EAAAV,GAAA0B,EAAA,KACAhB,EAAAV,GAAA,KACAU,EAAAT,GAAAgC,QAAAlB,WAGA,MAAAmB,EAAAxB,EAAAR,GACA,UAAAiC,KAAAD,EACAF,EAAAE,EAAAC,IAQAH,CAAAtB,GC3GO,MAAA0B,EAAmBpF,IACnBqF,EAAA,GACA,SAAAC,EAAAC,GACP,cAAAA,GAAyBpE,EAAQoE,IAAAH,KAAAG,EAO1B,SAAAC,EAAApC,EAAAqC,EAAA3B,GACP,MAAA4B,EAAAtC,EAAAgC,GACA,QAAAnG,EAAA,EAAgBA,EAAAyG,EAAAlC,OAAevE,IAC/B,GAAAyG,EAAAzG,GAAA,KAAAwG,GAAAC,EAAAzG,GAAA,KAAA6E,EAAA,OAEA4B,EAAAzB,KAAA,CAAAwB,EAAA3B,IAGO,SAAA6B,EAAAvC,EAAAqC,EAAA3B,GACP,MAAA4B,EAAAtC,EAAAgC,GACA,QAAAnG,EAAA,EAAgBA,EAAAyG,EAAAlC,OAAevE,IAC/B,GAAAyG,EAAAzG,GAAA,KAAAwG,GAAAC,EAAAzG,GAAA,KAAA6E,EAEA,YADA4B,EAAAtB,OAAAnF,EAAA,GCVA,SAAA2G,EAAAxC,EAAAU,GACMnB,KAASS,GACfA,EAAOT,GAASmB,GAEhBV,EAAKgC,GAAUH,QAAAY,IACf,MAAAC,EAAAC,GAAAF,EACAD,EACAE,EACMzE,EAAOyC,GAAA,CAAAiC,KAAAjC,GAAA,CAAAiC,EAAAjC,MAKb,SAAAkC,EAAAC,EAAAnC,EAAA5D,GACA,IDnBSkB,EADFF,ECoBY4C,IDnBMzB,EAAUnB,EAAA,KCqBnC,OADA+E,EAAAnC,GAAA5D,GACA,EDtBO,IAAAgB,ECwBP,MAAAgF,EAAqBjF,EAAMf,GAC3BiG,EAAqBb,EAAWpF,GAChC,UAAAA,GAAA,WAAAgG,IAAAC,EACA,UAAA/D,MAAA,8DAGA,MAAAgE,EAAAH,EAAAnC,GASA,OARMwB,EAAWc,IACbT,EAAcS,EAAAH,EAAAnC,GAElBmC,EAAAnC,GAAA5D,EACAiG,GACIX,EAAWtF,EAAA+F,EAAAnC,GAEf8B,EAAAK,EAAAnC,IACA,EAwBO,MAAAuC,EAAA,CACPC,IAAAN,GAQAO,EAAA,CACAtC,KAAA,EACAuC,IAAA,EACAC,MAAA,EACAC,QAAA,EACAtC,OAAA,EACAuC,QAAA,EACAC,KAAA,EACAC,KAAA,EACAC,MAAA,EACAC,OAAA,EACAC,IAAA,GAGOC,EAAA,CACPrD,IAAAR,EAAAU,GACA,GAAAA,KAAAyC,EAAA,CACA,MAAAW,EAAAX,EAAAzC,GACAqD,EAAA/D,EAAAU,GACA,mBAAAsD,GACA,MAAAC,EAAAF,EAAA/H,KAAAgE,KAAAgE,GAIA,OAHA,EAAAF,GAAA,GACA9D,EAAagC,GAAUH,QAAAS,GAAAE,EAAAF,EAAA,GAAAA,EAAA,MAEvB,EAAAwB,GAAA,GAA6B7F,EAAOgG,MAAWjC,KAAUiC,GACzDC,EAAAD,GAEAA,GAIA,OAAAjE,EAAAU,IAGAwC,IAhEA,SAAAL,EAAAnC,EAAA5D,GACA,iBAAA4D,EAMA,SAAAmC,EAAA/F,GACA,GLpDA,WAAAe,EADOC,EKqDQhB,ILpDfqH,OAAAC,MAAAtG,KAAAqG,OAAAE,SAAAvG,GKoDe,UAAAkB,MAAA,uDLrDR,IAAAlB,EKsDP,MAAAwG,EAAAzB,EAAAzC,OACA,GAAAkE,EAAAxH,EAAA,QAAAjB,EAAAiB,EAAwCjB,EAAAyI,EAAYzI,IAAA,CACpD,MAAAiC,EAAA+E,EAAAhH,GACIqG,EAAWpE,IAAOyE,EAAczE,EAAA+E,EAAAhH,GAMpC,OAJAgH,EAAAzC,OAAAtD,EACAwH,IAAAxH,GACA+F,EAAWb,GAAUH,QAAAS,GAAAE,EAAAF,EAAA,GAAAA,EAAA,MAErB,EAhBAiC,CAAA1B,EAAA/F,GAEA8F,EAAAC,EAAAnC,EAAA5D,KAgEA,SAAA0H,EAAAxE,EAAAU,GACA,MAAA5C,EAAAkC,EAAAU,GACA,OAAA5C,GAA0B,WAAND,EAAMC,IAAoBkE,KAAUlE,IAClDM,EAAUN,EAAA2G,UAAgBrG,EAAUN,EAAA4G,QAC1C5G,EAAMkE,GAAcC,GAGpBjC,EAAAU,GAAAwD,EAAApG,GACEsE,EAAWtE,EAAAkC,EAAAU,KAEb,SAAAiE,EAAA3E,EAAA4E,EAAAC,GAKA,OAJA7E,EAAKgC,GAAU,GACf6C,GFtDO,SAAA7E,GACPL,KAAAK,IACAA,EAAAL,GAAA,GACAK,EAAAR,GAAA,EAAAkB,EAAAC,IAAAF,EAAAT,EAAAU,EAAAC,IACAX,EAAAP,GAAA,EAAAiB,EAAAC,IAAAG,EAAAd,EAAAU,EAAAC,IACAX,EAAAT,GAAAmB,IAAAiB,EAAA3B,EAAAU,IACAV,EAAAN,GAAA,KAAAwB,EAAAlB,KEiDI8E,CAAuB9E,GAE3B,IAAA+E,MAAA/E,EAAA4E,EAAAf,EAAAZ,GAGO,SAAAiB,EAAAc,EAAAH,GAAA,GACP,UAAAG,EAAA,OAAAA,EACA,GAAY,WAANnH,EAAMmH,GAkBZ,OAAAA,EAhBA,GAAQhD,KAAUgD,EAAA,OAAAA,EAElB,IAAQ5G,EAAU4G,EAAAP,WAAiCrG,EAAU4G,EAAAN,QAExD,IAAUzG,EAAO+G,GAAA,CACtB,QAAAnJ,EAAA,EAAoBA,EAAAmJ,EAAA5E,OAA+BvE,IACnD2I,EAAAQ,EAAAnJ,GAEA,OAAA8I,EAAAK,GAAA,EAAAH,GAEA,UAAA9C,KAAAiD,EACAR,EAAAQ,EAAAjD,GAEA,OAAA4C,EAAAK,GAAA,EAAAH,GAVAG,EAAyBhD,GAAcC,EAiBhC,SAAAgD,EAAAC,GACP,WAAAH,MAAAG,EAAAjC,GClKO,MAAAkC,EAAkBvI,IA+ClB,MAAAwI,EACP5E,cACA6E,KAAAF,GAAA,KAEA3E,OAAA8E,KAAAtB,IAjDO,SAAAuB,EAAAC,KAAAC,GACP,IAAAF,EAAA,OACA,MAAAG,EAAAH,EAAA7I,IAAA8I,GACAE,GACAA,EAAA7D,QAAAlB,QAAA8E,IA8CAE,CAAAN,KAAAF,GAAAG,KAAAtB,GAEAxD,GAAA8E,EAAAM,GACA,MAAAC,EAAAR,KACAQ,EAAAV,KACAU,EAAAV,GAAA,IAAAW,KAhDO,SAAAP,EAAAC,EAAAO,GACP,IAAAL,EAAAH,EAAA7I,IAAA8I,GACAE,IACAA,EAAA,GACAH,EAAArC,IAAAsC,EAAAE,IAEAA,EAAAjH,QAAAsH,GAAA,GACAL,EAAA7E,KAAAkF,GA2CAC,CAAAH,EAAAV,GAAAG,EAAAM,GAEApF,IAAA8E,EAAAM,IAzCO,SAAAL,EAAAC,EAAAO,GACP,IAAAR,EAAA,OACA,IAAAC,EAGA,OAFAD,EAAA1D,QAAAoE,KAAA7F,OAAA,QACAmF,EAAAW,QAGA,MAAAR,EAAAH,EAAA7I,IAAA8I,GACA,IAAAE,EAAA,OACA,IAAAK,EAEA,YADAL,EAAAtF,OAAA,GAGA,MAAAW,EAAA2E,EAAAjH,QAAAsH,GACAhF,EAAA,GACA2E,EAAA1E,OAAAD,EAAA,GA2BAoF,CAAAd,KAAAF,GAAAG,EAAAM,GAEApF,MAAA8E,GA1BO,IAAAC,EAAAC,EAAAD,EA2BPF,KAAAF,GA3BOK,EA2BPF,EA1BAC,IACAC,EAGAD,EAAAa,OAAAZ,GAFAD,EAAAW,UCxCO,SAAAG,EAAAC,GACP,OAAAA,EAAAC,WAGO,SAAAC,EAAAC,EAAAC,GACPD,EAAAE,YAAAD,EAWO,SAAAE,EAAA9C,EAAA+C,KAAA/E,GACP,MAAAgF,EAAAC,SAAAH,cAAA9C,GACA,GAAA+C,EAAA,UAAAG,KAAAH,EAVOP,EAWPQ,EAXOG,EAWPD,EAXOE,EAWPL,EAAAG,GAVAV,EAAAa,aAAAF,EAAAC,GADO,IAAAZ,EAAAW,EAAAC,EAcP,OADApF,EAAAD,QAAAuF,GAAAC,GAAAP,EAAAM,IACAN,EAGO,SAAAQ,EAAAxD,KAAAhC,GACP,OAAA8E,EAAA9C,EAAA,QAAAhC,GAGO,SAAAyF,EAAAzF,GACP,MAAA0F,EAAAT,SAAAU,yBAEA,OADA3F,KAAAD,QAAA3F,GAAAmL,GAAAG,EAAAtL,IACAsL,EAGO,SAAAE,EAAAhB,GACP,OAAAK,SAAAW,eAAAhB,GASO,SAAAiB,EAAAC,GACP,OAAAb,SAAAY,cAAAC,GAGA,SAAAC,EAAAC,GACA,OAAO7J,EAAO6J,GACd,IAAAA,EAAA1H,OAAA,KACA,IAAA0H,EAAA1H,OAAA0H,EAAA,GAEAP,EAAAO,GAJcA,EAeP,SAAAC,GAAAC,EAAAF,EAAAG,IACPH,EAAAD,EAAAC,KAGAE,EAAAD,aAAAD,EAAAG,GAeO,SAAAC,GAAAF,EAAAG,GACPH,EAAAE,YAAAC,GAGO,SAAAd,GAAAW,KAAAlG,GACPA,EAAAD,QAAAuG,IACA,GAAQnK,EAAOmK,GACf,OAAAA,EAAAvG,QAAAwG,GAAAhB,GAAAW,EAAAK,IAEQrK,EAAQoK,KAChBA,EAAAV,EAAAU,IAEAJ,EAAAX,YAAAe,KAmBO,SAAAE,GAAA7B,EAAAnB,EAAA3E,EAAA4H,GAAA,GACP9B,EAAA+B,iBAAAlD,EAAA3E,EAAA4H,GCvF+B3L,IAAxB,MACA6L,GAAe7L,IACf8L,GAAsB9L,IACtB+L,GAAuB/L,IACvBgM,GAAchM,IACdiM,GAAgBjM,IAChBkM,GAAgBlM,IAChBmM,GAAsBnM,IACtBoM,GAAmBpM,IACnBqM,GAAiCrM,IACjCsM,GAAkBtM,IAClBuM,GAA6BvM,IAC7BwM,GAAuBxM,IACvByM,GAAuBzM,IACvB0M,GAAe1M,IACf2M,GAAuB3M,IACvB4M,GAAc5M,IACd6M,GAAA,EACAC,GAAA,EACAC,GAAA,EACAC,GAAA,EACAC,GAAA,CACP,mDAQO,SAAAC,GAAAxJ,GACPyJ,GAAAzJ,KACAA,EAAA0I,IAAAnH,QAAAiI,IACAxJ,EAAA2I,IAAApH,QAAAiI,IACAxJ,EAAAkJ,IAAAE,GACApJ,EAAAyI,KAAA,EACAzI,EAAA0J,eAcO,MAAMC,WAAkB7E,EAI/B8E,sBACA,YAEA1J,YAAAqG,GACA,GAAAA,cAEK,GAAU1I,EAAU0I,GACzBA,EAAA,CACArG,CAAAmI,IAAA,CACAnI,CAAWnB,GAAWwH,SAGjB,GAAU9I,EAAQ8I,MAAa7E,KAAU6E,GAC9C,UAAA7H,MAAA,oEAEAmL,QACA9E,KAASrD,GAAcC,EACvBoD,KAAS1F,GAAY,GACrB0F,KAAAyD,IAAAjC,IAAAiC,IAAA,KACAzD,KAAA0D,IAAA,EACA1D,KAAAsD,IAAA9B,KAAA8B,KAAA,KACAtD,KAAAmE,IAAAC,GASApE,KAAA2D,IAAA,GAkBA3D,KAAA4D,IAAA,GAIA5D,KAAA6D,IAAA,GAgCA7D,KAAA8D,IAAA,IAAArD,IAEAtF,CAAGhB,GAAKkB,EAAAC,EAAAyJ,GACJ3J,EAAa4E,KAAA3E,EAAAC,GACjByJ,GAAAL,GAAAK,QAAA/E,MACA+E,EAAAhB,IAAA/D,KAAA3E,EAAAC,GAEAH,CAAA4I,IAAApJ,EAAAU,EAAAC,GACA,IAAA0J,EAAAhF,KAAA8D,IAAAzM,IAAAsD,GACAqK,IACAA,EAAA,GACAhF,KAAA8D,IAAAjG,IAAAlD,EAAAqK,IAEAA,EAAAxJ,KAAA,CAAAH,EAAAC,IAEAH,CAAGf,GAAMiB,EAAAC,GACT,OAAWG,EAAgBuE,KAAA3E,EAAAC,GAE3BH,CAAGd,KACCwB,EAAemE,MAEnB7E,CAAGjB,GAASmB,GACZ,OAAWiB,EAAe0D,KAAA3E,GAE1BF,CAAAoI,MACA,UAAA5J,MAAA,mBAEAwB,CAAAiI,MACA,IAAA6B,EAAAjF,KAAAkF,YAAAL,SAKA,OAJAI,GAAAjF,KAAAsD,MACA2B,EAAAjF,KAAAsD,IAAsCtJ,IAE7BlB,EAAUmM,IAAY1L,IAC/B0L,EAAAjF,MAEA7E,CAAAkI,IAAA8B,GRjLO,IOiCAxC,EAAAF,EAAA2C,EPhCPrM,EQiLkBoM,ERjLlBE,OQiLgC9L,IAChCyG,KAAAmE,MAAAC,IACM7K,IDnJCoJ,ECqJU3B,EAASmE,GDrJnB1C,ECqJmBzC,KAAAoD,MDrJnBgC,ECqJmBD,GDpJ1B1C,EAAAD,EAAAC,KAGAE,EAAA2C,aAAA7C,EAAA2C,GCkJAX,GAAAzE,MAEA7E,CAAAqI,IAAA+B,GAAA,GAyEO,IAAAC,EAxEPxF,KAAAmE,IAAAG,KACAtE,KAAAmE,IAAAG,GACAtE,KAAAyF,gBACAX,MAAAjE,QACAb,KAAS3F,MAoEFmL,EAnEPxF,MAoEA8D,IAAAtH,QAAA,CAAAkJ,EAAAC,KACAD,EAAAlJ,QAAAwI,IACAW,EAAUvL,GAAM4K,EAAA,GAAAA,EAAA,MAEhBU,EAAA3K,OAAA,IAEAyK,EAAA1B,IAAAjD,QAzEAb,KAAA4D,IAAApH,QAAAqD,IACAA,EAAA2D,KAAA,KAEAxD,KAAA2D,IAAAnH,QAAAvB,IACAyJ,GAAAzJ,MAAAuI,KAAA,KAEAxD,KAAAmE,IAAAI,GACAvE,KAAA8D,IACA9D,KAAA4D,IACA5D,KAAA6D,IACA7D,KAAAsD,IACAtD,KAAAyD,IAAA,KAEA8B,GAlKA,SAAAK,EAAA/F,EAAA8C,GACA9C,EAAA8D,IAAAnH,QAAAvB,IACAyJ,GAAAzJ,GAAA2K,EAAA3K,EAAA0H,IAEAA,MAA8B3B,EAAS/F,IACjC4H,GAAWF,EAAA1H,MAGjB4E,EAAA8D,IAAA,KA2JAiC,CAAA5F,OAGA7E,CAAA+I,MACAlE,KAAAmE,MAAAE,IACArE,KAAAiE,MAGA9I,CAAA8I,MACA,UAAAtK,MAAA,mBAEAwB,CAAA6I,MACA,OAAAQ,GAAAxE,KAAAmE,KAEAhJ,WAAA0K,EAAAF,EAAAG,GAAA,GACA,GAAA9F,KAAA0D,IAAA,EACA,UAAA/J,MAAA,iGAjMA,IAAAoM,EA8MA,GAXA,IAAA/F,KAAA0D,MAIA1D,KAAAyD,IAGAzD,KAAAyD,KA1MAsC,EA0MA/F,KAAAyD,KAxMAvM,OAAAgE,OAAA,GAAyB6K,GADzB,KAuMA/F,KAAAyD,IAAA,GAIAzD,KAAA0D,IAAA,GAEAmC,KAAA7F,KAAAyD,MAIAqC,EAAA,UAAAnM,2BAA+DkM,sEAE/D7F,KAAAyD,IAAAoC,GAAAF,EAEAxK,WAAA0K,GACA,OAAA7F,KAAAyD,KACAzD,KAAAyD,IAAAoC,IADA,KAGA1K,SAAA6K,GACA,OAAAhG,KAAA6D,IAAAmC,IAAA,KAEA7K,eAGAA,kBAeO,SAAAuJ,GAAA7N,GACP,OAASkC,EAAUlC,EAAI+N,IAGhB,SAAAqB,GAAAC,GACP,IAAOtN,EAAOsN,IAAA,IAAAA,EAAAnL,OACd,UAAApB,MAAA,wCAEA,OAAAuM,EAGO,SAAAC,GAAAC,GACP,MAAAvO,EAAAuO,EAAAzC,IAEA,OADA9L,GAAA,IAAAA,EAAAkD,QAA8BxB,IAC9BmL,GAAA7M,EAAA,IAAAsO,GAAAtO,EAAA,IACAA,EAAA,GClRO,MAAAwO,GAAmB9O,EAAM,UACzB+O,GAAiB/O,EAAM,QACvBgP,GAAqBhP,EAAM,OAElCiP,GAAA,QACAC,GAAA,OACAC,GAAA,GAGO,MAAMC,WAAyB/B,GACtCzJ,YAAA8J,EAAA9L,EAAAyN,GACA9B,MAAAG,GACA,MAAA4B,EAA0BjH,EAAwBI,MAGlD,OAFA6G,EAAAC,KAAA3N,EACA0N,EAAAD,QACAC,EAEA1L,CAAGiI,MACH,MAAA6B,EAAAjF,KAA0BsD,IAAgBtJ,GAE1C,OADAiL,GAAmB1L,IACnB0L,EAAAjF,OAKA,SAAA+G,GAAA5N,EAAA3C,EAAAwQ,EAAAC,GACA,MAAAb,EAAA,IAAiBO,GAAgBK,EAAA7N,EAAA3C,GAEjC,OADAyQ,EAAAzL,KAAA4K,GACAA,EAAYhD,MAGZ,SAAA8D,GAAA/N,EAAA3C,GACA,UAAA2C,GAAuBT,EAAQS,MAAYwD,KAAUxD,GACrD,UAAAQ,4BAA0CnD,yBAI1C,SAAA2Q,GAAAhO,EAAA3C,EAAA4Q,EAAAC,GACA,MAAAtP,EAAAsP,IAAAZ,GAAAtN,EAAAkO,EAAAlO,GAKA,OAJAiO,EAAAE,IAAAvP,IACA0B,QAAAC,4BAAwClD,WAAW4Q,EAAA/P,IAAAU,sBAAmCA,+CAEtFqP,EAAAvJ,IAAA9F,EAAAvB,GACAuB,EAEA,SAAAwP,GAAAC,EAAAR,EAAAC,EAAAQ,EAAAJ,GACA,MAAAK,EAAA,GACAC,EAAA,IAAAlH,IAQA,OAPA+G,EAAAhL,QAAA,CAAArD,EAAA3C,KACA0Q,GAAA/N,EAAA3C,GACA6Q,IAAAb,IACAiB,EAAAjM,KAAA2L,GAAAhO,EAAA3C,EAAAmR,EAAAN,IAEAK,EAAAlM,QAAAuL,GAAA5N,EAAA3C,EAAAwQ,EAAAC,MAEAS,EAEA,SAAAE,GAAAjF,EAAAyD,GACAA,EAAKzC,IAAUnH,QAAAvB,IACPyJ,GAAWzJ,GACnB2M,GAAAjF,EAAA1H,GAEM+G,GAAWW,EAAA1H,KAIV,MAAM4M,WAAqBjD,GAClCzJ,YAAAqG,GACA,MAAAsG,EAAAtG,EAAAuG,KACA,IAAAD,EACA,UAAAnO,MAAA,oCACA,IAAAmO,IAAA,8BAAAE,KAAAF,GACA,UAAAnO,MAAA,yDAEAmL,MAAAtD,GACA,MAAAqF,EAA0BjH,EAAwBI,MAClDiI,EAAA,KACApB,EAAAqB,KAAA1G,EAAA0G,MAUA,OARAD,IACAzG,EAAUrH,GAAgB,OAAA8N,GAC1BpB,EAAAN,IAAA/E,EAAAuG,KACAlB,EAAAR,IAAA,EACAQ,EAAAP,IAAA,KACAwB,IAAAtB,IAAAsB,IAAArB,KACAI,EAAAN,IAAA,IAAA4B,SAAA1B,aAAqEqB,MAErEjB,EAEAqB,WACA,OAAAlI,KAAAoI,GAEAF,SAAAzP,GACAuH,KAAAoI,GAAA3P,EACAuH,KAASkE,MAET/I,CAAGiI,MACH,MAAA6D,EAAAjH,KAAuB2D,IACvBqD,EAAAhH,KAA8BsD,IAActD,KAASsD,IAAgBtJ,GAAW,KAChF,IAAAgN,EAEA,OADAC,EAAAzL,KAAiB8G,EAAcrI,IAC/BgN,EAEA,MAAAO,EAAAxH,KAAAkI,KACAb,EAAArH,KAAAuG,IAEA,OADAc,IAAAb,KAAAxG,KAAAsG,IAAA,IACS1N,EAAO4O,IAAA,IAAAA,EAAAzM,QAIhBiF,KAAAqG,IAAAmB,EAAAzM,OACAwM,GAAAC,EAAAR,EAAAC,EAAAjH,KAAAsG,IAAAe,KAJAJ,EAAAzL,KAAiB8G,EAAcrI,IAC/BgN,GAKA9L,CAAG8I,MACH,MAAA+C,EAAAhH,KAA8BsD,IAActD,KAASsD,IAAgBtJ,GAAW,KAChF,IAAAgN,EAAA,OAEA,MAAAqB,EAAAxP,MAAAD,QAAAoH,KAAAkI,MAAAlI,KAAAkI,KAAAxB,GACAO,EAAAjH,KAAuB2D,IACvB2E,EAAAD,EAAAtN,OACAwN,EAAAvI,KAAAqG,IAEA,OAAAiC,GAAA,IAAAC,EAAA,OAEA,MAAAlB,EAAArH,KAAAuG,IAEA,OAAA+B,GAAAC,EAAA,GACA,MAAAC,EAAiBrC,GAAec,EAAA,IAChCwB,EAAmBnG,EAAcrI,GAC3ByI,GAAa1B,EAASwH,GAAAC,EAAAD,GAC5B,QAAAhS,EAAA,EAAoBA,EAAA+R,EAAQ/R,IAC5ByQ,EAAAzQ,GAAiBgN,MAQjB,OANAyD,EAAAlM,OAAA,EACAkM,EAAA,GAAAwB,EACApB,IAAAb,KACAxG,KAAAsG,IAAAvL,OAAA,QAEAiF,KAAAqG,IAAA,GAIArG,KAAAqG,IAAAiC,EACA,MAAA3F,EAAoB3B,EAAS,IAAAuH,EAAAtB,EAAA,GAAuBd,GAAec,EAAA,KAMnE,GALA,IAAAsB,IACM1F,GAAWF,EAAAsE,EAAA,IACjBA,EAAAlM,OAAA,GAGAsM,IAAAb,GAAA,CACA,IAAArE,EAAA,KACA,QAAA3L,EAAA,EAAoBA,EAAA8R,EAAQ9R,IAC5B,GAAAA,EAAA+R,EAAA,CACA,MAAAnC,EAAAa,EAAAzQ,GACA6R,EAAA7R,KAAA4P,EAAAU,OACAV,EAAAU,KAAAuB,EAAA7R,SAGA2L,MAAwBD,KACdF,GAAWG,KAAA4E,GAAAsB,EAAA7R,KAAAwQ,EAAAC,IAMrB,GAHA9E,GACQH,GAAWW,EAAAR,GAEnBmG,GAAAC,EAAA,OACA,QAAA/R,EAAA8R,EAAqB9R,EAAA+R,EAAQ/R,IAC7ByQ,EAAAzQ,GAAiBgN,MAGjB,YADAyD,EAAAtL,OAAA2M,GAIA,MAAAI,EAAA1I,KAAAsG,IACA,OAAAiC,EAAA,CAGA,YADMvG,GAAWW,EAAUT,EAD3BqF,GAAAc,EAAArB,EAAAC,EAAAyB,EAAArB,KAKA,MAAAsB,EAAA,IAAAlI,IACAiI,EAAAlM,QAAA,CAAAE,EAAAlG,KACAmS,EAAA9K,IAAAnB,EAAAlG,KAEA,MAAAoS,EAAA,GACAC,EAAA,IAAApI,IACA4H,EAAA7L,QAAA,CAAArD,EAAA3C,KACA0Q,GAAA/N,EAAA3C,GACAoS,EAAApN,KAAA2L,GAAAhO,EAAA3C,EAAAqS,EAAAxB,MAGA,IAAAyB,EAAA,EACAC,EAAA,EACA,MAAAC,EAAA,GACAC,EAAA,IAAAC,WAAAX,GACA,KAAAO,EAAAP,GAAAQ,EAAAT,GAAA,CACA,KAAAQ,EAAAP,GACA,OAAAU,EAAAH,GACAA,QACS,IAAAD,EAAAvB,IAAAoB,EAAAI,KAAAD,EAAAxR,IAAAqR,EAAAI,KAAAC,EACT,MAEA9B,EAAA6B,GAAoBtF,MACpBsF,IAGA,GAAAA,GAAAP,EAAA,CACA,IAAApG,EAAA,KACA,KAAa4G,EAAAT,EAASS,IAAA,CACtB,MAAA3C,EAAA,IAAyBO,GAAgBK,EAAAqB,EAAAU,MACzC5G,MAAwBD,KACdF,GAAWG,KAAAiE,EAAWhD,OAChC4F,EAAAxN,KAAA4K,GAEAjE,GAAgBH,GAAWW,EAAAR,GAC3B,MAEA,MAAAgH,EAAAT,EAAAI,GACA,IAAA3G,EAAA,KACA,KAAA4G,EAAAT,GAAA,CACA,MAAAc,EAAAR,EAAAG,GACA,GAAAK,IAAAD,EAAA,MAEA,IAAAE,EAAA,KACA,GAAAV,EAAArB,IAAA8B,GAAA,CACA,MAAAE,EAAAX,EAAAtR,IAAA+R,GACAE,EAAAR,GAAA,IAAAG,EAAAK,KACAD,EAAApC,EAAAqC,GACAL,EAAAK,GAAA,GAGAnH,MAAsBD,KACtBmH,GAIAzB,GAAAzF,EAAAkH,GACAA,EAAAzC,QAAAmC,IAAAM,EAAAzC,MAAAmC,GACAM,EAAAvC,OAAAuB,EAAAU,KAAAM,EAAAvC,KAAAuB,EAAAU,KAJU/G,GAAWG,MADrBkH,EAAA,IAAwB1C,GAAgBK,EAAAqB,EAAAU,OACH3F,OAMrC4F,EAAAxN,KAAA6N,GACAN,IAEAA,GAAAT,GACQ/O,EAAW,kBAEnB,MAAA6M,EAAAa,EAAA6B,GACA3G,GAAYO,GAAYC,EAAAR,EAAcgE,GAAeC,IACrDA,EAAAQ,QAAAmC,IAAA3C,EAAAQ,MAAAmC,GACA3C,EAAAU,OAAAuB,EAAAU,KAAA3C,EAAAU,KAAAuB,EAAAU,IACAC,EAAAxN,KAAA4K,GACA0C,IACAC,IAEA/I,KAAS2D,IAAUqF,EACnBhJ,KAAAsG,IAAAsC,GCtQA,SAAAW,GAAAC,EAAA/R,GACA,OAAA+R,EAAA/R,KAAA+R,IAAA/R,GAAA+R,EAAkDxP,GAAW,KAGtD,SAAAyP,GAAAD,EAAAvC,EAAAxP,GACP,MAAAwN,EAAAsE,GAAAC,EAAA/R,GACA,IAAAwN,EAEA,OADAgC,EAAAzL,KAAe8G,EAAcrI,IAC7BgN,EAEA,MAAAb,EAAA,IAAiBxB,GAASK,GAE1B,OADAgC,EAAAzL,KAAA4K,GACAA,EAAYhD,MAIL,SAAAsG,GAAAF,EAAAvC,EAAAxP,GACP,MAAAwN,EAAAsE,GAAAC,EAAA/R,GACA,IAAAwN,EAAA,CACA,MAAAmB,EAAAa,EAAA,GACA,GAAQvC,GAAW0B,GAAA,CACnB,MAAAoC,EAAiBrC,GAAeC,GAChCuD,EAAiB3I,EAASwH,GAC1BC,EAAmBnG,EAAcrI,GACjCgN,EAAA,GAAAwB,EACM/F,GACNiH,EACAlB,EACAD,GAEApC,EAAS5C,MAET,OAGA,MAAA4C,EAAAa,EAAA,GACA,IAAAuB,EAAAmB,EACA,MAAAC,EAAclF,GAAW0B,GACzBwD,EAEAD,EAAS3I,EADTwH,EAASrC,GAAeC,KAGxBoC,EAAApC,EACAuD,EAAS3I,EAASoF,IAElB,MAAAyD,EAAA,IAAiBjF,GAASK,GAC1BgC,EAAA,GAAA4C,EACEnH,GACFiH,EACAE,EAAOzG,MACPoF,GAEAoB,EACAxD,EAAO5C,MAEHX,GAAW8G,EAAAnB,GAEb/D,GAAaoF,GAGR,MAAMC,WAAoBlF,GACjCzJ,YAAAqG,GACAsD,MAAAtD,GACA,MAAAqF,EAA0BjH,EAAwBI,MAClD+J,EAAA,KACAlD,EAAAmD,SAAAxI,EAAAwI,QAIA,OAFAD,IACAvI,EAAUrH,GAAgB,SAAA4P,GAC1BlD,EAEAmD,aACA,OAAAhK,KAAAiK,GAEAD,WAAAvR,GACAuH,KAAAiK,KAAAxR,IACAuH,KAAAiK,GAAAxR,EACAuH,KAASkE,OAET/I,CAAGiI,MACH,MAAAoG,EAAAxJ,KAAqBsD,IAIrB,OAHAkG,IACAA,GAAA,GAAAA,EAAA,MAEAC,GAAAD,EAAAxJ,KAAkC2D,IAAU3D,KAAAgK,QAE5C7O,CAAG8I,MACHyF,GAAA1J,KAAsBsD,IAActD,KAAQ2D,IAAU3D,KAAAgK,SCpGvC,IAAAE,GAAA,SAAArK,GACf,MAAAsK,EAAAtK,EACA,OACA,MACA,MAAAuG,EAAenE,EACf,KACA,mBAGA,OADApC,EAAc8D,IAAmBnI,KAAA4K,GACjCA,GANA,GAQA,MACA,MAAAA,EAAenE,EACf,MACMA,EACN,OACA,MACA,MAAAT,EAAwB3C,EAAsB,CAC9C1D,CAAasI,IAAgB5D,EAAa4D,IAC1CyE,KAAA,KACAH,KAAA,QACA5M,CAAamI,IAAuB,CACpCnI,CAAenB,GAAoB,SAAA6F,GACnC,MAAAuK,EAAAvK,EACA,OACA,MACA,MAAAuG,EAA6B/D,EAAuB,IACpD3D,EAAA,IAAmCyC,EAAgBiF,EAAAgE,EAAAxD,OAInD,OAHAwD,EAAuBjQ,GAAc,QAAAuE,EAAAmB,GACrCnB,IACAmB,EAA4B8D,IAAmBnI,KAAA4K,GAC/CA,GANA,GAQA,MACA,MAAAA,EAA6B/D,EAAuB,MAEpD,OADAxC,EAA4B8D,IAAmBnI,KAAA4K,GAC/CA,GAHA,GAKA,MACA,MAAAA,EAA6B/D,EAAuB,IACpD3D,EAAA,IAAmCyC,EAAgBiF,EAAAgE,EAAAtD,MAInD,OAHAsD,EAAuBjQ,GAAc,OAAAuE,EAAAmB,GACrCnB,IACAmB,EAA4B8D,IAAmBnI,KAAA4K,GAC/CA,GANA,GAQA,MACA,MAAAA,EAA6B/D,EAAuB,SAEpD,OADAxC,EAA4B8D,IAAmBnI,KAAA4K,GAC/CA,GAHA,QAQW,GACXiE,EAAA,IAAA7I,EAAA0G,KAAAiC,EAAAG,QACAH,EAAehQ,GAAc,UAAAkQ,EAAAxK,GAC7BwK,IACA,MAAAjE,EAAA,IAAyByB,GAAqBrG,GAE9C,OADA3B,EAAoB+D,IAAiCpI,KAAA4K,GACpCH,GAA4BG,EAAIhD,IAAevD,KA5ChE,IA+CMoC,EACN,MACA,MACA,MAAAmE,EAAqBnE,EACrB,SACA,QAGA,OADUgB,GAAiBmD,EAAA,oBAAAzH,GAAiCwL,EAAAnC,SAC5D5B,GANA,GAQA,MACA,MAAAA,EAAqBnE,EACrB,SACA,cAGA,OADUgB,GAAiBmD,EAAA,oBAAAzH,GAAiCwL,EAAA3O,SAC5D4K,GANA,KAWA,OADAvG,EAAc8D,IAAmBnI,KAAA4K,GACjCA,GAzEA,GA2EA,MACA,MAAAA,EAAenE,EACf,KACA,YAGA,OADApC,EAAc8D,IAAmBnI,KAAA4K,GACjCA,GANA,GAQA,MACA,MAAAA,EAAenE,EACf,MACMA,EACN,OACA,MACA,MAAAT,EAAwB3C,EAAsB,CAC9C1D,CAAasI,IAAgB5D,EAAa4D,IAC1CyE,KAAA,KACAH,KAAA,OACA5M,CAAamI,IAAuB,CACpCnI,CAAenB,GAAoB,SAAA6F,GACnC,MAAAuK,EAAAvK,EACA,UACA,MACA,MAAA2B,EAAgC3C,EAAsB,CACtD1D,CAAqBsI,IAAgB5D,EAAa4D,IAClDuG,OAAA,KACA7O,CAAqBmI,IAAuB,CAC5CnI,CAAuBnB,GAAoB,SAAA6F,GAC3C,OACA,MACA,MAAAuG,EAAqC7E,EACrC,OACA,CACAgJ,MAAA,uBAEA,MACA,MAAAnE,EAAyC/D,EAAuB,IAChE3D,EAAA,IAA+CyC,EAAgBiF,EAAAgE,EAAAxD,OAG/D,OAFAwD,EAAmCjQ,GAAc,QAAAuE,EAAAmB,GACjDnB,IACA0H,GALA,GAOA,KACA,MACA,MAAAA,EAAyC/D,EAAuB,IAChE3D,EAAA,IAA+CyC,EAAgBiF,EAAAgE,EAAAtD,MAG/D,OAFAsD,EAAmCjQ,GAAc,OAAAuE,EAAAmB,GACjDnB,IACA0H,GALA,GAOA,KAGA,OADAvG,EAAoC8D,IAAmBnI,KAAA4K,GACvDA,GAxBA,QA6BmB,GACnBiE,EAAA,IAAA7I,EAAAwI,OAAAI,EAAAtD,KAAA,KACAsD,EAAuBjQ,GAAc,OAAAkQ,EAAAxK,GACrCwK,IACA,MAAAjE,EAAA,IAAiC0D,GAAoBtI,GAErD,OADA3B,EAA4B8D,IAAmBnI,KAAA4K,GACtBH,GAA4BG,EAAIhD,IAAevD,KA1CxE,MA4CA,MACA,MAAA2B,EAAgC3C,EAAsB,CACtD1D,CAAqBsI,IAAgB5D,EAAa4D,IAClDuG,OAAA,KACA7O,CAAqBmI,IAAuB,CAC5CnI,CAAuBnB,GAAoB,SAAA6F,GAC3C,OACA,MACA,MAAAuG,EAAqC7E,EACrC,OACA,CACAgJ,MAAA,oCAEA,MACA,MAAAnE,EAAyC/D,EAAuB,IAChE3D,EAAA,IAA+CyC,EAAgBiF,EAAAgE,EAAAtD,MAG/D,OAFAsD,EAAmCjQ,GAAc,OAAAuE,EAAAmB,GACjDnB,IACA0H,GALA,IASA,OADAvG,EAAoC8D,IAAmBnI,KAAA4K,GACvDA,GAfA,QAoBmB,GACnBiE,EAAA,IAAA7I,EAAAwI,OAAAI,EAAAtD,KAAA,KACAsD,EAAuBjQ,GAAc,OAAAkQ,EAAAxK,GACrCwK,IACA,MAAAjE,EAAA,IAAiC0D,GAAoBtI,GAErD,OADA3B,EAA4B8D,IAAmBnI,KAAA4K,GACtBH,GAA4BG,EAAIhD,IAAevD,KAjCxE,QAsCW,GACXwK,EAAA,IAAA7I,EAAA0G,KAAAiC,EAAAG,QACAH,EAAehQ,GAAc,UAAAkQ,EAAAxK,GAC7BwK,IACA,MAAAjE,EAAA,IAAyByB,GAAqBrG,GAE9C,OADA3B,EAAoB+D,IAAiCpI,KAAA4K,GACpCH,GAA4BG,EAAIhD,IAAevD,KAjGhE,KAsGA,OADAA,EAAc8D,IAAmBnI,KAAA4K,GACjCA,GA3GA,GA6GA,MACA,MAAAA,EAAenE,EACf,KACA,WAGA,OADApC,EAAc8D,IAAmBnI,KAAA4K,GACjCA,GANA,GAQA,MACA,MAAAA,EAAenE,EACf,MACMA,EACN,IACQA,EACR,QACA,MACA,MAAAT,EAA0B3C,EAAsB,CAChD1D,CAAesI,IAAgB5D,EAAa4D,IAC5CyE,KAAA,KACAH,KAAA,UACA5M,CAAemI,IAAuB,CACtCnI,CAAiBnB,GAAoB,SAAA6F,GACrC,MAAAuK,EAAAvK,EACA,OACA,MACA,MAAAuG,EAA+BnE,EAC/B,KACA,MACA,MAAAmE,EAAmC/D,EAAuB,IAC1D3D,EAAA,IAAyCyC,EAAgBiF,EAAAgE,EAAAtD,KAAA/P,MAGzD,OAFAqT,EAA6BjQ,GAAc,YAAAuE,EAAAmB,GAC3CnB,IACA0H,GALA,IASA,OADAvG,EAA8B8D,IAAmBnI,KAAA4K,GACjDA,GAZA,QAiBa,GACbiE,EAAA,IAAA7I,EAAA0G,KAAAiC,EAAAK,QACAL,EAAiBhQ,GAAc,UAAAkQ,EAAAxK,GAC/BwK,IACA,MAAAjE,EAAA,IAA2ByB,GAAqBrG,GAEhD,OADA3B,EAAsB+D,IAAiCpI,KAAA4K,GACpCH,GAA4BG,EAAIhD,IAAevD,KAhClE,MAsCA,OADAA,EAAc8D,IAAmBnI,KAAA4K,GACjCA,GA7CA,KCtNA,IAAAqE,GAAA,GCVO,SAAAC,EAAAC,GACP,GAAAA,IAAAjJ,SAAAkJ,KACA,UAAAjR,MAAA,yCAEA,MAAAkR,EAAA,IAAAH,EACOhG,GAAWmG,IAAiBtR,IACnCsR,EAAgBxH,IAAasH,GDmD7BG,CA7CA,cAAkBlG,GAClBC,sBACA,OAAWqF,GAEX/O,YAAAwD,GACAmG,MAAAnG,GACA,MAAAkI,EAA0BjH,EAAwBI,MAwBlD,OAvBA6G,EAAAkE,IAAA,GACAlE,EAAAyD,QAA4BzL,EAAE,CAC9B,EACA,EACA,IAEAgI,EAAA2D,QAA4B3L,EAAE,CAC9B,CACAgH,GAAA,MACA9O,KAAA,UAEA,CACA8O,GAAA,MACA9O,KAAA,WAGAiU,YAAA,KACAnE,EAAAyD,QAAA9O,KAAAiP,MACA5D,EAAA2D,QAAAhP,KAAiCqD,EAAE,CACnCgH,GAAAoF,KAAAC,MAAAC,SAAA,IACApU,KAAAkU,KAAAC,MAAAC,SAAA,QAEK,KACLtE,EAEA1L,OACA6E,KAAAsK,QAAmBzL,EAAE,aACrBmB,KAAAwK,QAAAzP,OAAA,EAEAI,OACA,MAAAiQ,EAAA,GACA,QAAA5U,EAAA,EAAkBA,EAAA,IAAWA,IAC7B4U,EAAA5P,KAAAiP,MAEAzK,KAAAsK,QAAA9O,QAAA4P,KAIa1J,SAAA2J,eAAA","file":"bundle.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export function typeOf(v) {\n  return typeof v;\n}\n\nexport function isObject(v) {\n  return typeOf(v) === 'object';\n}\nexport function isString(v) {\n  return typeOf(v) === 'string';\n}\nexport function isNumber(v) {\n  return typeOf(v) === 'number' && !Number.isNaN(v) && Number.isFinite(v);\n}\n\nexport function isUndefined(v) {\n  return typeOf(v) === 'undefined';\n}\n\nexport function isArray(v) {\n  return Array.isArray(v);\n}\n\nexport function isFunction(v) {\n  return typeOf(v) === 'function';\n}\n\nexport function instanceOf(v, Clazz) {\n  return v instanceof Clazz;\n}\n\nexport function isDOMNode(ele) {\n  return instanceOf(ele, Node);\n}\n\nexport function isPropertyEnumerable(obj, key) {\n  return obj.propertyIsEnumerable(key);\n}\nexport function getOwnPropertySymbols(obj) {\n  return Object.getOwnPropertySymbols(obj);\n}","\nexport function arrayIndexOf(array, item) {\n  return array.indexOf(item);\n}\n\nexport function arrayRemove(array, item) {\n  const idx = arrayIndexOf(array, item);\n  if (idx < 0) return false;\n  array.splice(idx, 1);\n  return true;\n}\n\nexport function arrayPushIfNotExist(array, item) {\n  const idx = arrayIndexOf(array, item);\n  if (idx >= 0) return;\n  array.push(item);\n}\n","\nexport * from './type';\nexport * from './array';\nexport * from './diff';\n\nexport function Symbol(description) {\n  return window.Symbol(description);\n}\n\nexport function assert_fail(msg) {\n  msg && console.error(msg);\n  throw new Error('assert failed!');\n}\n\nexport function startsWith(str, search, position = 0) {\n  return str.startsWith( search, position);\n}\n\nexport function defineProperty(...args) {\n  return Object.defineProperty(...args);\n}\n\nexport function defineProperties(...args) {\n  return Object.defineProperties(...args);\n}\n\nexport function simpleUUID() {\n  return Date.now().toString(32) + Math.floor(Math.random() * 0xffff).toString(32);\n}\n\nexport const STR_DEFAULT = 'default';\nexport const STR_JINGE = 'jinge';\nexport const STR_EMPTY = 'empty';\n\nexport function mapObject(obj, fn) {\n  const newObj = {};\n  for(const k in obj) {\n    newObj[k] = fn(obj[k], k);\n  }\n  return newObj;\n}","import {\n  isArray,\n  arrayRemove,\n  arrayPushIfNotExist,\n  Symbol,\n  startsWith\n} from '../util';\n\nexport const VM_NOTIFY = Symbol();\nexport const VM_ON = Symbol();\nexport const VM_OFF = Symbol();\nexport const VM_CLEAR = Symbol();\nexport const VM_LISTENERS = Symbol();\nexport const VM_LISTENERS_TM = Symbol();\nexport const VM_LISTENERS_HANDLERS = Symbol();\nexport const VM_LISTENERS_CHILDREN = Symbol();\n\n\nfunction walkGetNode(vm, props, level = 0, create = false) {\n  const end = props.length - 1;\n  if (end < 0) return null;\n  const propN = '' + props[level]; // force to string\n  if (startsWith(propN, '_')) {\n    console.error('WARN: property name startsWith char \"_\" is private/once-used property, ignored get/set listener.');\n    return null;\n  }\n  let node = vm[propN];\n  if (!node) {\n    if (create) {\n      // node can't have any prototype function.\n      node = vm[propN] = Object.create(null);\n      Object.assign(node, {\n        [VM_LISTENERS_TM]: null,\n        [VM_LISTENERS_HANDLERS]: [],\n        [VM_LISTENERS_CHILDREN]: Object.create(null)\n      });\n    } else {\n      return null;\n    }\n  }\n  if (end === level) {\n    return node;\n  } else {\n    return walkGetNode(node[VM_LISTENERS_CHILDREN], props, level + 1, create);\n  }\n}\n\nexport function vmAddListener(vm, prop, handler) {\n  const props = isArray(prop) ? prop : prop.split('.');\n  if (props.length === 0) return;\n  const node = walkGetNode(vm[VM_LISTENERS], props, 0, true);\n  arrayPushIfNotExist(node[VM_LISTENERS_HANDLERS], handler);\n}\n\nexport function vmRemoveListener(vm, prop, handler) {\n  const props = isArray(prop) ? prop : prop.split('.');\n  if (props.length === 0) return;\n  const node = walkGetNode(vm[VM_LISTENERS], props, 0, false);\n  if (!node) return;\n  if (!handler) node[VM_LISTENERS_HANDLERS].length = 0; // remove all\n  else arrayRemove(node[VM_LISTENERS_HANDLERS], handler);\n}\n\nexport function vmClearListener(vm) {\n  function loopClear(node) {\n    for(const prop in node) {\n      const leaf = node[prop];\n      if (!(VM_LISTENERS_TM in leaf)) return;\n      if (leaf[VM_LISTENERS_TM]) {\n        clearImm(leaf[VM_LISTENERS_TM]);\n        leaf[VM_LISTENERS_TM] = null;\n      }\n      leaf[VM_LISTENERS_HANDLERS].length = 0;\n      vmClearListener(leaf[VM_LISTENERS_CHILDREN]);\n      leaf[VM_LISTENERS_CHILDREN] = null;\n      node[prop] = null;\n    }\n  }\n  loopClear(vm[VM_LISTENERS]);\n}\n\nexport function vmAddMessengerInterface(vm) {\n  if (VM_LISTENERS in vm) return;\n  vm[VM_LISTENERS] = {};\n  vm[VM_ON] = (prop, handler) => vmAddListener(vm, prop, handler);\n  vm[VM_OFF] = (prop, handler) => vmRemoveListener(vm, prop, handler);\n  vm[VM_NOTIFY] = prop => vmNotifyChanged(vm, prop);\n  vm[VM_CLEAR] = () => vmClearListener(vm);\n}\n\nconst setImm = window.setImmediate || window.setTimeout;\nconst clearImm = window.clearImmediate || window.clearTimeout;\n\nfunction loopNotify(node) {\n  if (node[VM_LISTENERS_TM]) {\n    clearImm(node[VM_LISTENERS_TM]);\n    node[VM_LISTENERS_TM] = null;\n  }\n  if (node[VM_LISTENERS_HANDLERS].length > 0) {\n    node[VM_LISTENERS_TM] = setImm(() => {\n      node[VM_LISTENERS_TM] = null;\n      node[VM_LISTENERS_HANDLERS].forEach(handler => handler());\n    });\n  }\n  const children = node[VM_LISTENERS_CHILDREN];\n  for(const k in children) {\n    loopNotify(children[k]);\n  }\n}\nexport function vmNotifyChanged(vm, prop) {\n  const props = isArray(prop) ? prop : prop.split('.');\n  if (props.length === 0) return;\n  const node = walkGetNode(vm[VM_LISTENERS], props, 0, false);\n  if (!node) return;\n  loopNotify(node);\n}\n","import { \n  isObject,\n  isString,\n  Symbol,\n  startsWith\n} from '../util';\n\nexport const VM_PARENTS = Symbol();\nexport const VM_EMPTY_PARENTS = [];\nexport function isViewModel(obj) {\n  return obj !== null && isObject(obj) && (VM_PARENTS in obj);\n}\n\nexport function isPublicProp(v) {\n  return isString(v) && !startsWith(v, '_');\n}\n\nexport function addVMParent(vm, parent, prop) {\n  const ps = vm[VM_PARENTS];\n  for(let i = 0; i < ps.length; i++) {\n    if (ps[i][0] === parent && ps[i][1] === prop) return;\n  }\n  ps.push([parent, prop]);\n}\n\nexport function removeVMParent(vm, parent, prop) {\n  const ps = vm[VM_PARENTS];\n  for(let i = 0; i < ps.length; i++) {\n    if (ps[i][0] === parent && ps[i][1] === prop) {\n      ps.splice(i, 1);\n      return;\n    }\n  }\n}","import {\n  typeOf,\n  instanceOf,\n  isNumber,\n  isArray\n} from '../util';\nimport {\n  VM_PARENTS,\n  VM_EMPTY_PARENTS,\n  isViewModel,\n  isPublicProp,\n  addVMParent,\n  removeVMParent\n} from './common';\nimport {\n  VM_NOTIFY,\n  vmAddMessengerInterface\n} from './notify';\n\nfunction notifyPropChanged(vm, prop) {\n  if (VM_NOTIFY in vm) {\n    vm[VM_NOTIFY](prop);\n  }\n  vm[VM_PARENTS].forEach(pInfo => {\n    const [pVM, pName] = pInfo;\n    notifyPropChanged(\n      pVM,\n      isArray(prop) ? [pName, ...prop] : [pName, prop]\n    );\n  });\n}\n\nfunction objectPropSetHandler(target, prop, value) {\n  if (!isPublicProp(prop)) {\n    target[prop] = value;\n    return true;\n  }\n  const newValType = typeOf(value);\n  const newValIsVM = isViewModel(value);\n  if (value !== null && newValType === 'object' && !newValIsVM) {\n    throw new Error('public property of ViewModel target must also be ViewModel');\n  }\n  // console.log(`'${prop}' changed from ${store[prop]} to ${value}`);\n  const oldVal = target[prop];\n  if (isViewModel(oldVal)) {\n    removeVMParent(oldVal, target, prop);\n  }\n  target[prop] = value;\n  if (newValIsVM) {\n    addVMParent(value, target, prop);\n  }\n  notifyPropChanged(target, prop);\n  return true;\n}\n\nfunction arrayPropSetHandler(target, prop, value) {\n  if (prop === 'length') {\n    return arrayLengthSetHandler(target, value);\n  }\n  return objectPropSetHandler(target, prop, value);\n}\n\nfunction arrayLengthSetHandler(target, value) {\n  if (!isNumber(value)) throw new Error('bad argument. array length must be validate number.');\n  const oldLen = target.length;\n  if (oldLen > value) for(let i = value; i < oldLen; i++) {\n    const v = target[i];\n    isViewModel(v) && removeVMParent(v, target, i);\n  }\n  target.length = value;\n  if (oldLen !== value) {\n    target[VM_PARENTS].forEach(ps => notifyPropChanged(ps[0], ps[1]));\n  }\n  return true;\n}\n\nexport const ObjectProxyHandler = {\n  set: objectPropSetHandler\n};\n\n/**\n * functions need to be wrap.\n * if first bit is 1, it means this function return another Array need to be convert to ViewModel\n * if second bit is 1, it means this function will change array itself, need to notify change.\n */\nconst ArrayFns = {\n  push: 2,\n  pop: 2,\n  shift: 2,\n  unshift: 2,\n  splice: 3,\n  reverse: 2,\n  sort: 2,\n  fill: 2,\n  slice: 1,\n  concat: 1,\n  map: 1\n};\n\nexport const ArrayProxyHandler = {\n  get(vm, prop) {\n    if (prop in ArrayFns) {\n      const tag = ArrayFns[prop];\n      const fn = vm[prop];\n      return function(...args) {\n        const rtn = fn.call(vm, ...args);\n        if ((tag & 2) > 0) {\n          vm[VM_PARENTS].forEach(ps => notifyPropChanged(ps[0], ps[1]));\n        }\n        if ((tag & 1) > 0 && isArray(rtn) && !(VM_PARENTS in rtn)) {\n          return wrapViewModel(rtn);\n        } else {\n          return rtn;\n        }\n      };\n    } else {\n      return vm[prop];\n    }\n  },\n  set: arrayPropSetHandler\n};\n\n\nfunction wrapProp(vm, prop) {\n  const v = vm[prop];\n  if (v === null || typeOf(v) !== 'object' || VM_PARENTS in v) return;\n  if (instanceOf(v, Boolean) || instanceOf(v, RegExp)) {\n    v[VM_PARENTS] = VM_EMPTY_PARENTS;\n    return;\n  }\n  vm[prop] = wrapViewModel(v);\n  addVMParent(v, vm, prop);\n}\nfunction wrapProxy(vm, isArr, addMessengerInterface) {\n  vm[VM_PARENTS] = [];\n  if (addMessengerInterface) {\n    vmAddMessengerInterface(vm);\n  }\n  return new Proxy(vm, isArr ? ArrayProxyHandler : ObjectProxyHandler);\n}\n\nexport function wrapViewModel(plainObjectOrArray, addMessengerInterface = false) {\n  if (plainObjectOrArray === null) return plainObjectOrArray;\n  if (typeOf(plainObjectOrArray) === 'object') {\n    // already been ViewModel\n    if (VM_PARENTS in plainObjectOrArray) return plainObjectOrArray;\n\n    if (instanceOf(plainObjectOrArray, Boolean) || instanceOf(plainObjectOrArray, RegExp)) {\n      plainObjectOrArray[VM_PARENTS] = VM_EMPTY_PARENTS;\n    } else if (isArray(plainObjectOrArray)) {\n      for(let i = 0; i < plainObjectOrArray.length; i++) {\n        wrapProp(plainObjectOrArray, i);\n      }\n      return wrapProxy(plainObjectOrArray, true, addMessengerInterface);\n    } else {\n      for(const k in plainObjectOrArray) {\n        wrapProp(plainObjectOrArray, k);\n      }\n      return wrapProxy(plainObjectOrArray, false, addMessengerInterface);\n    }\n  } else {\n    return plainObjectOrArray;\n  }\n}\n\nexport function wrapComponent(component) {\n  return new Proxy(component, ObjectProxyHandler);\n}\n","import {\n  Symbol\n} from '../util';\n\nexport const LISTENERS = Symbol();\n\nexport function notifyHelper(listenersMap, notifyKey, ...notifyArgs) {\n  if (!listenersMap) return;\n  const listeners = listenersMap.get(notifyKey);\n  if (!listeners) return;\n  listeners.forEach(handler => handler(...notifyArgs));\n}\n\nexport function onHelper(listenersMap, notifyKey, listener) {\n  let listeners = listenersMap.get(notifyKey);\n  if (!listeners) {\n    listeners = [];\n    listenersMap.set(notifyKey, listeners);\n  }\n  if (listeners.indexOf(listener) < 0) {\n    listeners.push(listener);\n  }\n}\n\nexport function offHelper(listenersMap, notifyKey, listener) {\n  if (!listenersMap) return;\n  if (!notifyKey) {\n    listenersMap.forEach(ls => ls.length = 0);\n    listenersMap.clear();\n    return;\n  }\n  const listeners = listenersMap.get(notifyKey);\n  if (!listeners) return;\n  if (!listener) {\n    listeners.length = 0; // clear all if listener is not provided\n    return;\n  }\n  const idx = listeners.indexOf(listener);\n  if (idx < 0) return;\n  listeners.splice(idx, 1);\n}\n\nexport function clearHelper(listenersMap, notifyKey) {\n  if (!listenersMap) return;\n  if (!notifyKey) {\n    listenersMap.clear();\n  } else {\n    listenersMap.delete(notifyKey);\n  }\n}\n\nexport class Messenger {\n  constructor() {\n    this[LISTENERS] = null;\n  }\n  notify(eventName, ...args) {\n    notifyHelper(this[LISTENERS], eventName, ...args);\n  }\n  on(eventName, eventListener) {\n    const me = this;\n    if (!me[LISTENERS]) {\n      me[LISTENERS] = new Map();\n    }\n    onHelper(me[LISTENERS], eventName, eventListener);\n  }\n  off(eventName, eventListener) {\n    offHelper(this[LISTENERS], eventName, eventListener);\n  }\n  clear(eventName) {\n    clearHelper(this[LISTENERS], eventName);\n  }\n}","import {\n  isString,\n  isArray\n} from '../util';\n\nexport function getParent($ele) {\n  return $ele.parentNode;\n}\n\nexport function setText($element, text) {\n  $element.textContent = text;\n}\n\nexport function setAttribute($ele, attrName, attrValue) {\n  $ele.setAttribute(attrName, attrValue);\n}\n\nexport function setInputValue($inputOrTextarea, value) {\n  $inputOrTextarea.value = value;\n}\n\nexport function createElement(tag, attrs, ...children) {\n  const $e = document.createElement(tag);\n  if (attrs) for(const an in attrs) {\n    setAttribute($e, an, attrs[an]);\n  }\n  children.forEach(child => appendChild($e, child));\n  return $e;\n}\n\nexport function createElementWithoutAttrs(tag, ...children) {\n  return createElement(tag, null, ...children);\n}\n\nexport function createFragment(children) {\n  const $f = document.createDocumentFragment();\n  if (children) children.forEach(c => appendChild($f, c));\n  return $f;\n}\n\nexport function createTextNode(text) {\n  return document.createTextNode(text);\n}\n\nexport function createElementWithChild(tag, attrs, child) {\n  const $e = createElement(tag, attrs);\n  appendChild($e, child);\n  return $e;\n}\n\nexport function createComment(data) {\n  return document.createComment(data);\n}\n\nfunction prepareNewNode(newNode) {\n  if (!isArray(newNode)) return newNode;\n  if (newNode.length === 0) return null;\n  else if (newNode.length === 1) return newNode[0];\n  else {\n    return createFragment(newNode);\n  }\n}\n\nexport function replaceChild($parent, newNode, oldNode) {\n  if (!(newNode = prepareNewNode(newNode))) {\n    return;\n  }\n  $parent.replaceChild(newNode, oldNode);\n}\n\nexport function insertBefore($parent, newNode, referenceNode) {\n  if (!(newNode = prepareNewNode(newNode))) {\n    return;\n  }\n  $parent.insertBefore(newNode, referenceNode);\n}\n\nexport function insertAfter($parent, newNode, referenceNode) {\n  if (!(newNode = prepareNewNode(newNode))) {\n    return;\n  }\n  const rn = referenceNode.nextSibling;\n  if (!rn) {\n    appendChild($parent, newNode);\n  } else {\n    insertBefore($parent, newNode, rn);\n  }\n}\n\nexport function removeChild($parent, $child) {\n  $parent.removeChild($child);\n}\n\nexport function appendChild($parent, ...children) {\n  children.forEach(ch => {\n    if (isArray(ch)) {\n      return ch.forEach(cc => appendChild($parent, cc));\n    }\n    if (isString(ch)) {\n      ch = createTextNode(ch);\n    }\n    $parent.appendChild(ch);\n  });\n}\n\nexport function hasClass($ele, className) {\n  return $ele.classList.contains(className);\n}\n\nexport function toggleClass($ele, ...args) {\n  return $ele.classList.toggle(...args);\n}\nexport function addClass($ele, className) {\n  return toggleClass($ele, className, true);\n}\n\nexport function removeClass($ele, className) {\n  return toggleClass($ele, className, false);\n}\n\nexport function addEvent($element, eventName, handler, capture = false) {\n  $element.addEventListener(eventName, handler, capture);\n}\n\nexport function removeEvent($element, eventName, handler) {\n  $element.removeEventListener(eventName, handler);\n}","import {\n  vmAddListener,\n  vmRemoveListener,\n  vmNotifyChanged,\n  VM_ON,\n  VM_OFF,\n  VM_CLEAR,\n  VM_LISTENERS,\n  VM_NOTIFY,\n  vmClearListener\n} from '../viewmodel/notify';\nimport {\n  VM_PARENTS,\n  VM_EMPTY_PARENTS\n} from '../viewmodel/common';\nimport {\n  Messenger\n} from './messenger';\nimport {\n  Symbol,\n  isDOMNode,\n  instanceOf,\n  assert_fail,\n  isFunction,\n  STR_DEFAULT,\n  isObject,\n  isArray\n} from '../util';\nimport {\n  getParent,\n  removeChild,\n  replaceChild\n} from '../dom';\n\nexport const TEMPLATE_RENDER = Symbol();\nexport const RENDER = Symbol();\nexport const RENDER_TO_DOM = Symbol();\nexport const ARG_COMPONENTS = Symbol();\nexport const CLONE = Symbol();\nexport const DESTROY = Symbol();\nexport const CONTEXT = Symbol();\nexport const CONTEXT_STATE = Symbol();\nexport const ROOT_NODES = Symbol();\nexport const NON_ROOT_COMPONENT_NODES = Symbol();\nexport const REF_NODES = Symbol();\nexport const RELATED_VM_LISTENERS = Symbol();\nexport const RELATED_VM_ADD = Symbol();\nexport const GET_STATE_NAME = Symbol();\nexport const UPDATE = Symbol();\nexport const UPDATE_IF_NEED = Symbol();\nexport const STATE = Symbol();\nexport const STATE_INITIALIZE = 0;\nexport const STATE_RENDERED = 1;\nexport const STATE_WILLDESTROY = 2;\nexport const STATE_DESTROIED = 4;\nexport const STATE_NAMES = [\n  'initialize', 'rendered', 'willdestroy', 'destroied'\n];\n\nfunction copyContext(context) {\n  if (!context) return null;\n  return Object.assign({}, context);\n}\n\nexport function onAfterRender(node) {\n  if (!isComponent(node)) return; // skip html-node\n  node[ROOT_NODES].forEach(onAfterRender);\n  node[NON_ROOT_COMPONENT_NODES].forEach(onAfterRender);\n  node[STATE] = STATE_RENDERED;\n  node[CONTEXT_STATE] = -1; // has been rendered, can't modify context\n  node.afterRender();\n}\n\nfunction removeRootNodes(component, $parent) {\n  component[ROOT_NODES].forEach(node => {\n    if (isComponent(node)) removeRootNodes(node, $parent);\n    else {\n      if (!$parent) $parent = getParent(node);\n      removeChild($parent, node);\n    }\n  });\n  component[ROOT_NODES] = null;\n}\n\nexport class Component extends Messenger {\n  /**\n   * compiler will auto transform the `template` getter's return value from String to Render Function.\n   */\n  static get template() {\n    return null;\n  }\n  constructor(attrs) {\n    if (attrs === null || attrs === undefined) {\n      // do nothing.\n    } else if (isFunction(attrs)) {\n      attrs = {\n        [ARG_COMPONENTS]: {\n          [STR_DEFAULT]: attrs\n        }\n      };\n    } else if (isObject(attrs) && !(VM_PARENTS in attrs)) {\n      throw new Error('First argument passed to Component constructor must be ViewModel');\n    }\n    super();\n    this[VM_PARENTS] = VM_EMPTY_PARENTS;\n    this[VM_LISTENERS] = {};\n    this[CONTEXT] = attrs ? attrs[CONTEXT] : null;\n    this[CONTEXT_STATE] = 0;\n    this[ARG_COMPONENTS] = attrs ? (attrs[ARG_COMPONENTS] || null) : null;\n    this[STATE] = STATE_INITIALIZE;\n    /**\n     * ROOT_NODES means root children of this component,\n     *   include html-nodes and component-nodes.\n     * We use this infomation to remove DOM after this component is destroied.\n     * We do not maintain the whole parent-child view-tree but only root children,\n     * because when we remove the root children, whole view-tree will be\n     * removed, so we do not need waste memory to maintain whole view-tree.\n     */\n    this[ROOT_NODES] = [];\n    /**\n     * NON_ROOT_COMPONENT_NODES means nearest non-root component-nodes in the view-tree.\n     * Node in view-tree have two types, html-node and component-node.\n     *   html-node include html dom node and html text node,\n     *   component-node is an instance of a Component.\n     * For example, we have rendered a view-tree:\n     *             RootApp(Component)\n     *             /     |          \\\n     *         h1(Html)  h2(Html)  A(Component)\n     *            |                 |\n     *        C(Component)     D(Component)\n     *\n     * The nearest non-root component-nodes of RootApp include C,\n     *   but not include A(as it's root) or D(as it's not nearest).\n     * \n     * By the way, the ROOT_NODES of view-tree above is [h1, h2, A]\n     */\n    this[NON_ROOT_COMPONENT_NODES] = [];\n    /**\n     * REF_NODES contains all children with ref: attribute.\n     */\n    this[REF_NODES] = {};\n    /**\n     * If some child of this component is passed as argument(ie. \n     * use arg:pass attribute) like ng-tranclude in angular 1.x,\n     * the child may contain some messenger listeners not belong to \n     * this component but belong to outer parent.\n     * \n     * When destroy this component, we should also remove messenger listeners\n     *   belong to outer parent to prevent memory leak.\n     * To implement this goal, we maitain RELATED_VM_LISTENERS.\n     * When render view-tree, any messenger listeners belong to outer\n     * parent, will be also linked under RELATED_VM_LISTENERS, then \n     * when we destroy this component, the listeners can also be clear.\n     * \n     * For examle:\n     * \n     * <!-- outer parent: RootApp -->\n     * <div>\n     * <if expect=\"show\">\n     * <Tooltip>\n     * <argument arg:pass=\"default\">\n     * <p>hello, world. my name is ${name}</p>\n     * </argument>\n     * </Tooltip>\n     * </if>\n     * </div>\n     * \n     * when the `show` variable changed from true to false, the\n     * Tooltip component will be destroy. The messenger listener belong\n     * to the outer parent RootApp which watch `name` variable should \n     * also be removed.\n     */\n    this[RELATED_VM_LISTENERS] = new Map();\n  }\n  [VM_ON](prop, handler, componentCtx) {\n    vmAddListener(this, prop, handler);\n    if (!componentCtx || !isComponent(componentCtx) || componentCtx === this) return;\n    componentCtx[RELATED_VM_ADD](this, prop, handler);\n  }\n  [RELATED_VM_ADD](vm, prop, handler) {\n    let hook = this[RELATED_VM_LISTENERS].get(vm);\n    if (!hook) {\n      hook = [];\n      this[RELATED_VM_LISTENERS].set(vm, hook);\n    }\n    hook.push([prop, handler]);\n  }\n  [VM_OFF](prop, handler) {\n    return vmRemoveListener(this, prop, handler);\n  }\n  [VM_CLEAR]() {\n    vmClearListener(this);\n  }\n  [VM_NOTIFY](prop) {\n    return vmNotifyChanged(this, prop);\n  }\n  [CLONE]() {\n    throw new Error('abstract method');\n  }\n  [RENDER]() {\n    let renderFn = this.constructor.template;\n    if (!renderFn && this[ARG_COMPONENTS]) {\n      renderFn = this[ARG_COMPONENTS][STR_DEFAULT];\n    }\n    if (!isFunction(renderFn)) assert_fail();\n    return renderFn(this);\n  }\n  [RENDER_TO_DOM]($targetDOM) {\n    if (!isDOMNode($targetDOM)) assert_fail();\n    if (this[STATE] !== STATE_INITIALIZE) {\n      assert_fail();\n    }\n    replaceChild(getParent($targetDOM), this[RENDER](), $targetDOM);\n    onAfterRender(this);\n  }\n  [DESTROY](removeDOM = true) {\n    if (this[STATE] > STATE_WILLDESTROY) return;\n    this[STATE] = STATE_WILLDESTROY;\n    this.beforeDestroy();\n    super.clear();   // dont forgot call super clear.\n    this[VM_CLEAR](); // dont forgot clear vm listeners\n    destroyRelatedVMListeners(this);\n    this[NON_ROOT_COMPONENT_NODES].forEach(component => {\n      component[DESTROY](false);\n    });\n    this[ROOT_NODES].forEach(node => {\n      if (isComponent(node)) node[DESTROY](false);\n    });\n    this[STATE] = STATE_DESTROIED;\n    this[RELATED_VM_LISTENERS] =\n      this[NON_ROOT_COMPONENT_NODES] =\n      this[REF_NODES] =\n      this[ARG_COMPONENTS] =\n      this[CONTEXT] = null;\n    \n    if (removeDOM) {\n      removeRootNodes(this);\n    }\n  }\n  [UPDATE_IF_NEED]() {\n    if (this[STATE] === STATE_RENDERED) {\n      this[UPDATE]();\n    }\n  }\n  [UPDATE]() {\n    throw new Error('abstract method');\n  }\n  [GET_STATE_NAME]() {\n    return STATE_NAMES[this[STATE]];\n  }\n  setContext(id, ctx, forceOverride = false) {\n    if (this[CONTEXT_STATE] < 0) {\n      throw new Error('Can\\'t setContext after component has been rendered. Try put setContext code into constructor.');\n    }\n    if (this[CONTEXT_STATE] === 0) {\n      // we copy context to make sure child component do not modify context passed from parent.\n      // we do not copy it by default until setContext function is called, because it unnecessary to waste memory if\n      // child component do not modify the context.\n      if (!this[CONTEXT]) {\n        this[CONTEXT] = {};\n      } else {\n        this[CONTEXT] = copyContext(this[CONTEXT]);\n      }\n      this[CONTEXT_STATE] = 1; // has been copied.\n    }\n    if (id in this[CONTEXT]) {\n      // override exist may case hidden bug hard to debug.\n      // so we force programmer to pass third argument to \n      //   tell us he/she know what he/she is doing.\n      if (!forceOverride) throw new Error(`Contenxt with id: ${id} is exist. Pass third argument forceOverride=true to override it.`);\n    }\n    this[CONTEXT][id] = ctx;\n  }\n  getContext(id) {\n    if (!this[CONTEXT]) return null;\n    return this[CONTEXT][id] || null;\n  }\n  getChild(ref) {\n    return this[REF_NODES][ref] || null;\n  }\n  afterRender() {\n    // life time hook\n  }\n  beforeDestroy() {\n    // life time hook\n  }\n}\n\nexport function destroyRelatedVMListeners(comp) {\n  comp[RELATED_VM_LISTENERS].forEach((hooks, ctx) => {\n    hooks.forEach(hook => {\n      ctx[VM_OFF](hook[0], hook[1]);\n    });\n    hooks.length = 0;\n  });\n  comp[RELATED_VM_LISTENERS].clear();\n}\n\nexport function isComponent(c) {\n  return instanceOf(c, Component);\n}\n\nexport function assertRenderResults(renderResults) {\n  if (!isArray(renderResults) || renderResults.length === 0) {\n    throw new Error('Render results of component is empty');\n  }\n  return renderResults;\n}\n\nexport function getFirstHtmlDOM(el) {\n  const ns = el[ROOT_NODES];\n  if (!ns || ns.length === 0) assert_fail();\n  if (isComponent(ns[0])) return getFirstHtmlDOM(ns[0]);\n  else return ns[0];\n}","\nimport {\n  VM_ON as VM_ON_218dd9ac28\n} from '/Users/geyuhang/jinge/jinge-framework/src/viewmodel/notify';\nimport {\n  wrapComponent as wrapComponent_218dd9ac28\n} from '/Users/geyuhang/jinge/jinge-framework/src/viewmodel/proxy';\n\nimport {\n  Component,\n  RENDER,\n  ROOT_NODES,\n  ARG_COMPONENTS,\n  UPDATE_IF_NEED,\n  UPDATE,\n  DESTROY,\n  isComponent,\n  getFirstHtmlDOM\n} from '../core/component';\nimport {\n  isArray,\n  Symbol,\n  STR_DEFAULT,\n  isObject,\n  assert_fail,\n  STR_EMPTY\n} from '../util';\nimport {\n  createComment,\n  createFragment,\n  appendChild,\n  getParent,\n  insertBefore,\n  removeChild\n} from '../dom';\nimport {\n  VM_PARENTS\n} from '../viewmodel/common';\n\nexport const FOR_LENGTH = Symbol('length');\nexport const FOR_KEYS = Symbol('keys');\nexport const FOR_KEY_NAME = Symbol('key');\n\nconst KEY_INDEX = 'index';\nconst KEY_EACH = 'each';\nconst EMP_ARR = [];\n// let DEBUG_INC = 0;\n\nexport class ForEachComponent extends Component {\n  constructor(renderFn, item, index) {\n    super(renderFn);\n    const vm_218dd9ac28 = wrapComponent_218dd9ac28(this);\n    vm_218dd9ac28.each = item;\n    vm_218dd9ac28.index = index;\n    return vm_218dd9ac28;\n  }\n  [RENDER]() {\n    const renderFn = this[ARG_COMPONENTS][STR_DEFAULT];\n    if (!renderFn) assert_fail();\n    return renderFn(this);\n  }\n}\n\n\nfunction appendRenderEach(item, i, itemRenderFn, roots) {\n  const el = new ForEachComponent(itemRenderFn, item, i);\n  roots.push(el);\n  return el[RENDER]();\n}\n\nfunction assert_vm(item, i) {\n  if (item !== null && isObject(item) && !(VM_PARENTS in item)) {\n    throw new Error(`<for>: array item [${i}] must be ViewModel.`);\n  }\n}\n\nfunction prepare_key(item, i, keyMap, keyName) {\n  const key = keyName === KEY_EACH ? item : keyName(item);\n  if (keyMap.has(key)) {\n    console.error(`<for>: array item [${i}] and [${keyMap.get(key)}] both have key '${key}', dulplicated key may cause update error.`);\n  }\n  keyMap.set(key, i);\n  return key;\n}\nfunction renderItems(items, itemRenderFn, roots, keys, keyName) {\n  const result = [];\n  const tmpKeyMap = new Map();\n  items.forEach((item, i) => {\n    assert_vm(item, i);\n    if (keyName !== KEY_INDEX) {\n      keys.push(prepare_key(item, i, tmpKeyMap, keyName));  \n    }\n    result.push(...appendRenderEach(item, i, itemRenderFn, roots));\n  });\n  return result;\n}\nfunction loopAppend($parent, el) {\n  el[ROOT_NODES].forEach(node => {\n    if (isComponent(node)) {\n      loopAppend($parent, node);\n    } else {\n      appendChild($parent, node);\n    }\n  });\n}\nexport class ForComponent extends Component {\n  constructor(attrs) {\n    const kn = attrs._key;\n    if (!kn)\n      throw new Error('<for>: require \"_key\" attribute.');\n    if (!kn || !/^(index|each(.[\\w\\d$_]+)*)$/.test(kn)) {\n      throw new Error('<for>: bad \"_key\" attribute value. See https://[todo]');\n    }\n    super(attrs);\n    const vm_218dd9ac28 = wrapComponent_218dd9ac28(this);\n    const fn_218dd9ac28_4 = () => {\n      vm_218dd9ac28.loop = attrs.loop;\n    };\n    fn_218dd9ac28_4();\n    attrs[VM_ON_218dd9ac28]('loop', fn_218dd9ac28_4);\n    vm_218dd9ac28[FOR_KEY_NAME] = attrs._key;\n    vm_218dd9ac28[FOR_LENGTH] = 0;\n    vm_218dd9ac28[FOR_KEYS] = null;\n    if (kn !== KEY_INDEX && kn !== KEY_EACH) {\n      vm_218dd9ac28[FOR_KEY_NAME] = new Function(KEY_EACH, `return ${ kn }`);\n    }\n    return vm_218dd9ac28;\n  }\n  get loop() {\n    return this._l;\n  }\n  set loop(v) {\n    this._l = v;\n    this[UPDATE_IF_NEED]();\n  }\n  [RENDER]() {\n    const roots = this[ROOT_NODES];\n    const itemRenderFn = this[ARG_COMPONENTS] ? this[ARG_COMPONENTS][STR_DEFAULT] : null;\n    if (!itemRenderFn) {\n      roots.push(createComment(STR_EMPTY));\n      return roots;\n    }\n    const items = this.loop;\n    const keyName = this[FOR_KEY_NAME];\n    if (keyName !== KEY_INDEX) this[FOR_KEYS] = [];\n    if (!isArray(items) || items.length === 0) {\n      roots.push(createComment(STR_EMPTY));\n      return roots;\n    }\n    this[FOR_LENGTH] = items.length;\n    return renderItems(items, itemRenderFn, roots, this[FOR_KEYS], keyName);\n  }\n  [UPDATE]() {\n    const itemRenderFn = this[ARG_COMPONENTS] ? this[ARG_COMPONENTS][STR_DEFAULT] : null;\n    if (!itemRenderFn) return;\n\n    const newItems = Array.isArray(this.loop) ? this.loop : EMP_ARR;\n    const roots = this[ROOT_NODES];\n    const nl = newItems.length;\n    const ol = this[FOR_LENGTH];\n    // nothing changed, return directly.\n    if (nl === 0 && ol === 0) return;\n\n    const keyName = this[FOR_KEY_NAME];\n    // if new length equal 0, clear & render comment.\n    if (nl === 0 && ol > 0) {\n      const fd = getFirstHtmlDOM(roots[0]);\n      const $cmt = createComment(STR_EMPTY);\n      insertBefore(getParent(fd), $cmt, fd);\n      for(let i = 0; i < ol; i++) {\n        roots[i][DESTROY]();\n      }\n      roots.length = 1;\n      roots[0] = $cmt;\n      if (keyName !== KEY_INDEX) {\n        this[FOR_KEYS].length = 0;\n      }\n      this[FOR_LENGTH] = 0;\n      return;\n    }\n\n    this[FOR_LENGTH] = nl;\n    const $parent = getParent(ol === 0 ? roots[0] : getFirstHtmlDOM(roots[0]));\n    if (ol === 0) {\n      removeChild($parent, roots[0]);\n      roots.length = 0;\n    }\n\n    if (keyName === KEY_INDEX) {\n      let $f = null;\n      for(let i = 0; i < nl; i++) {\n        if (i < ol) {\n          const el = roots[i];\n          if (newItems[i] !== el.each) {\n            el.each = newItems[i];\n          }\n        } else {\n          if (!$f) $f = createFragment();\n          appendChild($f, ...appendRenderEach(newItems[i], i, itemRenderFn, roots));\n        }\n      }\n      if ($f) {\n        appendChild($parent, $f);\n      }\n      if (nl >= ol) return;\n      for(let i = nl; i < ol; i++) {\n        roots[i][DESTROY]();\n      }\n      roots.splice(nl);\n      return;\n    }\n\n    const oldKeys = this[FOR_KEYS];\n    if (ol === 0) {\n      const rs = renderItems(newItems, itemRenderFn, roots, oldKeys, keyName);\n      appendChild($parent, createFragment(rs));\n      return;\n    }\n\n    const oldKeyMap = new Map();\n    oldKeys.forEach((k, i) => {\n      oldKeyMap.set(k, i);\n    });\n    const newKeys = [];\n    const newKeyMap = new Map();\n    newItems.forEach((item, i) => {\n      assert_vm(item, i);\n      newKeys.push(prepare_key(item, i, newKeyMap, keyName));\n    });\n    \n    let oi = 0;\n    let ni = 0;\n    const newRoots = [];\n    const oldTags = new Uint8Array(ol);\n    while(oi < ol || ni < nl) {\n      while(oi < ol) {\n        if (oldTags[oi] !== 0) {\n          oi++;\n        } else if (newKeyMap.has(oldKeys[oi]) && newKeyMap.get(oldKeys[oi]) >= ni) {\n          break;\n        } else {\n          roots[oi][DESTROY]();\n          oi++;\n        }\n      }\n      if (oi >= ol) {\n        let $f = null;\n        for(; ni < nl; ni++) {\n          const el = new ForEachComponent(itemRenderFn, newItems[ni], ni);\n          if (!$f) $f = createFragment();\n          appendChild($f, ...el[RENDER]());\n          newRoots.push(el);\n        }\n        if ($f) appendChild($parent, $f);\n        break;\n      }\n      const oldKey = oldKeys[oi];\n      let $f = null;\n      while(ni < nl) {\n        const newKey = newKeys[ni];\n        if (newKey === oldKey) break;\n        \n        let reuseEl = null;\n        if (oldKeyMap.has(newKey)) {\n          const oldIdx = oldKeyMap.get(newKey);\n          if (oldIdx > oi && oldTags[oldIdx] === 0) {\n            reuseEl = roots[oldIdx];\n            oldTags[oldIdx] = 1;\n          } \n        }\n        if (!$f) $f = createFragment();\n        if (!reuseEl) {\n          reuseEl = new ForEachComponent(itemRenderFn, newItems[ni], ni);\n          appendChild($f, ...reuseEl[RENDER]());\n        } else {\n          loopAppend($f, reuseEl);\n          if (reuseEl.index !== ni) reuseEl.index = ni;\n          if (reuseEl.each !== newItems[ni]) reuseEl.each = newItems[ni];\n        }\n        newRoots.push(reuseEl);\n        ni++;\n      }\n      if (ni >= nl) {\n        assert_fail('unimpossible?!');\n      }\n      const el = roots[oi];\n      $f && insertBefore($parent, $f, getFirstHtmlDOM(el));\n      if (el.index !== ni) el.index = ni;\n      if (el.each !== newItems[ni]) el.each = newItems[ni];\n      newRoots.push(el);\n      oi++;\n      ni++;\n    }\n    this[ROOT_NODES] = newRoots;\n    this[FOR_KEYS] = newKeys;\n\n  }\n}","\nimport {\n  VM_ON as VM_ON_218dd9ac28\n} from '/Users/geyuhang/jinge/jinge-framework/src/viewmodel/notify';\nimport {\n  wrapComponent as wrapComponent_218dd9ac28\n} from '/Users/geyuhang/jinge/jinge-framework/src/viewmodel/proxy';\n\nimport {\n  Component,\n  RENDER,\n  DESTROY,\n  ARG_COMPONENTS,\n  UPDATE_IF_NEED,\n  UPDATE,\n  ROOT_NODES,\n  onAfterRender,\n  isComponent,\n  getFirstHtmlDOM\n} from '../core/component';\nimport {\n  createComment,\n  getParent,\n  removeChild,\n  insertBefore\n} from '../dom';\nimport {\n  STR_DEFAULT,\n  STR_EMPTY\n} from '../util';\n\n\nfunction getRenderFn(acs, value) {\n  return acs ? ((value in acs) ? acs[value] : acs[STR_DEFAULT]) : null;\n}\n\nexport function renderSwitch(acs, roots, value) {\n  const renderFn = getRenderFn(acs, value);\n  if (!renderFn) {\n    roots.push(createComment(STR_EMPTY));\n    return roots;\n  }\n  const el = new Component(renderFn);\n  roots.push(el);\n  return el[RENDER]();\n}\n\n\nexport function updateSwitch(acs, roots, value) {\n  const renderFn = getRenderFn(acs, value);\n  if (!renderFn) {\n    const el = roots[0];\n    if (isComponent(el)) {\n      const fd = getFirstHtmlDOM(el);\n      const pa = getParent(fd);\n      const $cmt = createComment(STR_EMPTY);\n      roots[0] = $cmt;\n      insertBefore(\n        pa,\n        $cmt,\n        fd\n      );\n      el[DESTROY]();\n    }\n    return;\n  }\n\n  const el = roots[0];\n  let fd, pa;\n  const isC = isComponent(el);\n  if (isC) {\n    fd = getFirstHtmlDOM(el);\n    pa = getParent(fd);\n  } else {\n    fd = el;\n    pa = getParent(el);\n  }\n  const ne = new Component(renderFn);\n  roots[0] = ne;\n  insertBefore(\n    pa,\n    ne[RENDER](),\n    fd\n  );\n  if (isC) {\n    el[DESTROY]();\n  } else {\n    removeChild(pa, fd);\n  }\n  onAfterRender(ne);\n}\n\nexport class IfComponent extends Component {\n  constructor(attrs) {\n    super(attrs);\n    const vm_218dd9ac28 = wrapComponent_218dd9ac28(this);\n    const fn_218dd9ac28_1 = () => {\n      vm_218dd9ac28.expect = !!attrs.expect;\n    };\n    fn_218dd9ac28_1();\n    attrs[VM_ON_218dd9ac28]('expect', fn_218dd9ac28_1);\n    return vm_218dd9ac28;\n  }\n  get expect() {\n    return this._e;\n  }\n  set expect(v) {\n    if (this._e === v) return;\n    this._e = v;\n    this[UPDATE_IF_NEED]();\n  }\n  [RENDER]() {\n    const acs = this[ARG_COMPONENTS];\n    if (acs) {\n      acs[false] = acs['else'];\n    }\n    return renderSwitch(acs, this[ROOT_NODES], this.expect);\n  }\n  [UPDATE]() {\n    updateSwitch(this[ARG_COMPONENTS], this[ROOT_NODES], this.expect);\n  }\n}","import {\n  createTextNode as createTextNode_28e79f58, createComment as createComment_28e79f58, createElement as createElement_28e79f58, createElementWithoutAttrs as createElementWithoutAttrs_28e79f58, createFragment as createFragment_28e79f58, appendText as appendText_28e79f58, appendChild as appendChild_28e79f58, setText as setText_28e79f58, setAttribute as setAttribute_28e79f58, setInputValue as setInputValue_28e79f58, addEvent as addEvent_28e79f58\n} from 'jinge/src/dom';\nimport {\n  VM_ON as VM_ON_28e79f58, VM_NOTIFY as VM_NOTIFY_28e79f58\n} from 'jinge/src/viewmodel/notify';\nimport {\n  assertRenderResults as assertRenderResults_28e79f58, CONTEXT as CONTEXT_28e79f58, NON_ROOT_COMPONENT_NODES as NON_ROOT_COMPONENT_NODES_28e79f58, ROOT_NODES as ROOT_NODES_28e79f58, REF_NODES as REF_NODES_28e79f58, ARG_COMPONENTS as ARG_COMPONENTS_28e79f58, RENDER as RENDER_28e79f58\n} from 'jinge/src/core/component';\nimport {\n  wrapViewModel as wrapViewModel_28e79f58\n} from 'jinge/src/viewmodel/proxy';\nimport {\n  STR_EMPTY as STR_EMPTY_28e79f58, STR_DEFAULT as STR_DEFAULT_28e79f58\n} from 'jinge/src/util';\n\nimport {\n  IfComponent as IfComponent_ff41b389, ForComponent as ForComponent_ff41b389, SwitchComponent as SwitchComponent_ff41b389, Component as Component_ff41b389\n} from 'jinge';\nexport default function(component) {\n  const vm_0 = component;\n  return [\n  (() => {\n    const el = createElementWithoutAttrs_28e79f58(\n      \"h2\",\n      \"Simple For-loop\"\n    );\n    component[ROOT_NODES_28e79f58].push(el);\n    return el;\n  })(),\n  (() => {\n    const el = createElementWithoutAttrs_28e79f58(\n      \"div\",\n      createElementWithoutAttrs_28e79f58(\n        \"p\",\n        ...(() => {\n          const attrs = wrapViewModel_28e79f58({\n            [CONTEXT_28e79f58]: component[CONTEXT_28e79f58],\n            loop: null,\n            _key: \"index\",\n            [ARG_COMPONENTS_28e79f58]: {\n              [STR_DEFAULT_28e79f58]: function(component) {\n                const vm_1 = component;\n                return [\n                (() => {\n                  const el = createTextNode_28e79f58('');\n                  const fn = () => setText_28e79f58(el, vm_1.index);\n                  vm_1[VM_ON_28e79f58](\"index\", fn, component);\n                  fn();\n                  component[ROOT_NODES_28e79f58].push(el);\n                  return el;\n                })(),\n                (() => {\n                  const el = createTextNode_28e79f58(\": \");\n                  component[ROOT_NODES_28e79f58].push(el);\n                  return el;\n                })(),\n                (() => {\n                  const el = createTextNode_28e79f58('');\n                  const fn = () => setText_28e79f58(el, vm_1.each);\n                  vm_1[VM_ON_28e79f58](\"each\", fn, component);\n                  fn();\n                  component[ROOT_NODES_28e79f58].push(el);\n                  return el;\n                })(),\n                (() => {\n                  const el = createTextNode_28e79f58(\";\\n  \");\n                  component[ROOT_NODES_28e79f58].push(el);\n                  return el;\n                })()\n                ];\n              }\n            }\n          }, true);\n          const fn_0 = () => attrs.loop = vm_0.numbers;\n          vm_0[VM_ON_28e79f58](\"numbers\", fn_0, component);\n          fn_0();\n          const el = new ForComponent_ff41b389(attrs);\n          component[NON_ROOT_COMPONENT_NODES_28e79f58].push(el);\n          return assertRenderResults_28e79f58(el[RENDER_28e79f58](component));\n        })()\n      ),\n      createElementWithoutAttrs_28e79f58(\n        \"div\",\n        (() => {\n          const el = createElementWithoutAttrs_28e79f58(\n            \"button\",\n            \"Test\"\n          );\n          addEvent_28e79f58(el, 'click', function(...args) {vm_0.test()})\n          return el;\n        })(),\n        (() => {\n          const el = createElementWithoutAttrs_28e79f58(\n            \"button\",\n            \"Push Large\"\n          );\n          addEvent_28e79f58(el, 'click', function(...args) {vm_0.push()})\n          return el;\n        })()\n      )\n    );\n    component[ROOT_NODES_28e79f58].push(el);\n    return el;\n  })(),\n  (() => {\n    const el = createElementWithoutAttrs_28e79f58(\n      \"h2\",\n      \"For & If\"\n    );\n    component[ROOT_NODES_28e79f58].push(el);\n    return el;\n  })(),\n  (() => {\n    const el = createElementWithoutAttrs_28e79f58(\n      \"div\",\n      createElementWithoutAttrs_28e79f58(\n        \"p\",\n        ...(() => {\n          const attrs = wrapViewModel_28e79f58({\n            [CONTEXT_28e79f58]: component[CONTEXT_28e79f58],\n            loop: null,\n            _key: \"each\",\n            [ARG_COMPONENTS_28e79f58]: {\n              [STR_DEFAULT_28e79f58]: function(component) {\n                const vm_1 = component;\n                return [\n                ...(() => {\n                  const attrs = wrapViewModel_28e79f58({\n                    [CONTEXT_28e79f58]: component[CONTEXT_28e79f58],\n                    expect: null,\n                    [ARG_COMPONENTS_28e79f58]: {\n                      [STR_DEFAULT_28e79f58]: function(component) {\n                        return [\n                        (() => {\n                          const el = createElement_28e79f58(\n                            \"span\",\n                            {\n                              style: \"margin-right: 10px;\"\n                            },\n                            (() => {\n                              const el = createTextNode_28e79f58('');\n                              const fn = () => setText_28e79f58(el, vm_1.index);\n                              vm_1[VM_ON_28e79f58](\"index\", fn, component);\n                              fn();\n                              return el;\n                            })(),\n                            \": \",\n                            (() => {\n                              const el = createTextNode_28e79f58('');\n                              const fn = () => setText_28e79f58(el, vm_1.each);\n                              vm_1[VM_ON_28e79f58](\"each\", fn, component);\n                              fn();\n                              return el;\n                            })(),\n                            \";\"\n                          );\n                          component[ROOT_NODES_28e79f58].push(el);\n                          return el;\n                        })()\n                        ];\n                      }\n                    }\n                  }, true);\n                  const fn_0 = () => attrs.expect = vm_1.each % 2 === 0;\n                  vm_1[VM_ON_28e79f58](\"each\", fn_0, component);\n                  fn_0();\n                  const el = new IfComponent_ff41b389(attrs);\n                  component[ROOT_NODES_28e79f58].push(el);\n                  return assertRenderResults_28e79f58(el[RENDER_28e79f58](component));\n                })(),\n                ...(() => {\n                  const attrs = wrapViewModel_28e79f58({\n                    [CONTEXT_28e79f58]: component[CONTEXT_28e79f58],\n                    expect: null,\n                    [ARG_COMPONENTS_28e79f58]: {\n                      [STR_DEFAULT_28e79f58]: function(component) {\n                        return [\n                        (() => {\n                          const el = createElement_28e79f58(\n                            \"span\",\n                            {\n                              style: \"margin-right: 10px; color: blue;\"\n                            },\n                            (() => {\n                              const el = createTextNode_28e79f58('');\n                              const fn = () => setText_28e79f58(el, vm_1.each);\n                              vm_1[VM_ON_28e79f58](\"each\", fn, component);\n                              fn();\n                              return el;\n                            })()\n                          );\n                          component[ROOT_NODES_28e79f58].push(el);\n                          return el;\n                        })()\n                        ];\n                      }\n                    }\n                  }, true);\n                  const fn_0 = () => attrs.expect = vm_1.each % 2 === 1;\n                  vm_1[VM_ON_28e79f58](\"each\", fn_0, component);\n                  fn_0();\n                  const el = new IfComponent_ff41b389(attrs);\n                  component[ROOT_NODES_28e79f58].push(el);\n                  return assertRenderResults_28e79f58(el[RENDER_28e79f58](component));\n                })()\n                ];\n              }\n            }\n          }, true);\n          const fn_0 = () => attrs.loop = vm_0.numbers;\n          vm_0[VM_ON_28e79f58](\"numbers\", fn_0, component);\n          fn_0();\n          const el = new ForComponent_ff41b389(attrs);\n          component[NON_ROOT_COMPONENT_NODES_28e79f58].push(el);\n          return assertRenderResults_28e79f58(el[RENDER_28e79f58](component));\n        })()\n      )\n    );\n    component[ROOT_NODES_28e79f58].push(el);\n    return el;\n  })(),\n  (() => {\n    const el = createElementWithoutAttrs_28e79f58(\n      \"h2\",\n      \"Key: id\"\n    );\n    component[ROOT_NODES_28e79f58].push(el);\n    return el;\n  })(),\n  (() => {\n    const el = createElementWithoutAttrs_28e79f58(\n      \"div\",\n      createElementWithoutAttrs_28e79f58(\n        \"p\",\n        createElementWithoutAttrs_28e79f58(\n          \"ul\",\n          ...(() => {\n            const attrs = wrapViewModel_28e79f58({\n              [CONTEXT_28e79f58]: component[CONTEXT_28e79f58],\n              loop: null,\n              _key: \"each.id\",\n              [ARG_COMPONENTS_28e79f58]: {\n                [STR_DEFAULT_28e79f58]: function(component) {\n                  const vm_1 = component;\n                  return [\n                  (() => {\n                    const el = createElementWithoutAttrs_28e79f58(\n                      \"li\",\n                      (() => {\n                        const el = createTextNode_28e79f58('');\n                        const fn = () => setText_28e79f58(el, vm_1.each.name);\n                        vm_1[VM_ON_28e79f58](\"each.name\", fn, component);\n                        fn();\n                        return el;\n                      })()\n                    );\n                    component[ROOT_NODES_28e79f58].push(el);\n                    return el;\n                  })()\n                  ];\n                }\n              }\n            }, true);\n            const fn_0 = () => attrs.loop = vm_0.persons;\n            vm_0[VM_ON_28e79f58](\"persons\", fn_0, component);\n            fn_0();\n            const el = new ForComponent_ff41b389(attrs);\n            component[NON_ROOT_COMPONENT_NODES_28e79f58].push(el);\n            return assertRenderResults_28e79f58(el[RENDER_28e79f58](component));\n          })()\n        )\n      )\n    );\n    component[ROOT_NODES_28e79f58].push(el);\n    return el;\n  })()\n  ];\n}","\nimport {\n  VM_ON as VM_ON_218dd9ac28\n} from 'jinge/src/viewmodel/notify';\nimport {\n  wrapComponent as wrapComponent_218dd9ac28\n} from 'jinge/src/viewmodel/proxy';\n\nimport {\n  Component,\n  bootstrap,\n  VM\n} from 'jinge';\n\nimport _tpl from './app.html';\n\nlet AUTO_INC = 6;\n\nclass App extends Component {\n  static get template() {\n    return _tpl;\n  }\n  constructor(args) {\n    super(args);\n    const vm_218dd9ac28 = wrapComponent_218dd9ac28(this);\n    vm_218dd9ac28.INC = 10;\n    vm_218dd9ac28.numbers = VM([\n      0,\n      1,\n      2\n    ]);\n    vm_218dd9ac28.persons = VM([\n      {\n        id: '001',\n        name: 'XiaoGe'\n      },\n      {\n        id: '002',\n        name: 'Jinge'\n      }\n    ]);\n    setInterval(() => {\n      vm_218dd9ac28.numbers.push(AUTO_INC++);\n      vm_218dd9ac28.persons.push(VM({\n        id: Date.now().toString(32),\n        name: Date.now().toString(32)\n      }));\n    }, 3000);\n    return vm_218dd9ac28;\n  }\n  test() {\n    this.numbers = VM([6, 0, 7, 3, 2]);\n    this.persons.length = 0;\n  }\n  push() {\n    const tmp = [];\n    for(let i = 0; i < 10000; i++) {\n      tmp.push(AUTO_INC++);\n    }\n    this.numbers.push(...tmp);\n  }\n}\n\nbootstrap(App, document.getElementById('root-app'));\n","import {\n  RENDER_TO_DOM,\n  isComponent\n} from './component';\nimport { assert_fail } from '../util';\n\nexport function bootstrap(Component, dom) {\n  if (dom === document.body) {\n    throw new Error('bootstrap dom cannot be document.body');\n  }\n  const bootComponent = new Component();\n  if (!isComponent(bootComponent)) assert_fail();\n  bootComponent[RENDER_TO_DOM](dom);\n}\n"],"sourceRoot":""}